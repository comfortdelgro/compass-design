import {Callout} from 'nextra-theme-docs'
import styles from '../../styles/Home.module.css'
import {faThumbsUp, faVirus} from '@fortawesome/free-solid-svg-icons'
import {DataGridStory} from 'components/DataGrid'

# Data Grid
The Data Grid component offers various features that enhance data visualization and user experience. 
It enables sorting, filtering, and grouping of data, making it easier for users to find and analyze specific information within large datasets. 
Users can click on column headers to sort the data in ascending or descending order, and they can apply filters to display only the relevant data based on specific criteria.
Data-grid would be a component displaying tabular data, just like a table. However, it is more advanced and has more features. For example, you can even draw chart within data-grid cell.

Provided appears to be a React component called ReactTable which is a table component built base on the @tanstack/react-table library. 
It accepts various props to customize its behavior and rendering.

<Callout>
  Check out our [ladle](/ladle?story=dta-grid--full-featured) for more info on
  this component.
</Callout>

---

### Import:

```js
import {DataGrid} from '@comfortdelgro/react-compass'
```

or

```js
import DataGrid from '@comfortdelgro/react-compass/data-grid'
```

---

### Full features data-grid:

<section className={styles.textAreaShowcaseContainer}>
  <DataGridStory />
</section>

```js
const columns = React.useMemo<Array<ColumnConfig<Person>>>(
    () => [
      {
        id: 'select',
        header: ({table}) => <TableHeader table={table} />,
        cell: ({row}) => <TableHeaderCell row={row} />,
      },
      {
        id: 'name',
        header: () => <div style={{textAlign: 'center'}}>Name</div>,
        footer: (props) => props.column.id,
        columns: [
          {
            accessorKey: 'firstName',
            cell: (info) => info.getValue<string>(),
            footer: (props) => props.column.id,
            enableResizing: true,
          },
          {
            accessorFn: (row) => row.lastName,
            id: 'lastName',
            cell: (info) => info.getValue<string>(),
            header: () => <span>Last Name</span>,
            footer: (props) => props.column.id,
            enableResizing: true,
          },
        ],
      },
      {
        id: 'otherInfo',
        header: () => <div style={{textAlign: 'center'}}>Other info</div>,
        footer: (props) => props.column.id,
        columns: [
          {
            accessorKey: 'age',
            header: () => 'Age',
            footer: (info) => info.column.id,
          },
          {
            accessorKey: 'visits',
            header: () => <span>Visits</span>,
            footer: (info) => info.column.id,
          },
          {
            accessorKey: 'status',
            header: 'Status',
            footer: (info) => info.column.id,
          },
          {
            accessorKey: 'progress',
            header: 'Profile Progress',
            cell: (info) => info.getValue<string>(),
            footer: (info) => info.column.id,
          },
        ],
      },
    ],
    [],
  )
```

```js
<DataGrid data={data} columns={columns} options={options}>
  <DataGrid.Toolbar
    css={{
      display: 'flex',
      flexDirection: 'row',
      justifyContent: 'space-between',
    }}
  >
    <SearchField placeholder='Search' />

    <div
      style={{
        display: 'flex',
        flexDirection: 'row',
        alignItems: 'center',
        gap: '0.5rem',
      }}
    >
      <Button variant='primary'>Button</Button>
      <Button variant='secondary'>Button</Button>
      <Button variant='ghost'>
        <Icon icon={faTrashAlt} />
      </Button>
      <Button variant='ghost'>
        <Icon icon={faDashboard} />
      </Button>
      <Button variant='ghost'>
        <Icon icon={faFileLines} />
      </Button>
    </div>
  </DataGrid.Toolbar>
  <DataGrid.Footer
    css={{
      display: 'flex',
      flexDirection: 'row',
      justifyContent: 'space-between',
    }}
  >
    <div>{/* Todo: Dropdown */}</div>
    <div
      style={{
        display: 'flex',
        flexDirection: 'row',
        alignItems: 'center',
        gap: '0.5rem',
      }}
    >
      <div
        style={{
          fontWeight: '600',
        }}
      >
        {(page - 1) * 10 + 1} - {(page - 1) * 10 + 10} of 100
      </div>
      <Pagination page={page} onChange={(page) => setPage(page)} total={10} />
    </div>
  </DataGrid.Footer>
</DataGrid>
```
### Data

#### data: TData[]

The data for the table to display. This array should match the type you provided to `table.setRowType<...>`, but in theory could be an array of anything. 
It's common for each item in the array to be an object of key/values but this is not required. Columns can access this data via string/index or a functional accessor to return anything they want.

When the data option changes reference (compared via Object.is), the table will reprocess the data. 
Any other data processing that relies on the core data model (such as grouping, sorting, filtering, etc) will also be reprocessed.

Make sure your data option is only changing when you want the table to reprocess. 
Providing an inline [] or constructing the data array as a new object every time you want to render the table will result in a lot of unnecessary re-processing. 
This can easily go unnoticed in smaller tables, but you will likely notice it in larger tables.

### Options Interface

The `Options` interface represents the configuration options for a particular functionality or component.

#### Properties

| Property             | Type                                      | Description                                                                                                 |
| -------------------- | ----------------------------------------- | ----------------------------------------------------------------------------------------------------------- |
| `enableSorting`      | `boolean`                                 | A boolean value indicating whether sorting is enabled. Defaults to `false` if not provided.                 |
| `enableMultiSort`    | `boolean`                                 | A boolean value indicating whether multiple column sorting is enabled. Defaults to `false` if not provided. |
| `manualSorting`      | `boolean`                                 | A boolean value indicating whether manual sorting is enabled. Defaults to `false` if not provided.          |
| `columnResizeMode`   | `'onChange' \| 'onEnd'`                   | A string value specifying the column resize mode.                                                           |
| `initialSortBy`      | `SortingState`                            | A `SortingState` object representing the initial sorting configuration.                                     |
| `enableRowSelection` | `boolean \| (row: Row<TData>) => boolean` | A boolean value or a function determining whether row selection is enabled.                                 |

#### SortingState

The `SortingState` interface represents the sorting configuration.

##### Properties

| Property    | Type              | Description                                   |
| ----------- | ----------------- | --------------------------------------------- |
| `column`    | `string`          | The column to sort by.                        |
| `direction` | `'asc' \| 'desc'` | The sort direction (ascending or descending). |

#### `Row<TData>`

The `Row` interface represents a specific row.

##### Properties

#### Example Usage

```tsx
interface SortingState {
  column: string
  direction: 'asc' | 'desc'
}

interface Row<TData> {
  // Properties of a row
}

interface Options<TData> {
  enableSorting?: boolean
  enableMultiSort?: boolean
  manualSorting?: boolean
  columnResizeMode?: 'onChange' | 'onEnd'
  initialSortBy?: SortingState
  enableRowSelection?: boolean | ((row: Row<TData>) => boolean)
}
```
---

### Usage:

- For server sorting:
  \*if user want to custom sort. Add `manualSorting: true` to DataGridOptions.

```js
const options: DataGridOptions = {
  enableSorting: true,
  enableMultiSort: true,
  columnResizeMode: 'onChange',
  manualSorting: true,
}
```

\*then create function and assign to `onManualSorting` props on DataGrid.

Example:

```js
const onSorting = (sortingField: StateSorting) => {
  console.log('stateSorting', sortingField)
}
```

```js
 <DataGrid data={data} columns={columns} options={options} onManualSorting={onSorting}>
```

\*props `sortingField` contain all informations sorting for your need

---

- For custom style:

\*add className to DataGrid

```js
<DataGrid
        data={data}
        columns={columns}
        options={options}
        onManualSorting={onSorting}
        className='someClassName'
      >
```

- options property of data-grid:

```js
  const options: OptionType = {
        enableSorting?: boolean
        enableMultiSort?: boolean
        manualSorting?: boolean
        columnResizeMode?: 'onChange' | 'onEnd'
  }
```

### Props:

| Name         | Type                  | Default | Description                 |
| :----------- | :-------------------- | :------ | :-------------------------- |
| `data`       | Array                 | `[]`    | `Data for show `            |
| `columns`    | `Array<ColumnDef<T>>` | `[]`    | `column with custom config` |
| `options`    | OptionType            | {}      | `Data Grid option`          |
| `children`   | React.ReactNode       | —       | `child element`             |
| `css`        | `CSS`                 | —       | ``                          |
| `delegated ` | `CSS`                 | —       |                             |

---

<Callout>
  Check out our [ladle](/ladle?story=data-grid--full-featured) for more info on
  this component.
</Callout>
```
