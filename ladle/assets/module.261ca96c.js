import{R as a,r as m}from"./index.659ddc59.js";function k(n){return null}k.getCollectionNode=function*(e,t){let{childItems:u,title:i,children:l}=e,d=e.title||e.children,f=e.textValue||(typeof d=="string"?d:"")||e["aria-label"]||"";!f&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:d,textValue:f,"aria-label":e["aria-label"],hasChildNodes:w(e),*childNodes(){if(u)for(let r of u)yield{type:"item",value:r};else if(i){let r=[];a.Children.forEach(l,c=>{r.push({type:"item",element:c})}),yield*r}}}};function w(n){return n.hasChildItems!=null?n.hasChildItems:!!(n.childItems||n.title&&a.Children.count(n.children)>0)}let V=k;class C{build(e,t){return this.context=t,b(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:u}=e;if(typeof t=="function"){if(!u)throw new Error("props.children was a function but props.items is missing");for(let i of e.items)yield*this.getFullNode({value:i},{renderer:t})}else{let i=[];a.Children.forEach(t,d=>{i.push(d)});let l=0;for(let d of i){let f=this.getFullNode({element:d,index:l},{});for(let r of f)l++,yield r}}}getKey(e,t,u,i){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${i}${t.key}`;let l=t.value;if(l!=null){var d;let f=(d=l.key)!==null&&d!==void 0?d:l.id;if(f==null)throw new Error("No key found for item");return f}return i?`${i}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,u,i){let l=e.element;if(!l&&e.value&&t&&t.renderer){let r=this.cache.get(e.value);if(r&&(!r.shouldInvalidate||!r.shouldInvalidate(this.context))){r.index=e.index,r.parentKey=i?i.key:null,yield r;return}l=t.renderer(e.value)}if(a.isValidElement(l)){let r=l.type;if(typeof r!="function"&&typeof r.getCollectionNode!="function"){let s=typeof l.type=="function"?l.type.name:l.type;throw new Error(`Unknown element <${s}> in collection.`)}let c=r.getCollectionNode(l.props,this.context),y=e.index,h=c.next();for(;!h.done&&h.value;){let s=h.value;e.index=y;let $=s.key;$||($=s.element?null:this.getKey(l,e,t,u));let x=[...this.getFullNode({...s,key:$,index:y,wrapper:g(e.wrapper,s.wrapper)},this.getChildState(t,s),u?`${u}${l.key}`:l.key,i)];for(let o of x){if(o.value=s.value||e.value,o.value&&this.cache.set(o.value,o),e.type&&o.type!==e.type)throw new Error(`Unsupported type <${v(o.type)}> in <${v(i.type)}>. Only <${v(e.type)}> is supported.`);y++,yield o}h=c.next(x)}return}if(e.key==null)return;let d=this,f={type:e.type,props:e.props,key:e.key,parentKey:i?i.key:null,value:e.value,level:i?i.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:b(function*(){if(!e.hasChildNodes)return;let r=0;for(let c of e.childNodes()){c.key!=null&&(c.key=`${f.key}${c.key}`),c.index=r;let y=d.getFullNode(c,d.getChildState(t,c),f.key,f);for(let h of y)r++,yield h}})};yield f}constructor(){this.cache=new WeakMap}}function b(n){let e=[],t=null;return{*[Symbol.iterator](){for(let u of e)yield u;t||(t=n());for(let u of t)e.push(u),yield u}}}function g(n,e){if(n&&e)return t=>n(e(t));if(n)return n;if(e)return e}function v(n){return n[0].toUpperCase()+n.slice(1)}function E(n,e,t,u=[]){let i=m.exports.useMemo(()=>new C,[]),l=m.exports.useRef(null);return m.exports.useMemo(()=>{let d=i.build(n,t);return l.current=e(d,l.current),l.current},[i,n.children,n.items,t,...u])}export{V as $,E as a};
