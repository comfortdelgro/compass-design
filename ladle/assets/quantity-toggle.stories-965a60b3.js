import{s as B,R as s,a as m,j as a,r as L}from"./index-6bc7c86e.js";import{C as H}from"./components-286e15f4.js";import{u as K}from"./use-dom-ref-b39131a9.js";const U=B("div",{width:"100%",display:"flex",flexDirection:"column","div[role='group']":{display:"flex",width:"100%",input:{flex:1,color:"#323130",padding:"$3 $4",textAlign:"center",border:"1px solid #EDEBE9",borderRadius:"0",backgroundColor:"$white",fontSize:"$label1",fontWeight:"$semibold"},"input::placeholder":{color:"$gray40"},button:{color:"#323130",aspectRatio:"1",width:"$14",cursor:"pointer",fontWeight:"$bold",border:"1px solid #EDEBE9",backgroundColor:"$gray10"}},label:{fontSize:"$label1",fontWeight:"$medium",lineHeight:"$normal",display:"block",marginBottom:"$1",color:"$gray90",span:{marginLeft:"$1",color:"$danger"}},variants:{isDisabled:{true:{"div[role='group']":{input:{backgroundColor:"#EDEBE9"},button:{borderColor:"#EDEBE9",cursor:"not-allowed"}}}},isErrored:{true:{"div[role='group']":{input:{borderColor:"$danger"},button:{borderColor:"$danger"}}}}}}),P=B("div",{fontSize:"$label2",fontWeight:"$medium",transition:"$default",marginTop:"$1",color:"$gray70",variants:{error:{true:{color:"$danger"}}}}),I=s.forwardRef((i,$)=>{const{css:c={},value:f,step:b=1,max:y=999999999999999,min:S=-999999999999999,formatOptions:o={},placeholder:V,onChange:p,isErrored:F,isDisabled:h,...A}=i,x=s.useMemo(()=>({prefix:(o==null?void 0:o.prefix)??"",suffix:(o==null?void 0:o.suffix)??"",toFixed:o==null?void 0:o.toFixed}),[o]),R=K($),[E,d]=s.useState((f==null?void 0:f.toString().length)??1),[w,N]=s.useState(f??0),[l,u]=s.useState(f??0),[q,T]=s.useState((o==null?void 0:o.prefix)??""),[Q,C]=s.useState((o==null?void 0:o.suffix)??""),D=()=>{function t(e){if(e.toString().includes(".")){const r=Number.parseFloat(e.toString())+b;e=Math.min(Number.parseFloat(r.toFixed(15)),y)}else e=Math.min(Number(e)+b,y);return e}Number.isNaN(l)||(u(e=>t(e)),N(e=>t(e)))},M=()=>{function t(e){if(e.toString().includes(".")){const r=Number.parseFloat(e.toString())-b;e=Math.max(Number.parseFloat(r.toFixed(15)),S)}else e=Math.max(Number(e)-b,S);return e}Number.isNaN(l)||(u(e=>t(e)),N(e=>t(e)))},W=t=>{t.preventDefault();const e=t.target,r=e.selectionStart??e.value.length;t.key==="ArrowLeft"&&d(Math.max(r-1,0)),t.key==="ArrowRight"&&d(Math.min(r+1,e.value.length)),t.key==="ArrowUp"&&D(),t.key==="ArrowDown"&&M(),t.key==="Backspace"&&(u(n=>(n.toString().length===1?n="":n=`${l}`.slice(0,Math.max(r-1,0))+`${l}`.slice(r),n)),d(r===1?1:r-1)),t.key==="-"&&!l.toString().includes("-")&&(r===0||l===0)&&(u(n=>l===0?"-":`-${n}`),d(r+1)),t.key==="."&&!l.toString().includes(".")&&(u(n=>`${n.toString().slice(0,r)}.${n.toString().slice(r)}`),d(r+1)),Number.isInteger(+t.key)&&(u(n=>{const k=`${n.toString().slice(0,r)}${t.key}${n.toString().slice(r)}`;return Number(k)<=y&&Number(k)>=S&&(n=n?k:t.key),n}),d(r+1))},j=t=>{var e;l!==""&&(T(""),C(""),u(w)),(e=i.onFocus)==null||e.call(i,t)},z=t=>{var e;l!==""&&(T(x.prefix),C(x.suffix),x.toFixed&&(N(l),u(r=>Number(r).toFixed(x.toFixed)))),(e=i.onBlur)==null||e.call(i,t)};return s.useEffect(()=>{p==null||p(Number(w))},[w]),s.useEffect(()=>{var t;(t=R.current)==null||t.setSelectionRange(E,E)},[E,l]),m(U,{css:c,isErrored:!!F,isDisabled:!!h,children:[i.label&&m("label",{children:[i.label,i.isRequired&&a("span",{children:"*"})]}),m("div",{role:"group",children:[a("button",{disabled:h,onClick:M,style:{borderRight:"none",borderRadius:"4px 0 0 4px"},type:"button",children:"-"}),a("input",{...A,disabled:h,required:i.isRequired,type:"text",value:l!==""?`${q}${l}${Q}`:"",onKeyDown:W,onFocus:j,onBlur:z,placeholder:V,ref:R}),a("button",{disabled:h,onClick:D,style:{borderLeft:"none",borderRadius:"0 4px 4px 0"},type:"button",children:"+"})]}),F&&i.errorMessage&&a(P,{error:!0,children:i.errorMessage}),i.helperText?a(P,{children:i.helperText}):null]})}),g=I;g.displayName="QuantityToggle";const Y=()=>{const[i,$]=L.useState(0);return m(H,{children:[a("h3",{children:"Controlled"}),a(g,{label:"Potato price",placeholder:"Price",onChange:c=>console.log(c),formatOptions:{prefix:"$",toFixed:2}}),a("h3",{children:"Un Controlled"}),a(g,{label:"Potato price",isRequired:!0,placeholder:"Price",value:i,onChange:c=>$(c),formatOptions:{prefix:"$"}}),a("h3",{children:"Disabled"}),a(g,{label:"Potato price",defaultValue:2,isDisabled:!0,helperText:"This is helper text"}),a("h3",{children:"Errored"}),a(g,{label:"Potato price",defaultValue:2,isErrored:!0,helperText:"This is helper text",errorMessage:"This is error message"})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{Y as Variants};
