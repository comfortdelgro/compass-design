import{r as l,R as v}from"./index-bd5aadfc.js";import{d as M}from"./import-52881888.js";function O(t,e,a){let[n,r]=l.useState(t||e),o=l.useRef(t!==void 0),f=o.current,c=t!==void 0,u=l.useRef(n);f!==c&&console.warn(`WARN: A component changed from ${f?"controlled":"uncontrolled"} to ${c?"controlled":"uncontrolled"}.`),o.current=c;let I=l.useCallback((s,...h)=>{let g=(d,...$)=>{a&&(Object.is(u.current,d)||a(d,...$)),c||(u.current=d)};typeof s=="function"?(console.warn("We can not support a function callback. See Github Issues for details https://github.com/adobe/react-spectrum/issues/2320"),r(($,...C)=>{let m=s(c?u.current:$,...C);return g(m,...h),c?$:m})):(c||r(s),g(s,...h))},[c,a]);return c?u.current=t:t=n,[t,I]}function _(t,e=-1/0,a=1/0){return Math.min(Math.max(t,e),a)}class F{getStringForLocale(e,a){let n=this.strings[a];n||(n=k(a,this.strings,this.defaultLocale),this.strings[a]=n);let r=n[e];if(!r)throw new Error(`Could not find intl message ${e} in ${a} locale`);return r}constructor(e,a="en-US"){this.strings={...e},this.defaultLocale=a}}function k(t,e,a="en-US"){if(e[t])return e[t];let n=A(t);if(e[n])return e[n];for(let r in e)if(r.startsWith(n+"-"))return e[r];return e[a]}function A(t){return Intl.Locale?new Intl.Locale(t).language:t.split("-")[0]}const w=new Map,L=new Map;class E{format(e,a){let n=this.strings.getStringForLocale(e,this.locale);return typeof n=="function"?n(a,this):n}plural(e,a,n="cardinal"){let r=a["="+e];if(r)return typeof r=="function"?r():r;let o=this.locale+":"+n,f=w.get(o);f||(f=new Intl.PluralRules(this.locale,{type:n}),w.set(o,f));let c=f.select(e);return r=a[c]||a.other,typeof r=="function"?r():r}number(e){let a=L.get(this.locale);return a||(a=new Intl.NumberFormat(this.locale),L.set(this.locale,a)),a.format(e)}select(e,a){let n=e[a]||e.other;return typeof n=="function"?n():n}constructor(e,a){this.locale=e,this.strings=a}}const T=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),U=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function V(t){if(Intl.Locale){let a=new Intl.Locale(t).maximize().script;return T.has(a)}let e=t.split("-")[0];return U.has(e)}function y(){let t=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([t])}catch{t="en-US"}return{locale:t,direction:V(t)?"rtl":"ltr"}}let p=y(),i=new Set;function S(){p=y();for(let t of i)t(p)}function z(){let t=M(),[e,a]=l.useState(p);return l.useEffect(()=>(i.size===0&&window.addEventListener("languagechange",S),i.add(a),()=>{i.delete(a),i.size===0&&window.removeEventListener("languagechange",S)}),[]),t?{locale:"en-US",direction:"ltr"}:e}const N=v.createContext(null);function R(){let t=z();return l.useContext(N)||t}const x=new WeakMap;function W(t){let e=x.get(t);return e||(e=new F(t),x.set(t,e)),e}function q(t){let{locale:e}=R(),a=l.useMemo(()=>W(t),[t]);return l.useMemo(()=>new E(e,a),[e,a])}let b=new Map;function G(t){let{locale:e}=R(),a=e+(t?Object.entries(t).sort((r,o)=>r[0]<o[0]?-1:1).join():"");if(b.has(a))return b.get(a);let n=new Intl.Collator(e,t);return b.set(a,n),n}export{F as $,q as a,R as b,_ as c,G as d,O as e};
