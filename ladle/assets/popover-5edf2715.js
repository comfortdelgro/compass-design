import{s as v,R as L,r as f,a as T,j as R}from"./index-800efed3.js";import{u as x}from"./use-dom-ref-298c2dd3.js";const B=v("div",{display:"inline-block"}),O=v("div",{display:"block",position:"absolute",zIndex:"60","&.bottom-center":{transform:"translateX(-50%)"},"&.top-center":{transform:"translateX(-50%)"}}),S=10,j=L.forwardRef(($,E)=>{const{children:P,anchor:k,isOpen:u,offset:c=S,css:y={},direction:l="bottom-left",attachToElement:p,onClose:d=()=>null,...w}=$,[a,C]=f.useState({top:"0",right:"auto",bottom:"auto",left:"0"}),n=x(E),e=x(),m=r=>{n.current&&!n.current.contains(r.target)&&e.current&&!e.current.contains(r.target)&&d()};f.useEffect(()=>(document.addEventListener("mousedown",m),()=>{document.removeEventListener("mousedown",m)})),f.useEffect(()=>{if(e.current&&n.current)if(u){const r=p||document.body;h(),r.appendChild(e.current)}else e.current.parentElement&&e.current.parentElement.removeChild(e.current)},[u]),f.useEffect(()=>{e.current&&n.current&&h()},[e.current,n.current]);const h=()=>{if(n.current&&e.current){const r=p||document.body;r.style.position="relative";const t={...a},o=n.current.children[0]||n.current,i=o.offsetParent||r,s=n.current.getBoundingClientRect();switch(l){case"bottom-left":default:t.top=`${o.offsetTop+s.height+c}px`,t.left=`${o.offsetLeft}px`,t.bottom="auto",t.right="auto";break;case"bottom-center":t.top=`${o.offsetTop+s.height+c}px`,t.left=`${o.offsetLeft+s.width/2}px`,t.bottom="auto",t.right="auto";break;case"bottom-right":t.top=`${o.offsetTop+s.height+c}px`,t.left="auto",t.bottom="auto",t.right=`${i.clientWidth-o.offsetLeft-s.width}px`;break;case"top-left":t.top="auto",t.left=`${o.offsetLeft}px`,t.bottom=`${i.clientHeight-o.offsetTop+c}px`,t.right="auto";break;case"top-center":t.top="auto",t.left=`${o.offsetLeft+s.width/2}px`,t.bottom=`${i.clientHeight-o.offsetTop+c}px`,t.right="auto";break;case"top-right":t.top="auto",t.left="auto",t.bottom=`${i.clientHeight-o.offsetTop+c}px`,t.right=`${i.clientWidth-o.offsetLeft-s.width}px`;break}C(t)}},b=()=>{d()},g=f.useCallback(()=>{requestAnimationFrame(()=>{e.current&&!e.current.contains(document.activeElement)&&e.current&&!e.current.contains(document.activeElement)&&b()})},[n,b]);return T(B,{className:"cdg-popover",ref:n,css:y,...w,onBlur:g,tabIndex:0,children:[k,R(O,{ref:e,className:`cdg-popover-content ${l}`,style:{top:a.top,left:a.left,right:a.right,bottom:a.bottom},onBlur:g,tabIndex:0,children:P})]})}),W=j;export{W as P};
