import{$ as z,a as ee,e as le,f as ye,g as pe,h as De,i as we,j as Se,k as Q,l as ke,m as Me,n as Oe,o as ce,p as Fe}from"./import-a63e98a2.js";import{r as u,s as G,R as _,j as E,a as A}from"./index-6668e921.js";import{I as Re}from"./utils-fbf423a9.js";import{u as te}from"./use-dom-ref-8557f905.js";import{c as ve,h as Ee,j as Te,k as Ce,S as Ve,u as Ie,r as oe,f as Ne,l as ge,b as Be,d as Pe,m as H,n as je,o as Le,e as ue,p as Ke,M as U,i as We,q as Ae,s as Ze,t as Ge,a as qe,v as He,w as Ue,x as ze,y as _e}from"./useCalendarState-b290a66b.js";import{u as de,a as fe}from"./useEvent-91490201.js";import{$ as Ye}from"./clsx.m-30223e4c.js";import{$ as Je,a as Qe,b as Xe,c as me}from"./import-897563d4.js";function et(e,t,r){const{direction:n}=z(),i=u.useMemo(()=>ve(t),[t]),c=s=>{if(s.altKey&&(s.key==="ArrowDown"||s.key==="ArrowUp")&&"setOpen"in e&&(s.preventDefault(),s.stopPropagation(),e.setOpen(!0)),!r)switch(s.key){case"ArrowLeft":s.preventDefault(),s.stopPropagation(),n==="rtl"?i.focusNext():i.focusPrevious();break;case"ArrowRight":s.preventDefault(),s.stopPropagation(),n==="rtl"?i.focusPrevious():i.focusNext();break}},b=()=>{var D;let s=(D=window.event)==null?void 0:D.target;const d=Te(t.current,{tabbable:!0});if(s&&(d.currentNode=s,s=d.previousNode()),!s){let P;do P=d.lastChild(),P&&(s=P);while(P)}for(;s!=null&&s.hasAttribute("data-placeholder");){const P=d.previousNode();if(P&&P.hasAttribute("data-placeholder"))s=P;else break}s&&s.focus()},{pressProps:v}=Ee({preventFocusOnPress:!0,allowTextSelectionOnPress:!0,onPressStart(s){s.pointerType==="mouse"&&b()},onPress(s){s.pointerType!=="mouse"&&b()}});return{...v,onKeyDown:c}}function tt(e){const{description:t,errorMessage:r,validationState:n}=e;let{labelProps:i,fieldProps:c}=Ce(e);const b=de([!!t,!!r,n]),v=de([!!t,!!r,n]);return c={...c,"aria-describedby":[b,v,e["aria-describedby"]].filter(Boolean).join(" ")||void 0},{labelProps:i,fieldProps:c,descriptionProps:{id:b},errorMessageProps:{id:v}}}function rt(e){const t=u.useRef({isFocused:!1,onBlur:e,observer:null});return t.current.onBlur=e,u.useLayoutEffect(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]),u.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;const n=r.target,i=c=>{var b,v;t.current.isFocused=!1,n.disabled&&((v=(b=t.current).onBlur)==null||v.call(b,new Ve("blur",c))),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};n.addEventListener("focusout",i,{once:!0}),t.current.observer=new MutationObserver(()=>{var c;t.current.isFocused&&n.disabled&&((c=t.current.observer)==null||c.disconnect(),n.dispatchEvent(new FocusEvent("blur")),n.dispatchEvent(new FocusEvent("focusout",{bubbles:!0})))}),t.current.observer.observe(n,{attributes:!0,attributeFilter:["disabled"]})}},[])}function nt(e){const{isDisabled:t,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:i}=e,c=u.useRef({isFocusWithin:!1}),b=u.useCallback(d=>{c.current.isFocusWithin&&!d.currentTarget.contains(d.relatedTarget)&&(c.current.isFocusWithin=!1,r&&r(d),i&&i(!1))},[r,i,c]),v=rt(b),s=u.useCallback(d=>{!c.current.isFocusWithin&&document.activeElement===d.target&&(n&&n(d),i&&i(!0),c.current.isFocusWithin=!0,v(d))},[n,i,v]);return t?{focusWithinProps:{onFocus:null,onBlur:null}}:{focusWithinProps:{onFocus:s,onBlur:b}}}function at(e,t,r){const{labelProps:n,fieldProps:i,descriptionProps:c,errorMessageProps:b}=tt({...e,labelElementType:"span"}),{focusWithinProps:v}=nt({...e,onBlurWithin:p=>{t.confirmPlaceholder(),e.onBlur&&e.onBlur(p)},onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange}),s=t.maxGranularity==="hour"?"selectedTimeDescription":"selectedDateDescription",d=t.value?s:"",D=Ie(d),P=e[oe]==="presentation"?i["aria-describedby"]:[D["aria-describedby"],i["aria-describedby"]].filter(Boolean).join(" ")||void 0,h=e[Ne],R=u.useMemo(()=>h||ve(r),[h,r]),m=et(t,r,e[oe]==="presentation");ge.set(t,{ariaLabel:"",ariaLabelledBy:[e["aria-labelledby"],n.id].filter(Boolean).join(" ")||"",focusManager:R});const $=u.useRef(e.autoFocus);let w;e[oe]==="presentation"?w={role:"presentation"}:w={...i,role:"group","aria-disabled":e.isDisabled||void 0,"aria-describedby":P},u.useEffect(()=>{$.current&&R.focusFirst(),$.current=!1},[R]);const T=Be(e);return{labelProps:{...n,onClick:()=>{R.focusFirst()}},fieldProps:{...T,...w,...m,...v,onKeyDown(p){e.onKeyDown&&e.onKeyDown(p)},onKeyUp(p){e.onKeyUp&&e.onKeyUp(p)}},descriptionProps:c,errorMessageProps:b}}function ot(e,t){const r=u.useRef(e);e&&(r.current=e),e=r.current;const{locale:n}=z(),i=u.useMemo(()=>new ee(n),[n]),c=u.useMemo(()=>i.resolvedOptions(),[i]),b=e&&"timeZone"in e?e.timeZone:c.timeZone;if(t=t||(e&&"minute"in e?"minute":"day"),e&&!(t in e))throw new Error("Invalid granularity "+t+" for value "+e.toString());return[t,b]}const X={year:!0,month:!0,day:!0,hour:!0,minute:!0,second:!0,dayPeriod:!0,era:!0},be={year:5,month:2,day:7,hour:2,minute:15,second:15},it={dayperiod:"dayPeriod"};function lt(e){const{locale:t,createCalendar:r,hideTimeZone:n,isDisabled:i,isReadOnly:c,isRequired:b}=e,v=e.value||e.defaultValue||e.placeholderValue,[s,d]=ot(v,e.granularity),D=d||"UTC";if(v&&!(s in v))throw new Error("Invalid granularity "+s+" for value "+v.toString());const P=u.useMemo(()=>new ee(t),[t]),h=u.useMemo(()=>r(P.resolvedOptions().calendar),[r,P]),R=a=>{e.onChange&&(a!=null&&a.year&&a.year<U?e.onChange(null):e.onChange(a))},[m,$]=Pe(e.value,e.defaultValue,R),w=u.useRef(m);u.useEffect(()=>{w.current!==m&&(m===null&&Object.keys(f).length===Object.keys(S).length&&B===void 0&&(f={},o(f),O(H(e.placeholderValue,s,h,d)),C(void 0)),w.current=m)},[m]);const T=u.useMemo(()=>je(m,h),[m,h]),[p,O]=u.useState(()=>H(e.placeholderValue,s,h,d)),I=T||p,L=h.identifier==="gregory"&&(I==null?void 0:I.era)==="BC",N=u.useMemo(()=>({granularity:s,maxGranularity:e.maxGranularity??"year",timeZone:d,hideTimeZone:n,hourCycle:e.hourCycle,showEra:L}),[e.maxGranularity,s,e.hourCycle,d,n,L]),[B,C]=u.useState(void 0),{isReset:K,setIsReset:g}=Le(),re=()=>{$(null),f={},o(f),C(void 0)};u.useEffect(()=>{K===!0&&(re(),g==null||g(!1))},[K]);const Y=u.useMemo(()=>ue({},N),[N]),j=u.useMemo(()=>new ee(t,Y),[t,Y]),V=u.useMemo(()=>j.resolvedOptions(),[j]),S=u.useMemo(()=>j.formatToParts(new Date).filter(a=>X[a.type]).reduce((a,x)=>(a[x.type]=!0,a),{}),[j]);let[f,o]=u.useState(()=>e.value||e.defaultValue?{...S}:{});const y=u.useRef(h.identifier);u.useEffect(()=>{h.identifier!==y.current&&(y.current=h.identifier,O(a=>Object.keys(f).length>0?le(a,h):H(e.placeholderValue,s,h,d)))},[h,s,f,d,e.placeholderValue]),m&&Object.keys(f).length<Object.keys(S).length&&(f={...S},o(f)),m==null&&Object.keys(f).length===Object.keys(S).length&&B===!1&&!K&&(f={},o(f),O(H(e.placeholderValue,s,h,d)),C(void 0));let l=T&&Object.keys(f).length>=Object.keys(S).length?T:p,k=a=>{e.isDisabled||e.isReadOnly||(Object.keys(f).length>=Object.keys(S).length&&(a=le(a,(v==null?void 0:v.calendar)||new we),$(a)),O(a))};const M=u.useMemo(()=>l==null?void 0:l.toDate(D),[l,D]);let Z=u.useMemo(()=>j.formatToParts(M).map(a=>{let x=X[a.type];a.type==="era"&&h.getEras().length===1&&(x=!1);let F=X[a.type]&&!f[a.type],q=X[a.type]?Ke(a.type,a.value):null;return a.type==="year"&&(F=B?!1:F),{type:it[a.type]||a.type,text:F?q:a.value,...st(l,a.type,V),isPlaceholder:F,placeholder:q,isEditable:x}}),[M,f,j,V,l,h,t]);S.era&&f.year&&!f.era?(f.era=!0,o({...f})):!S.era&&f.era&&(delete f.era,o({...f}));const J=a=>{f[a]=!0,a==="year"&&S.era&&(f.era=!0),o({...f})},ne=a=>{f[a]=!1,o({...f})},W=(a,x)=>{f[a]?k(ct(l,a,x,V)):(J(a),Object.keys(f).length>=Object.keys(S).length&&k(l))};function ae(){const a=Object.values(f),x=Object.values(S);return m||a.length===0?!0:a.length!==x.length?!1:!!(a.every(F=>!F)&&!b||a.every(F=>F))}const $e=(()=>e.validationState||(We(T,e.minValue,e.maxValue)||null)||!m&&(p!=null&&p.year)&&p.year<U&&B!==void 0||!ae()?"invalid":"valid")();return{value:T,dateValue:M,calendar:h,setValue:k,segments:Z,dateFormatter:j,validationState:$e,granularity:s,maxGranularity:e.maxGranularity??"year",isDisabled:!!i,isReadOnly:!!c,isRequired:!!b,increment(a){W(a,1)},decrement(a){W(a,-1)},incrementPage(a){W(a,be[a]||1)},decrementPage(a){W(a,-(be[a]||1))},setSegment(a,x){a==="year"&&x<U?(ne(a),C(!0),O(new ye(x,(l==null?void 0:l.month)??0,(l==null?void 0:l.day)??0))):(a==="year"&&x>=U&&C(!1),J(a)),k(ut(l,a,parseInt(x),V))},confirmPlaceholder(){if(e.isDisabled||e.isReadOnly)return;let a=Object.keys(f),x=Object.keys(S);a.length===x.length-1&&S.dayPeriod&&!f.dayPeriod&&(f={...S},o(f),k(l==null?void 0:l.copy()))},clearSegment(a){a==="year"&&C(void 0),delete f[a],o({...f});let x=H(e.placeholderValue,s,h,d),F=l;if(a==="dayPeriod"&&"hour"in l&&"hour"in x){let q=l.hour>=12,se=x.hour>=12;q&&!se?F=l.set({hour:l.hour-12}):!q&&se&&(F=l.set({hour:l.hour+12}))}else a in l&&(F=l==null?void 0:l.set({[a]:x==null?void 0:x[a]}));$(null),k(F)},formatValue(a){if(!T)return"";const x=ue(a,N);return new ee(t,x).format(M)}}}function st(e,t,r){switch(t){case"era":{let n=e.calendar.getEras();return{value:n.indexOf(e.era),minValue:0,maxValue:n.length-1}}case"year":return{value:e.year,minValue:U,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,minValue:De(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:pe(e),maxValue:e.calendar.getDaysInMonth(e)}}if("hour"in e)switch(t){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12};case"hour":if(r.hour12){let n=e.hour>=12;return{value:e.hour,minValue:n?12:0,maxValue:n?23:11}}return{value:e.hour,minValue:0,maxValue:23};case"minute":return{value:e.minute,minValue:0,maxValue:59};case"second":return{value:e.second,minValue:0,maxValue:59}}return{}}function ct(e,t,r,n){switch(t){case"era":case"year":case"month":case"day":return e.cycle(t,r,{round:t==="year"})}if("hour"in e)switch(t){case"dayPeriod":{let i=e.hour,c=i>=12;return e.set({hour:c?i-12:i+12})}case"hour":case"minute":case"second":return e.cycle(t,r,{round:t!=="hour",hourCycle:n.hour12?12:24})}}function ut(e,t,r,n){switch(t){case"day":case"month":case"year":case"era":return e.set({[t]:r})}if("hour"in e)switch(t){case"dayPeriod":{let i=e.hour,c=i>=12;return r>=12===c?e:e.set({hour:c?i-12:i+12})}case"hour":if(n.hour12){let c=e.hour>=12;!c&&r===12&&(r=0),c&&r<12&&(r+=12)}case"minute":case"second":return e.set({[t]:r})}}const xe=G("div",{color:"$gray50",fontSize:"$body3",fontWeight:"$semibold",textTransform:"uppercase",letterSpacing:"1px","&:focus-visible":{padding:"$0_5 0",outline:"none",color:"$whiteText !important",backgroundColor:"$cdgBlue"},"&.number":{color:"$black"}}),dt=G("div",{display:"flex",flexDirection:"column",justifyContent:"flex-end","& .date-field-label":{fontSize:"$label1",fontWeight:"$semibold",marginBottom:"$2",display:"inline-block",width:"100%",span:{marginLeft:"$1",color:"$danger"}},"& .date-field-input":{minWidth:"$49",height:"$11",display:"flex",alignItems:"center",padding:"0 0 0 $4",backgroundColor:"$background",border:"1px solid $gray30",borderRadius:"$md"},"& .date-field-input.mobile:active":{backgroundColor:"$gray60"},"& .toggle-calendar-button":{marginLeft:"auto"},"& .toggle-calendar-button .toggle-calendar-icon":{width:"$3",height:"$3"},variants:{isDisabled:{true:{"& .date-field-input":{backgroundColor:"$gray20",cursor:"not-allowed !important","*":{color:"$disabledText",cursor:"not-allowed !important"}},[`& ${xe}`]:{color:"$disabledText"}}},isInvalid:{true:{"& .date-field-input":{borderColor:"$danger"}}}}}),ie=G("span",{variants:{isError:{true:{color:"$danger"}},isText:{true:{fontSize:"$label2"}}}}),ft=G("button",{border:"none",margin:"0",width:"auto",overflow:"visible",background:"transparent",color:"inherit",font:"inherit",lineHeight:"normal",WebkitFontSmoothing:"inherit",MozOsxFontSmoothing:"inherit",WebkitAppearance:"none",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:"$2 $4","&:focus-visible":{outline:"2px solid $cdgBlue80",borderRadius:"2px"}}),he=G("div",{fontSize:"$label2",fontWeight:"$medium",transition:"$default",marginTop:"$1",color:"$gray70",variants:{error:{true:{color:"$danger"}}}});function mt(){const{locale:e}=z();return u.useMemo(()=>{try{return new Intl.DisplayNames(e,{type:"dateTimeField"})}catch{return new bt(e)}},[e])}class bt{constructor(t){this.locale=t,this.dictionary=new Se(Ae)}of(t){return this.dictionary.getStringForLocale(t,this.locale)}}function ht(e){const t=u.useRef();let{value:r,textValue:n,minValue:i,maxValue:c,isDisabled:b,isReadOnly:v,isRequired:s,onIncrement:d,onIncrementPage:D,onDecrement:P,onDecrementPage:h,onDecrementToMin:R,onIncrementToMax:m}=e;const $=u.useRef(e);$.current=e;const w=()=>clearTimeout(t.current);u.useEffect(()=>()=>w(),[]);let T=g=>{if(!(g.ctrlKey||g.metaKey||g.shiftKey||g.altKey||v)){switch(g.key){case"PageUp":if(D){g.preventDefault(),D();break}break;case"ArrowUp":case"Up":d&&(g.preventDefault(),d());break;case"PageDown":if(h){g.preventDefault(),h();break}break;case"ArrowDown":case"Down":P&&(g.preventDefault(),P());break;case"Home":R&&(g.preventDefault(),R());break;case"End":m&&(g.preventDefault(),m());break}return null}},p=u.useRef(!1),O=()=>{p.current=!0},I=()=>{p.current=!1};n=n===""?"Empty":(n||`${r}`).replace("-","−");const L=u.useCallback(g=>{w(),$.current.onIncrement(),t.current=window.setTimeout(()=>{(isNaN(c)||isNaN(r)||r<c)&&L(60)},g)},[d,c,r]),N=u.useCallback(g=>{w(),$.current.onDecrement(),t.current=window.setTimeout(()=>{(isNaN(i)||isNaN(r)||r>i)&&N(60)},g)},[P,i,r]);let B=g=>{g.preventDefault()},{addGlobalListener:C,removeAllGlobalListeners:K}=Ze();return{spinButtonProps:{role:"spinbutton","aria-valuenow":isNaN(r)?null:r,"aria-valuetext":n,"aria-valuemin":i,"aria-valuemax":c,"aria-disabled":b||null,"aria-readonly":v||null,"aria-required":s||null,onKeyDown:T,onFocus:O,onBlur:I},incrementButtonProps:{onPressStart:()=>{L(400),C(window,"contextmenu",B)},onPressEnd:()=>{w(),K()},onFocus:O,onBlur:I},decrementButtonProps:{onPressStart:()=>{N(400),C(window,"contextmenu",B)},onPressEnd:()=>{w(),K()},onFocus:O,onBlur:I}}}function yt(e,t,r){const n=u.useRef(""),{locale:i}=z(),c=mt();let{ariaLabel:b,ariaLabelledBy:v,ariaDescribedBy:s,focusManager:d}=ge.get(t),D=e.isPlaceholder?"":e.text;const P=u.useMemo(()=>t.dateFormatter.resolvedOptions(),[t.dateFormatter]),h=Q({month:"long",timeZone:P.timeZone}),R=Q({hour:"numeric",hour12:P.hour12,timeZone:P.timeZone});if(e.type==="month"&&!e.isPlaceholder){const o=h.format(t.dateValue);D=o!==D?`${D} – ${o}`:o}else e.type==="hour"&&!e.isPlaceholder&&(D=R.format(t.dateValue));const{spinButtonProps:m}=ht({value:e.value,textValue:D,minValue:e.minValue,maxValue:e.maxValue,isDisabled:!!t.isDisabled,isReadOnly:t.isReadOnly||!e.isEditable,isRequired:!!t.isRequired,onIncrement:()=>{n.current="",t.increment(e.type)},onDecrement:()=>{n.current="",t.decrement(e.type)},onIncrementPage:()=>{n.current="",t.incrementPage(e.type)},onDecrementPage:()=>{n.current="",t.decrementPage(e.type)},onIncrementToMax:()=>{n.current="",t.setSegment(e.type,e.maxValue)},onDecrementToMin:()=>{n.current="",t.setSegment(e.type,e.minValue)}}),$=u.useMemo(()=>new Ye(i,{maximumFractionDigits:0}),[i]),w=()=>{if($.isValidPartialNumber(e.text)&&!t.isReadOnly&&!e.isPlaceholder){const o="";t.clearSegment(e.type),n.current=o}else e.type==="dayPeriod"&&t.clearSegment(e.type)},T=o=>{var y;if(o.key==="a"&&(Ue()?o.metaKey:o.ctrlKey)&&o.preventDefault(),!(o.ctrlKey||o.metaKey||o.shiftKey||o.altKey))switch(o.key){case"Backspace":case"Delete":{o.preventDefault(),o.stopPropagation(),w();break}default:{(y=m.onKeyDown)==null||y.call(m,o);break}}},{startsWith:p}=ke({sensitivity:"base"}),O=Q({hour:"numeric",hour12:!0}),I=u.useMemo(()=>{var y;const o=new Date;return o.setHours(0),(y=O.formatToParts(o).find(l=>l.type==="dayPeriod"))==null?void 0:y.value},[O]),L=u.useMemo(()=>{var y;const o=new Date;return o.setHours(12),(y=O.formatToParts(o).find(l=>l.type==="dayPeriod"))==null?void 0:y.value},[O]),N=Q({year:"numeric",era:"narrow",timeZone:"UTC"}),B=u.useMemo(()=>{var k;if(e.type!=="era")return[];const o=le(new ye(1,1,1),t.calendar),y=t.calendar.getEras().map(M=>{var W;const Z=o.set({year:1,month:1,day:1,era:M}).toDate("UTC"),ne=(W=N.formatToParts(Z).find(ae=>ae.type==="era"))==null?void 0:W.value;return{era:M,formatted:ne}}),l=vt(y.map(M=>M.formatted));if(l)for(const M of y)M.formatted=(k=M.formatted)==null?void 0:k.slice(l);return y},[N,t.calendar,e.type]),C=o=>{if(t.isDisabled||t.isReadOnly)return;const y=n.current+o;switch(e.type){case"dayPeriod":if(p(I,o))t.setSegment("dayPeriod",0);else if(p(L,o))t.setSegment("dayPeriod",12);else break;d.focusNext();break;case"era":{const l=B.find(k=>p(k.formatted,o));l&&(t.setSegment("era",l.era),d.focusNext());break}case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!$.isValidPartialNumber(y))return;let l=$.parse(y),k=l,M=e.minValue===0;if(e.type==="hour"&&t.dateFormatter.resolvedOptions().hour12){switch(t.dateFormatter.resolvedOptions().hourCycle){case"h11":l>11&&(k=$.parse(o));break;case"h12":M=!1,l>12&&(k=$.parse(o));break}e.value>=12&&l>1&&(l+=12)}else l>e.maxValue&&(k=$.parse(o));if(isNaN(l))return;const Z=k!==0||M;Z&&t.setSegment(e.type,k),+(l+"0")>e.maxValue||y.length>=String(e.maxValue).length?(n.current="",Z&&(d==null||d.focusNext())):n.current=y;break}}},K=()=>{n.current="",ze(r.current,{containingElement:_e(r.current)});const o=window.getSelection();o==null||o.collapse(r.current)},g=u.useRef("");fe(r,"beforeinput",o=>{var y,l;switch(o.preventDefault(),o.inputType){case"deleteContentBackward":case"deleteContentForward":$.isValidPartialNumber(e.text)&&!t.isReadOnly&&w();break;case"insertCompositionText":g.current=(y=r.current)==null?void 0:y.textContent,r.current.textContent=(l=r.current)==null?void 0:l.textContent;break;default:o.data!=null&&C(o.data);break}}),fe(r,"input",o=>{const{inputType:y,data:l}=o;switch(y){case"insertCompositionText":r.current.textContent=g.current,(p(I,l)||p(L,l))&&C(l);break}}),u.useLayoutEffect(()=>{const o=r.current;return()=>{document.activeElement===o&&(d.focusPrevious()||d.focusNext())}},[r,d]);const re=Ge()||e.type==="timeZoneName"?{role:"textbox","aria-valuemax":null,"aria-valuemin":null,"aria-valuetext":null,"aria-valuenow":null}:{},Y=u.useMemo(()=>{var o;return(o=t==null?void 0:t.segments)==null?void 0:o.find(y=>y.isEditable)},[t.segments]);e!==Y&&t.validationState!=="invalid"&&(s="");const j=qe(),V=!t.isDisabled&&!t.isReadOnly&&e.isEditable,S=e.type==="literal"?"":c.of(e.type),f=He({"aria-label":(b?b+" ":"")+S,"aria-labelledby":v});return e.type==="literal"?{segmentProps:{"aria-hidden":!0}}:{segmentProps:{...m,...f,id:j,...re,"aria-invalid":t.validationState==="invalid"?"true":void 0,"aria-describedby":s,"aria-readonly":t.isReadOnly||!e.isEditable?"true":void 0,"data-placeholder":e.isPlaceholder||void 0,contentEditable:V,suppressContentEditableWarning:V,spellCheck:V?"false":void 0,autoCapitalize:V?"off":void 0,autoCorrect:V?"off":void 0,[parseInt(_.version,10)>=17?"enterKeyHint":"enterkeyhint"]:V?"next":void 0,inputMode:t.isDisabled||e.type==="dayPeriod"||e.type==="era"||!V?void 0:"numeric",tabIndex:t.isDisabled?void 0:0,onKeyDown:T,onFocus:K,style:{caretColor:"transparent"},onPointerDown(o){o.stopPropagation()},onMouseDown(o){o.stopPropagation()}}}}function vt(e){e.sort();const t=e[0],r=e[e.length-1];for(let n=0;n<t.length;n++)if(t[n]!==r[n])return n;return 0}const gt=_.forwardRef((e,t)=>{const{segment:r,state:n}=e,i=te(t),{segmentProps:c}=yt(r,n,i);return E(xe,{...c,ref:i,className:`segment ${r.isPlaceholder?"placeholder":"number"}`,children:r.text})}),Pt=gt,xt=_.forwardRef((e,t)=>{const{locale:r}=z(),n=u.useRef(null),i=lt({...e,isReadOnly:e.isReadOnly?!0:!!e.isMobile,locale:r,createCalendar:Me}),c=te(t),{labelProps:b,fieldProps:v}=at({...e,isReadOnly:e.isReadOnly?!0:!!e.isMobile},i,c),s=e.isDisabled??!1,d=e.isReadOnly??!1,D=!!e.isInvalid||i.validationState==="invalid",P=()=>{const m=e.necessityIndicator??"icon";return e.isRequired&&m==="icon"?E(ie,{isError:!0,children:"*"}):e.isRequired&&m==="label"?E(ie,{isError:!0,isText:!0,children:"(required)"}):!e.isRequired&&m==="label"?E(ie,{isText:!0,children:"(optional)"}):""},{onPress:h,...R}=e.buttonProps;return A("div",{children:[A(dt,{className:"cdg-date-field",isDisabled:s,isInvalid:D,children:[typeof e.label=="string"?A("span",{...b,className:"date-field-label",children:[e.label," ",P()]}):e.label,A("div",{...v,ref:c,className:`date-field-input ${s||d?"":e.isMobile?"mobile":""}`,onClick:()=>{var m;s||d||e.isMobile&&((m=n.current)==null||m.click())},children:[i.segments.map((m,$)=>{var w;return m.type==="literal"&&(m.isPlaceholder=((w=i.segments[$-1])==null?void 0:w.isPlaceholder)??!1),E(Pt,{segment:m,state:i},$)}),E(ft,{...R,ref:n,onClick:m=>{h==null||h(m)},type:"button",disabled:s||d,className:"toggle-calendar-button",children:E(Re,{})})]})]}),e.isInvalid&&e.errorMessage&&E(he,{className:"cdg-date-field-error",error:!0,children:e.errorMessage}),e.helperText?E(he,{className:"cdg-date-field-helper",children:e.helperText}):null]})}),Vt=xt;function $t(e,t){let{role:r="dialog"}=e,n=Oe();n=e["aria-label"]?void 0:n;let i=u.useRef(!1);return u.useEffect(()=>{if(t.current&&!t.current.contains(document.activeElement)){ce(t.current);let c=setTimeout(()=>{document.activeElement===t.current&&(i.current=!0,t.current.blur(),ce(t.current),i.current=!1)},500);return()=>{clearTimeout(c)}}},[t]),Je(),{dialogProps:{...Fe(e,{labelable:!0}),role:r,tabIndex:-1,"aria-labelledby":e["aria-labelledby"]||n,onBlur:c=>{i.current&&c.stopPropagation()}},titleProps:{id:n}}}const pt=G("div",{}),Dt=_.forwardRef((e,t)=>{const{children:r,title:n}=e,i=te(t),{dialogProps:c,titleProps:b}=$t(e,i);return A(pt,{...c,ref:i,children:[n&&E("h3",{...b,style:{marginTop:0},children:n}),r]})}),It=Dt,wt=_.forwardRef((e,t)=>{const{children:r,state:n}=e,i=te(t),{popoverProps:c,underlayProps:b}=Qe({...e,popoverRef:i},n);return A(Xe,{children:[E("div",{...b}),A("div",{...c,ref:i,style:{...c.style},children:[E(me,{onDismiss:n.close}),r,E(me,{onDismiss:n.close})]})]})}),Nt=wt;function Bt(e){const[t,r]=Pe(e.isOpen,e.defaultOpen||!1,e.onOpenChange);return{isOpen:t,setOpen:r,open(){r(!0)},close(){r(!1)},toggle(){r(!t)}}}export{Vt as D,Nt as P,et as a,nt as b,Bt as c,ot as d,It as e,tt as u};
