import{s as v,r as n,R as y,j as r,a as D}from"./index-2a78b4a6.js";import{u as R}from"./use-dom-ref-60270c2c.js";import{C as _}from"./components-517b8e34.js";const H=v("input",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",padding:"0px",lineHeight:"1em",width:"3rem !important",height:"3rem",margin:"0",fontSize:"2rem",textAlign:"center",borderRadius:"10px",border:"1px solid rgba(0, 0, 0, 0.2)","&:disabled":{cursor:"not-allowed"}}),L=v("div",{appearance:"none",border:"none",backgroundColor:"transparent",boxSizing:"border-box",padding:"0px",lineHeight:"1em",margin:"5% auto",display:"flex",gap:"2rem","@media screen and (max-width: 640px)":{gap:"1rem",input:{width:"2.5rem !important",height:"2.5rem",fontSize:"1.8rem",borderRadius:"6px"}}});function B(a){const l=n.useRef();return n.useEffect(()=>{l.current=a},[a]),l.current}const K=y.forwardRef((a,l)=>{const{css:b={},focus:o,autoFocus:i,...O}=a,c=R(l),p=B(!!o);return n.useLayoutEffect(()=>{c.current&&(o&&i&&c.current.focus(),o&&i&&o!==p&&(c.current.focus(),c.current.select()))},[i,o,p]),r(H,{ref:c,css:b,...O})}),$=n.memo(K),q=$,G=y.forwardRef((a,l)=>{const{css:b={},length:o,isNumberInput:i,autoFocus:O,disabled:c,onChangeOTP:p,...F}=a,N=R(l),[s,C]=n.useState(0),[u,k]=n.useState(Array(o).fill("")),x=n.useCallback(t=>{const e=t.join("");p(e)},[p]),f=n.useCallback(t=>{const e=t;return i?!e||/\d/.test(e)?e:"":e},[i]),h=n.useCallback(t=>{const e=[...u];e[s]=t[0]||"",k(e),x(e)},[s,x,u]),d=n.useCallback(t=>{const e=Math.max(Math.min(o-1,t),0);C(e)},[o]),P=n.useCallback(()=>{d(s-1)},[s,d]),m=n.useCallback(()=>{d(s+1)},[s,d]),V=n.useCallback(t=>()=>{d(t)},[d]),A=n.useCallback(t=>{const e=f(t.currentTarget.value);if(!e){t.preventDefault();return}h(e),m()},[h,m,f]),E=n.useCallback(()=>{C(-1)},[]),M=n.useCallback(t=>{switch(t.key){case"Backspace":case"Delete":{t.preventDefault(),u[s]?h(""):P();break}case"ArrowLeft":{t.preventDefault(),P();break}case"ArrowRight":{t.preventDefault(),m();break}case" ":{t.preventDefault();break}}},[s,h,m,P,u]),j=n.useCallback(t=>{t.preventDefault();const e=t.clipboardData.getData("text/plain").trim().slice(0,o-s).split("");if(e){let w=0;const I=[...u];I.forEach((z,T)=>{if(T>=s){const S=f(e.shift()||z);S&&(I[T]=S,w=T)}}),k(I),C(Math.min(w+1,o-1))}},[s,f,o,u]);return r(L,{css:b,ref:N,...F,children:Array(o).fill("").map((t,e)=>r(q,{focus:s===e,autoFocus:O,value:u&&u[e],onFocus:V(e),onChange:A,onKeyDown:M,onBlur:E,onPaste:j,disabled:c},`SingleInput-${e}`))})}),J=n.memo(G),g=J;g.displayName="OTPInput";const X=()=>D(_,{children:[r("h2",{children:"Number OTP"}),r(g,{length:4,isNumberInput:!0,autoFocus:!0,onChangeOTP:a=>console.log("Number OTP: ",a)}),r("h2",{children:"6 Numbers"}),r(g,{length:6,isNumberInput:!0,autoFocus:!0,onChangeOTP:a=>console.log("Number OTP: ",a)}),r("h2",{children:"String OTP"}),r(g,{autoFocus:!0,length:4,onChangeOTP:a=>console.log("String OTP: ",a)}),r("h2",{children:"Disabled"}),r(g,{autoFocus:!0,disabled:!0,length:4,onChangeOTP:a=>console.log("String OTP: ",a)})]}),Y={decorators:[a=>D("div",{children:[r("style",{dangerouslySetInnerHTML:{__html:".ladle-main { background: #eee; }"}}),r(a,{})]})]};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{X as Variants,Y as default};
