import{i as O,j as z,k as W,l as q,m as J,n as Q}from"./index-51945386.js";import{s as x,a as l,j as t,R as D,r as g,F as k}from"./index-97da7f36.js";import{u as U,g as X,a as Y,b as Z,c as _,d as ee,S as te,e as oe,D as N,f as ae,h as re,i as ne,j as se,N as le,k as T,l as A,m as ie,n as ce}from"./data-grid.styles-2b99d6f7.js";import{p as F}from"./pick-child-032c55d9.js";import{u as de}from"./use-dom-ref-68d2b852.js";import"./index-663ce70e.js";import{a as R}from"./index-ae626b01.js";import"./index-28756381.js";import"./index-e527d694.js";import{F as C}from"./index.es-ba9afe60.js";import{P as ge}from"./pagination-dca6b53e.js";import{S as me}from"./searchfield-78c496c3.js";import{B as h}from"./button-693d3af5.js";import"./create-safe-context-20bd2b88.js";import"./checkbox.styles-f096e3cf.js";import"./useCurrentTheme-27907523.js";const he=x("div",{width:"200px",height:"20px",backgroundColor:"$secondaryBg",borderRadius:"10px",position:"relative"}),ue=x("div",{height:"100%",borderRadius:"10px",transition:"width 0.5s ease-in-out","&.low":{backgroundColor:"$danger"},"&.average":{backgroundColor:"$warning"},"&.high":{backgroundColor:"$success"}}),pe=x("span",{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"$primaryText"}),fe=({progress:o})=>{let a="";return o>=0&&o<=30?a="low":o>=30&&o<=60?a="average":a="high",l(he,{className:"progress-bar",children:[t(ue,{className:`progress ${a}`,css:{width:`${o}%`}}),t(pe,{className:"progress-label",children:`${o}%`})]})},B=fe,we=D.forwardRef((o,a)=>{var P;const[r,i]=g.useState([]),[s,u]=g.useState({}),[p,e]=D.useState([]),{css:$={},data:j,columns:E,options:f,onManualSorting:w,onChangeRowSelection:S,onUpdateData:b,children:V,...H}=o,{child:M,rest:L}=F(V,T),{child:G}=F(L,A),K=de(a),m=U({state:{grouping:p,rowSelection:s,sorting:f.initialSortBy?f.initialSortBy:r},onGroupingChange:e,getExpandedRowModel:X(),getGroupedRowModel:Y(),onSortingChange:i,getCoreRowModel:Z(),getSortedRowModel:_(),getFilteredRowModel:ee(),onRowSelectionChange:u,debugTable:!0,data:j,columns:E,isMultiSortEvent:()=>!0,...f});g.useEffect(()=>{const d=m.getSelectedRowModel().rows.map(y=>y.original);S==null||S(d)},[s]),g.useEffect(()=>{w==null||w(r)},[r]);const v=m.getRowModel().rows??[];return l(te,{css:$,children:[M&&t(k,{children:M}),t(oe,{...H,children:l("table",{ref:K,children:[t(N,{as:"thead",children:m.getHeaderGroups().map(c=>t(ae,{children:c.headers.map(d=>t(re,{headerProps:d,tableOption:m},d.id))},c.id))}),t(N,{as:"tbody",children:v.length?v.map(c=>t(ne,{isSelected:c.getIsSelected(),children:c.getVisibleCells().map(d=>t(se,{cell:d,row:c,onChangeCell:y=>b==null?void 0:b(y)},d.id))},c.id)):t(le,{colSpan:(P=m.getAllLeafColumns())==null?void 0:P.length})})]})}),G&&t(k,{children:G})]})}),n=we;n.Toolbar=T;n.Footer=A;n.Checkbox=ie;n.CheckboxCell=ce;n.ProgressPercentage=B;n.Toolbar.displayName="ToolBar";n.Footer.displayName="Footer";n.ProgressPercentage.displayName="ProgressPercentage";n.displayName="DataGrid";const Se=({status:o})=>l("div",{children:[t("span",{style:{paddingRight:"5px"},children:(()=>{switch(o){case"relationship":return t(C,{icon:W});case"complicated":return t(C,{icon:z});case"single":return t(C,{icon:O});default:return null}})()}),t("span",{children:o})]}),be=Se,ye=o=>{const a=[];for(let r=0;r<o;r++)a.push(r);return a},I=o=>{let a="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=r.length;for(let s=0;s<o;s++)a+=r.charAt(Math.floor(Math.random()*i));return a},Re=(o,a)=>{const r=o.getTime(),i=a.getTime(),s=Math.floor(Math.random()*(i-r+1)+r);return new Date(s)},Ce=()=>({firstName:I(5),lastName:I(5),age:Math.floor(Math.random()*40),visits:Math.floor(Math.random()*1e3),progress:Math.floor(Math.random()*100),createdAt:Re(new Date(2020,0,1),new Date(2029,11,31)),status:["relationship","complicated","single"][Math.floor(Math.random()*["relationship","complicated","single"].length)]});function De(...o){const a=(r=0)=>{const i=o[r];return ye(i).map(s=>({...Ce(),subRows:o[r+1]?a(r+1):null}))};return a()}const He=()=>{const[o,a]=g.useState(1),[r]=g.useState(()=>De(10)),i={enableSorting:!0,enableMultiSort:!0,columnResizeMode:"onChange",manualSorting:!1,initialSortBy:[{id:"firstName",desc:!0},{id:"lastName",desc:!1}]},s=e=>{console.log("stateSorting",e)},u=e=>{console.log("stateSelectedRows",e)},p=D.useMemo(()=>[{id:"select",header:({table:e})=>t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t(n.CheckboxCell,{checked:e.getIsAllRowsSelected(),indeterminate:e.getIsSomeRowsSelected(),onChange:e.getToggleAllRowsSelectedHandler()})}),enableGrouping:!1,cell:({row:e})=>t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t(n.CheckboxCell,{disabled:!e.getCanSelect(),checked:e.getIsSelected(),indeterminate:e.getIsSomeSelected(),onChange:e.getToggleSelectedHandler()})})},{id:"name",header:()=>t("div",{style:{textAlign:"center"},children:"Name"}),footer:e=>e.column.id,enableGrouping:!1,columns:[{accessorKey:"firstName",cell:e=>e.getValue(),footer:e=>e.column.id,enableResizing:!1,editable:!0,sortDescriptor:"asc"},{accessorFn:e=>e.lastName,id:"lastName",cell:e=>e.getValue(),header:()=>t("span",{children:"Last Name"}),footer:e=>e.column.id,enableResizing:!0}]},{id:"otherInfo",header:()=>t("div",{style:{textAlign:"center"},children:"Other info"}),footer:e=>e.column.id,enableGrouping:!1,columns:[{accessorKey:"age",header:()=>"Age",footer:e=>e.column.id},{accessorKey:"visits",header:()=>t("span",{children:"Visits"}),footer:e=>e.column.id},{accessorKey:"status",header:"Status",cell:e=>t(be,{status:e.getValue()}),footer:e=>e.column.id},{accessorKey:"progress",header:"Profile Progress",cell:e=>t(B,{progress:Number(e.getValue())}),footer:e=>e.column.id}]}],[]);return t("div",{children:l(n,{data:r,columns:p,options:i,onManualSorting:s,onChangeRowSelection:u,children:[l(n.Toolbar,{css:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[t(me,{placeholder:"Search"}),l("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"0.5rem"},children:[t(h,{variant:"primary",children:"Button"}),t(h,{variant:"secondary",children:"Button"}),t(h,{variant:"ghost",children:t(R,{icon:q})}),t(h,{variant:"ghost",children:t(R,{icon:J})}),t(h,{variant:"ghost",children:t(R,{icon:Q})})]})]}),l(n.Footer,{css:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[t("div",{}),l("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"0.5rem"},children:[l("div",{style:{fontWeight:"600"},children:[(o-1)*10+1," - ",(o-1)*10+10," of 100"]}),t(ge,{page:o,onChange:e=>a(e),total:10})]})]})]})})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{He as DataGridStory};
