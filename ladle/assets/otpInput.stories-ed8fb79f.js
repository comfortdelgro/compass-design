import{s as x,r as n,R as y,j as r,a as D}from"./index-59ca724e.js";import{u as R}from"./use-dom-ref-e0c66a1d.js";import{C as z}from"./components-316848db.js";const H=x("input",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",padding:"0px",lineHeight:"1em",width:"3rem !important",height:"3rem",margin:"0 1rem",fontSize:"2rem",textAlign:"center",borderRadius:"10px",border:"1px solid rgba(0, 0, 0, 0.2)","&:disabled":{cursor:"not-allowed"}}),L=x("div",{appearance:"none",border:"none",backgroundColor:"transparent",boxSizing:"border-box",padding:"0px",lineHeight:"1em",margin:"5% auto"});function B(a){const l=n.useRef();return n.useEffect(()=>{l.current=a},[a]),l.current}const K=y.forwardRef((a,l)=>{const{css:k={},focus:o,autoFocus:i,...b}=a,c=R(l),p=B(!!o);return n.useLayoutEffect(()=>{c.current&&(o&&i&&c.current.focus(),o&&i&&o!==p&&(c.current.focus(),c.current.select()))},[i,o,p]),r(H,{ref:c,...b})}),$=n.memo(K),q=$,G=y.forwardRef((a,l)=>{const{css:k={},length:o,isNumberInput:i,autoFocus:b,disabled:c,onChangeOTP:p,...F}=a,V=R(l),[s,C]=n.useState(0),[u,T]=n.useState(Array(o).fill("")),S=n.useCallback(t=>{const e=t.join("");p(e)},[p]),f=n.useCallback(t=>{const e=t;return i?!e||/\d/.test(e)?e:"":e},[i]),g=n.useCallback(t=>{const e=[...u];e[s]=t[0]||"",T(e),S(e)},[s,S,u]),d=n.useCallback(t=>{const e=Math.max(Math.min(o-1,t),0);C(e)},[o]),O=n.useCallback(()=>{d(s-1)},[s,d]),h=n.useCallback(()=>{d(s+1)},[s,d]),A=n.useCallback(t=>()=>{d(t)},[d]),E=n.useCallback(t=>{const e=f(t.currentTarget.value);if(!e){t.preventDefault();return}g(e),h()},[g,h,f]),N=n.useCallback(()=>{C(-1)},[]),M=n.useCallback(t=>{switch(t.key){case"Backspace":case"Delete":{t.preventDefault(),u[s]?g(""):O();break}case"ArrowLeft":{t.preventDefault(),O();break}case"ArrowRight":{t.preventDefault(),h();break}case" ":{t.preventDefault();break}}},[s,g,h,O,u]),j=n.useCallback(t=>{t.preventDefault();const e=t.clipboardData.getData("text/plain").trim().slice(0,o-s).split("");if(e){let v=0;const P=[...u];P.forEach((_,I)=>{if(I>=s){const w=f(e.shift()||_);w&&(P[I]=w,v=I)}}),T(P),C(Math.min(v+1,o-1))}},[s,f,o,u]);return r(L,{css:k,ref:V,...F,children:Array(o).fill("").map((t,e)=>r(q,{focus:s===e,autoFocus:b,value:u&&u[e],onFocus:A(e),onChange:E,onKeyDown:M,onBlur:N,onPaste:j,disabled:c},`SingleInput-${e}`))})}),J=n.memo(G),m=J;m.displayName="OTPInput";const X=()=>D(z,{children:[r("h2",{children:"Number OTP"}),r(m,{length:4,isNumberInput:!0,autoFocus:!0,onChangeOTP:a=>console.log("Number OTP: ",a)}),r("h2",{children:"String OTP"}),r(m,{autoFocus:!0,length:4,onChangeOTP:a=>console.log("String OTP: ",a)}),r("h2",{children:"Disabled"}),r(m,{autoFocus:!0,disabled:!0,length:4,onChangeOTP:a=>console.log("String OTP: ",a)})]}),Y={decorators:[a=>D("div",{children:[r("style",{dangerouslySetInnerHTML:{__html:".ladle-main { background: #eee; }"}}),r(a,{})]})]};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{X as Variants,Y as default};
