import{r as h,s as q,R as K,j as N,a as G,b as Kt}from"./index-a83a88d1.js";import{u as le}from"./use-dom-ref-c0dde402.js";import{u as se,c as _e,a7 as jt,a8 as zt,a9 as Ut,aa as Zt,a as Gt,r as ge,f as qt,ab as Ye,d as _t,D as pe,e as Xe,ac as te,ad as Yt,ae as Xt,h as Re,a0 as Pe,af as Jt,ag as ae,C as Je,L as Qt,M as er,G as tr,i as rr,ah as nr,ai as ar,a6 as ue,aj as or,b as ir,ak as lr,al as sr,am as cr,an as ur,x as dr,ao as Qe,ap as fr,aq as mr,ar as Q,as as pr,at as hr,au as br,av as $r,aw as gr,ax as vr,ay as yr,az as Ee,aA as xr,aB as et,aC as wr,aD as Me,aE as Pr}from"./useCalendarState-f8bc1537.js";import{u as Le,a as ke}from"./useEvent-e98e153c.js";import{$ as Er}from"./import-103c32e0.js";import{a as Sr}from"./calendar-4546b995.js";function Se(e,t=-1/0,r=1/0){return Math.min(Math.max(e,t),r)}function Cr(e,t,r){const{direction:n}=se(),a=h.useMemo(()=>_e(t),[t]),o=i=>{if(i.altKey&&(i.key==="ArrowDown"||i.key==="ArrowUp")&&"setOpen"in e&&(i.preventDefault(),i.stopPropagation(),e.setOpen(!0)),!r)switch(i.key){case"ArrowLeft":i.preventDefault(),i.stopPropagation(),n==="rtl"?a.focusNext():a.focusPrevious();break;case"ArrowRight":i.preventDefault(),i.stopPropagation(),n==="rtl"?a.focusPrevious():a.focusNext();break}},u=()=>{var p;let i=(p=window.event)==null?void 0:p.target;const s=zt(t.current,{tabbable:!0});if(i&&(s.currentNode=i,i=s.previousNode()),!i){let $;do $=s.lastChild(),$&&(i=$);while($)}for(;i!=null&&i.hasAttribute("data-placeholder");){const $=s.previousNode();if($&&$.hasAttribute("data-placeholder"))i=$;else break}i&&i.focus()},{pressProps:l}=jt({preventFocusOnPress:!0,allowTextSelectionOnPress:!0,onPressStart(i){i.pointerType==="mouse"&&u()},onPress(i){i.pointerType!=="mouse"&&u()}});return{...l,onKeyDown:o}}function Dr(e){const{description:t,errorMessage:r,validationState:n}=e;let{labelProps:a,fieldProps:o}=Ut(e);const u=Le([!!t,!!r,n]),l=Le([!!t,!!r,n]);return o={...o,"aria-describedby":[u,l,e["aria-describedby"]].filter(Boolean).join(" ")||void 0},{labelProps:a,fieldProps:o,descriptionProps:{id:u},errorMessageProps:{id:l}}}function Tr(e){const t=h.useRef({isFocused:!1,onBlur:e,observer:null});return t.current.onBlur=e,h.useLayoutEffect(()=>{const r=t.current;return()=>{r.observer&&(r.observer.disconnect(),r.observer=null)}},[]),h.useCallback(r=>{if(r.target instanceof HTMLButtonElement||r.target instanceof HTMLInputElement||r.target instanceof HTMLTextAreaElement||r.target instanceof HTMLSelectElement){t.current.isFocused=!0;const n=r.target,a=o=>{var u,l;t.current.isFocused=!1,n.disabled&&((l=(u=t.current).onBlur)==null||l.call(u,new Zt("blur",o))),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};n.addEventListener("focusout",a,{once:!0}),t.current.observer=new MutationObserver(()=>{var o;t.current.isFocused&&n.disabled&&((o=t.current.observer)==null||o.disconnect(),n.dispatchEvent(new FocusEvent("blur")),n.dispatchEvent(new FocusEvent("focusout",{bubbles:!0})))}),t.current.observer.observe(n,{attributes:!0,attributeFilter:["disabled"]})}},[])}function Rr(e){const{isDisabled:t,onBlurWithin:r,onFocusWithin:n,onFocusWithinChange:a}=e,o=h.useRef({isFocusWithin:!1}),u=h.useCallback(s=>{o.current.isFocusWithin&&!s.currentTarget.contains(s.relatedTarget)&&(o.current.isFocusWithin=!1,r&&r(s),a&&a(!1))},[r,a,o]),l=Tr(u),i=h.useCallback(s=>{!o.current.isFocusWithin&&document.activeElement===s.target&&(n&&n(s),a&&a(!0),o.current.isFocusWithin=!0,l(s))},[n,a,l]);return t?{focusWithinProps:{onFocus:null,onBlur:null}}:{focusWithinProps:{onFocus:i,onBlur:u}}}function Mr(e,t,r){const{labelProps:n,fieldProps:a,descriptionProps:o,errorMessageProps:u}=Dr({...e,labelElementType:"span"}),{focusWithinProps:l}=Rr({...e,onBlurWithin:v=>{t.confirmPlaceholder(),e.onBlur&&e.onBlur(v)},onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange}),i=t.maxGranularity==="hour"?"selectedTimeDescription":"selectedDateDescription",s=t.value?i:"",p=Gt(s),$=e[ge]==="presentation"?a["aria-describedby"]:[p["aria-describedby"],a["aria-describedby"]].filter(Boolean).join(" ")||void 0,d=e[qt],g=h.useMemo(()=>d||_e(r),[d,r]),c=Cr(t,r,e[ge]==="presentation");Ye.set(t,{ariaLabel:"",ariaLabelledBy:[e["aria-labelledby"],n.id].filter(Boolean).join(" ")||"",focusManager:g});const x=h.useRef(e.autoFocus);let w;e[ge]==="presentation"?w={role:"presentation"}:w={...a,role:"group","aria-disabled":e.isDisabled||void 0,"aria-describedby":$},h.useEffect(()=>{x.current&&g.focusFirst(),x.current=!1},[g]);const C=_t(e);return{labelProps:{...n,onClick:()=>{g.focusFirst()}},fieldProps:{...C,...w,...c,...l,onKeyDown(v){e.onKeyDown&&e.onKeyDown(v)},onKeyUp(v){e.onKeyUp&&e.onKeyUp(v)}},descriptionProps:o,errorMessageProps:u}}function Lr(e,t){const r=h.useRef(e);e&&(r.current=e),e=r.current;const{locale:n}=se(),a=h.useMemo(()=>new pe(n),[n]),o=h.useMemo(()=>a.resolvedOptions(),[a]),u=e&&"timeZone"in e?e.timeZone:o.timeZone;if(t=t||(e&&"minute"in e?"minute":"day"),e&&!(t in e))throw new Error("Invalid granularity "+t+" for value "+e.toString());return[t,u]}const de={year:!0,month:!0,day:!0,hour:!0,minute:!0,second:!0,dayPeriod:!0,era:!0},Fe={year:5,month:2,day:7,hour:2,minute:15,second:15},kr={dayperiod:"dayPeriod"};function Fr(e){const{locale:t,createCalendar:r,hideTimeZone:n,isDisabled:a,isReadOnly:o,isRequired:u}=e,l=e.value||e.defaultValue||e.placeholderValue,[i,s]=Lr(l,e.granularity),p=s||"UTC";if(l&&!(i in l))throw new Error("Invalid granularity "+i+" for value "+l.toString());const $=h.useMemo(()=>new pe(t),[t]),d=h.useMemo(()=>r($.resolvedOptions().calendar),[r,$]),g=f=>{e.onChange&&(f!=null&&f.year&&f.year<ae?e.onChange(null):e.onChange(f))},[c,x]=Xe(e.value,e.defaultValue,g),w=h.useRef(c);h.useEffect(()=>{w.current!==c&&(c===null&&Object.keys(y).length===Object.keys(k).length&&T===void 0&&(y={},m(y),E(te(e.placeholderValue,i,d,s)),D(void 0)),w.current=c)},[c]);const C=h.useMemo(()=>Yt(c,d),[c,d]),[v,E]=h.useState(()=>te(e.placeholderValue,i,d,s)),L=C||v,O=d.identifier==="gregory"&&(L==null?void 0:L.era)==="BC",M=h.useMemo(()=>({granularity:i,maxGranularity:e.maxGranularity??"year",timeZone:s,hideTimeZone:n,hourCycle:e.hourCycle,showEra:O}),[e.maxGranularity,i,e.hourCycle,s,n,O]),[T,D]=h.useState(void 0),{isReset:V,setIsReset:S}=Xt(),U=()=>{x(null),y={},m(y),D(void 0)};h.useEffect(()=>{V===!0&&(U(),S==null||S(!1))},[V]);const _=h.useMemo(()=>Re({},M),[M]),j=h.useMemo(()=>new pe(t,_),[t,_]),A=h.useMemo(()=>j.resolvedOptions(),[j]),k=h.useMemo(()=>j.formatToParts(new Date).filter(f=>de[f.type]).reduce((f,R)=>(f[R.type]=!0,f),{}),[j]);let[y,m]=h.useState(()=>e.value||e.defaultValue?{...k}:{});const P=h.useRef(d.identifier);h.useEffect(()=>{d.identifier!==P.current&&(P.current=d.identifier,E(f=>Object.keys(y).length>0?Pe(f,d):te(e.placeholderValue,i,d,s)))},[d,i,y,s,e.placeholderValue]),c&&Object.keys(y).length<Object.keys(k).length&&(y={...k},m(y)),c==null&&Object.keys(y).length===Object.keys(k).length&&T===!1&&!V&&(y={},m(y),E(te(e.placeholderValue,i,d,s)),D(void 0));let b=C&&Object.keys(y).length>=Object.keys(k).length?C:v,F=f=>{e.isDisabled||e.isReadOnly||(Object.keys(y).length>=Object.keys(k).length&&(f=Pe(f,(l==null?void 0:l.calendar)||new tr),x(f)),E(f))};const I=h.useMemo(()=>b==null?void 0:b.toDate(p),[b,p]);let Y=h.useMemo(()=>j.formatToParts(I).map(f=>{let R=de[f.type];f.type==="era"&&d.getEras().length===1&&(R=!1);let B=de[f.type]&&!y[f.type],ee=de[f.type]?Jt(f.type,f.value):null;return f.type==="year"&&(B=T?!1:B),{type:kr[f.type]||f.type,text:B?ee:f.value,...Or(b,f.type,A),isPlaceholder:B,placeholder:ee,isEditable:R}}),[I,y,j,A,b,d,t]);k.era&&y.year&&!y.era?(y.era=!0,m({...y})):!k.era&&y.era&&(delete y.era,m({...y}));const ce=f=>{y[f]=!0,f==="year"&&k.era&&(y.era=!0),m({...y})},be=f=>{y[f]=!1,m({...y})},Z=(f,R)=>{y[f]?F(Ir(b,f,R,A)):(ce(f),Object.keys(y).length>=Object.keys(k).length&&F(b))};function $e(){const f=Object.values(y),R=Object.values(k);return c||f.length===0?!0:f.length!==R.length?!1:!!(f.every(B=>!B)&&!u||f.every(B=>B))}const Wt=(()=>e.validationState||(rr(C,e.minValue,e.maxValue)||null)||!c&&(v!=null&&v.year)&&v.year<ae&&T!==void 0||!$e()?"invalid":"valid")();return{value:C,dateValue:I,calendar:d,setValue:F,segments:Y,dateFormatter:j,validationState:Wt,granularity:i,maxGranularity:e.maxGranularity??"year",isDisabled:!!a,isReadOnly:!!o,isRequired:!!u,increment(f){Z(f,1)},decrement(f){Z(f,-1)},incrementPage(f){Z(f,Fe[f]||1)},decrementPage(f){Z(f,-(Fe[f]||1))},setSegment(f,R){f==="year"&&R<ae?(be(f),D(!0),E(new Je(R,(b==null?void 0:b.month)??0,(b==null?void 0:b.day)??0))):(f==="year"&&R>=ae&&D(!1),ce(f)),F(Nr(b,f,parseInt(R),A))},confirmPlaceholder(){if(e.isDisabled||e.isReadOnly)return;let f=Object.keys(y),R=Object.keys(k);f.length===R.length-1&&k.dayPeriod&&!y.dayPeriod&&(y={...k},m(y),F(b==null?void 0:b.copy()))},clearSegment(f){f==="year"&&D(void 0),delete y[f],m({...y});let R=te(e.placeholderValue,i,d,s),B=b;if(f==="dayPeriod"&&"hour"in b&&"hour"in R){let ee=b.hour>=12,Te=R.hour>=12;ee&&!Te?B=b.set({hour:b.hour-12}):!ee&&Te&&(B=b.set({hour:b.hour+12}))}else f in b&&(B=b==null?void 0:b.set({[f]:R==null?void 0:R[f]}));x(null),F(B)},formatValue(f){if(!C)return"";const R=Re(f,M);return new pe(t,R).format(I)}}}function Or(e,t,r){switch(t){case"era":{let n=e.calendar.getEras();return{value:n.indexOf(e.era),minValue:0,maxValue:n.length-1}}case"year":return{value:e.year,minValue:ae,maxValue:e.calendar.getYearsInEra(e)};case"month":return{value:e.month,minValue:er(e),maxValue:e.calendar.getMonthsInYear(e)};case"day":return{value:e.day,minValue:Qt(e),maxValue:e.calendar.getDaysInMonth(e)}}if("hour"in e)switch(t){case"dayPeriod":return{value:e.hour>=12?12:0,minValue:0,maxValue:12};case"hour":if(r.hour12){let n=e.hour>=12;return{value:e.hour,minValue:n?12:0,maxValue:n?23:11}}return{value:e.hour,minValue:0,maxValue:23};case"minute":return{value:e.minute,minValue:0,maxValue:59};case"second":return{value:e.second,minValue:0,maxValue:59}}return{}}function Ir(e,t,r,n){switch(t){case"era":case"year":case"month":case"day":return e.cycle(t,r,{round:t==="year"})}if("hour"in e)switch(t){case"dayPeriod":{let a=e.hour,o=a>=12;return e.set({hour:o?a-12:a+12})}case"hour":case"minute":case"second":return e.cycle(t,r,{round:t!=="hour",hourCycle:n.hour12?12:24})}}function Nr(e,t,r,n){switch(t){case"day":case"month":case"year":case"era":return e.set({[t]:r})}if("hour"in e)switch(t){case"dayPeriod":{let a=e.hour,o=a>=12;return r>=12===o?e:e.set({hour:o?a-12:a+12})}case"hour":if(n.hour12){let o=e.hour>=12;!o&&r===12&&(r=0),o&&r<12&&(r+=12)}case"minute":case"second":return e.set({[t]:r})}}const tt=q("div",{color:"$gray50",fontSize:"$body3",fontWeight:"$semibold",textTransform:"uppercase",letterSpacing:"1px","&:focus":{boxShadow:"none"},"&:focus-visible":{padding:"$0_5 0",outline:"none",boxShadow:"none",color:"$whiteText !important",backgroundColor:"$cdgBlue"},"&.number":{color:"$primaryText"}}),Vr=q("div",{display:"flex",flexDirection:"column",justifyContent:"flex-end","& .date-field-input:focus-within":{border:"1px solid $cdgBlue100",borderRadius:"$md"},"& .date-field-label":{fontSize:"$label1",fontWeight:"$semibold",marginBottom:"$2",display:"inline-block",width:"100%",span:{marginLeft:"$1",color:"$danger"}},"& .date-field-input":{minWidth:"$49",height:"$11",display:"flex",alignItems:"center",padding:"0 0 0 $4",backgroundColor:"$background",border:"1px solid $gray30",borderRadius:"$md"},"& .date-field-input.mobile:active":{backgroundColor:"$gray10"},"& .toggle-calendar-button":{marginLeft:"auto"},"& .toggle-calendar-button .toggle-calendar-icon":{width:"$3",height:"$3"},variants:{isDisabled:{true:{"& .date-field-input":{backgroundColor:"$gray20",cursor:"not-allowed !important","*":{color:"$disabledText",cursor:"not-allowed !important"}},[`& ${tt}`]:{color:"$disabledText"}}},isInvalid:{true:{"& .date-field-input":{borderColor:"$danger"}}}}}),ve=q("span",{variants:{isError:{true:{color:"$danger"}},isText:{true:{fontSize:"$label2"}}}}),Ar=q("button",{border:"none",margin:"0",width:"auto",overflow:"visible",background:"transparent",color:"inherit",font:"inherit",lineHeight:"normal",WebkitFontSmoothing:"inherit",MozOsxFontSmoothing:"inherit",WebkitAppearance:"none",display:"flex",justifyContent:"center",alignItems:"center",cursor:"pointer",padding:"$2 $4","&:focus":{boxShadow:"none"},"&:focus-visible":{outline:"2px solid $cdgBlue80",borderRadius:"2px"}}),Oe=q("div",{fontSize:"$label2",fontWeight:"$medium",transition:"$default",marginTop:"$1",color:"$gray70",variants:{error:{true:{color:"$danger"}}}}),Br=q("svg",{color:"$primaryText"});class rt{getStringForLocale(t,r){let n=this.strings[r];n||(n=Hr(r,this.strings,this.defaultLocale),this.strings[r]=n);let a=n[t];if(!a)throw new Error(`Could not find intl message ${t} in ${r} locale`);return a}constructor(t,r="en-US"){this.strings={...t},this.defaultLocale=r}}function Hr(e,t,r="en-US"){if(t[e])return t[e];let n=Wr(e);if(t[n])return t[n];for(let a in t)if(a.startsWith(n+"-"))return t[a];return t[r]}function Wr(e){return Intl.Locale?new Intl.Locale(e).language:e.split("-")[0]}const Ie=new Map,Ne=new Map;class Kr{format(t,r){let n=this.strings.getStringForLocale(t,this.locale);return typeof n=="function"?n(r,this):n}plural(t,r,n="cardinal"){let a=r["="+t];if(a)return typeof a=="function"?a():a;let o=this.locale+":"+n,u=Ie.get(o);u||(u=new Intl.PluralRules(this.locale,{type:n}),Ie.set(o,u));let l=u.select(t);return a=r[l]||r.other,typeof a=="function"?a():a}number(t){let r=Ne.get(this.locale);return r||(r=new Intl.NumberFormat(this.locale),Ne.set(this.locale,r)),r.format(t)}select(t,r){let n=t[r]||t.other;return typeof n=="function"?n():n}constructor(t,r){this.locale=t,this.strings=r}}function jr(){const{locale:e}=se();return h.useMemo(()=>{try{return new Intl.DisplayNames(e,{type:"dateTimeField"})}catch{return new zr(e)}},[e])}class zr{constructor(t){this.locale=t,this.dictionary=new rt(nr)}of(t){return this.dictionary.getStringForLocale(t,this.locale)}}function Ur(e){const t=h.useRef();let{value:r,textValue:n,minValue:a,maxValue:o,isDisabled:u,isReadOnly:l,isRequired:i,onIncrement:s,onIncrementPage:p,onDecrement:$,onDecrementPage:d,onDecrementToMin:g,onIncrementToMax:c}=e;const x=h.useRef(e);x.current=e;const w=()=>clearTimeout(t.current);h.useEffect(()=>()=>w(),[]);let C=S=>{if(!(S.ctrlKey||S.metaKey||S.shiftKey||S.altKey||l)){switch(S.key){case"PageUp":if(p){S.preventDefault(),p();break}break;case"ArrowUp":case"Up":s&&(S.preventDefault(),s());break;case"PageDown":if(d){S.preventDefault(),d();break}break;case"ArrowDown":case"Down":$&&(S.preventDefault(),$());break;case"Home":g&&(S.preventDefault(),g());break;case"End":c&&(S.preventDefault(),c());break}return null}},v=h.useRef(!1),E=()=>{v.current=!0},L=()=>{v.current=!1};n=n===""?"Empty":(n||`${r}`).replace("-","−");const O=h.useCallback(S=>{w(),x.current.onIncrement(),t.current=window.setTimeout(()=>{(isNaN(o)||isNaN(r)||r<o)&&O(60)},S)},[s,o,r]),M=h.useCallback(S=>{w(),x.current.onDecrement(),t.current=window.setTimeout(()=>{(isNaN(a)||isNaN(r)||r>a)&&M(60)},S)},[$,a,r]);let T=S=>{S.preventDefault()},{addGlobalListener:D,removeAllGlobalListeners:V}=ar();return{spinButtonProps:{role:"spinbutton","aria-valuenow":isNaN(r)?null:r,"aria-valuetext":n,"aria-valuemin":a,"aria-valuemax":o,"aria-disabled":u||null,"aria-readonly":l||null,"aria-required":i||null,onKeyDown:C,onFocus:E,onBlur:L},incrementButtonProps:{onPressStart:()=>{O(400),D(window,"contextmenu",T)},onPressEnd:()=>{w(),V()},onFocus:E,onBlur:L},decrementButtonProps:{onPressStart:()=>{M(400),D(window,"contextmenu",T)},onPressEnd:()=>{w(),V()},onFocus:E,onBlur:L}}}function Zr(e,t,r){const n=h.useRef(""),{locale:a}=se(),o=jr();let{ariaLabel:u,ariaLabelledBy:l,ariaDescribedBy:i,focusManager:s}=Ye.get(t),p=e.isPlaceholder?"":e.text;const $=h.useMemo(()=>t.dateFormatter.resolvedOptions(),[t.dateFormatter]),d=ue({month:"long",timeZone:$.timeZone}),g=ue({hour:"numeric",hour12:$.hour12,timeZone:$.timeZone});if(e.type==="month"&&!e.isPlaceholder){const m=d.format(t.dateValue);p=m!==p?`${p} – ${m}`:m}else e.type==="hour"&&!e.isPlaceholder&&(p=g.format(t.dateValue));const{spinButtonProps:c}=Ur({value:e.value,textValue:p,minValue:e.minValue,maxValue:e.maxValue,isDisabled:!!t.isDisabled,isReadOnly:t.isReadOnly||!e.isEditable,isRequired:!!t.isRequired,onIncrement:()=>{n.current="",t.increment(e.type)},onDecrement:()=>{n.current="",t.decrement(e.type)},onIncrementPage:()=>{n.current="",t.incrementPage(e.type)},onDecrementPage:()=>{n.current="",t.decrementPage(e.type)},onIncrementToMax:()=>{n.current="",t.setSegment(e.type,e.maxValue)},onDecrementToMin:()=>{n.current="",t.setSegment(e.type,e.minValue)}}),x=h.useMemo(()=>new Er(a,{maximumFractionDigits:0}),[a]),w=()=>{if(x.isValidPartialNumber(e.text)&&!t.isReadOnly&&!e.isPlaceholder){const m="";t.clearSegment(e.type),n.current=m}else e.type==="dayPeriod"&&t.clearSegment(e.type)},C=m=>{var P;if(m.key==="a"&&(sr()?m.metaKey:m.ctrlKey)&&m.preventDefault(),!(m.ctrlKey||m.metaKey||m.shiftKey||m.altKey))switch(m.key){case"Backspace":case"Delete":{m.preventDefault(),m.stopPropagation(),w();break}default:{(P=c.onKeyDown)==null||P.call(c,m);break}}},{startsWith:v}=Sr({sensitivity:"base"}),E=ue({hour:"numeric",hour12:!0}),L=h.useMemo(()=>{var P;const m=new Date;return m.setHours(0),(P=E.formatToParts(m).find(b=>b.type==="dayPeriod"))==null?void 0:P.value},[E]),O=h.useMemo(()=>{var P;const m=new Date;return m.setHours(12),(P=E.formatToParts(m).find(b=>b.type==="dayPeriod"))==null?void 0:P.value},[E]),M=ue({year:"numeric",era:"narrow",timeZone:"UTC"}),T=h.useMemo(()=>{var F;if(e.type!=="era")return[];const m=Pe(new Je(1,1,1),t.calendar),P=t.calendar.getEras().map(I=>{var Z;const Y=m.set({year:1,month:1,day:1,era:I}).toDate("UTC"),be=(Z=M.formatToParts(Y).find($e=>$e.type==="era"))==null?void 0:Z.value;return{era:I,formatted:be}}),b=Gr(P.map(I=>I.formatted));if(b)for(const I of P)I.formatted=(F=I.formatted)==null?void 0:F.slice(b);return P},[M,t.calendar,e.type]),D=m=>{if(t.isDisabled||t.isReadOnly)return;const P=n.current+m;switch(e.type){case"dayPeriod":if(v(L,m))t.setSegment("dayPeriod",0);else if(v(O,m))t.setSegment("dayPeriod",12);else break;s.focusNext();break;case"era":{const b=T.find(F=>v(F.formatted,m));b&&(t.setSegment("era",b.era),s.focusNext());break}case"day":case"hour":case"minute":case"second":case"month":case"year":{if(!x.isValidPartialNumber(P))return;let b=x.parse(P),F=b,I=e.minValue===0;if(e.type==="hour"&&t.dateFormatter.resolvedOptions().hour12){switch(t.dateFormatter.resolvedOptions().hourCycle){case"h11":b>11&&(F=x.parse(m));break;case"h12":I=!1,b>12&&(F=x.parse(m));break}e.value>=12&&b>1&&(b+=12)}else b>e.maxValue&&(F=x.parse(m));if(isNaN(b))return;const Y=F!==0||I;Y&&t.setSegment(e.type,F),+(b+"0")>e.maxValue||P.length>=String(e.maxValue).length?(n.current="",Y&&(s==null||s.focusNext())):n.current=P;break}}},V=()=>{n.current="",cr(r.current,{containingElement:ur(r.current)});const m=window.getSelection();m==null||m.collapse(r.current)},S=h.useRef("");ke(r,"beforeinput",m=>{var P,b;switch(m.preventDefault(),m.inputType){case"deleteContentBackward":case"deleteContentForward":x.isValidPartialNumber(e.text)&&!t.isReadOnly&&w();break;case"insertCompositionText":S.current=(P=r.current)==null?void 0:P.textContent,r.current.textContent=(b=r.current)==null?void 0:b.textContent;break;default:m.data!=null&&D(m.data);break}}),ke(r,"input",m=>{const{inputType:P,data:b}=m;switch(P){case"insertCompositionText":r.current.textContent=S.current,(v(L,b)||v(O,b))&&D(b);break}}),h.useLayoutEffect(()=>{const m=r.current;return()=>{document.activeElement===m&&(s.focusPrevious()||s.focusNext())}},[r,s]);const U=or()||e.type==="timeZoneName"?{role:"textbox","aria-valuemax":null,"aria-valuemin":null,"aria-valuetext":null,"aria-valuenow":null}:{},_=h.useMemo(()=>{var m;return(m=t==null?void 0:t.segments)==null?void 0:m.find(P=>P.isEditable)},[t.segments]);e!==_&&t.validationState!=="invalid"&&(i="");const j=ir(),A=!t.isDisabled&&!t.isReadOnly&&e.isEditable,k=e.type==="literal"?"":o.of(e.type),y=lr({"aria-label":(u?u+" ":"")+k,"aria-labelledby":l});return e.type==="literal"?{segmentProps:{"aria-hidden":!0}}:{segmentProps:{...c,...y,id:j,...U,"aria-invalid":t.validationState==="invalid"?"true":void 0,"aria-describedby":i,"aria-readonly":t.isReadOnly||!e.isEditable?"true":void 0,"data-placeholder":e.isPlaceholder||void 0,contentEditable:A,suppressContentEditableWarning:A,spellCheck:A?"false":void 0,autoCapitalize:A?"off":void 0,autoCorrect:A?"off":void 0,[parseInt(K.version,10)>=17?"enterKeyHint":"enterkeyhint"]:A?"next":void 0,inputMode:t.isDisabled||e.type==="dayPeriod"||e.type==="era"||!A?void 0:"numeric",tabIndex:t.isDisabled?void 0:0,onKeyDown:C,onFocus:V,style:{caretColor:"transparent"},onPointerDown(m){m.stopPropagation()},onMouseDown(m){m.stopPropagation()}}}}function Gr(e){e.sort();const t=e[0],r=e[e.length-1];for(let n=0;n<t.length;n++)if(t[n]!==r[n])return n;return 0}const qr=K.forwardRef((e,t)=>{const{segment:r,state:n}=e,a=le(t),{segmentProps:o}=Zr(r,n,a);return N(tt,{...o,ref:a,className:`segment ${r.isPlaceholder?"placeholder":"number"}`,children:r.text})}),_r=qr,Yr=()=>N(Br,{width:"16",height:"16",viewBox:"0 0 16 16",children:N("path",{d:"M8.33276 12.3334C8.02004 12.3334 7.70717 12.2125 7.46885 11.9707L1.35805 5.78022C0.880649 5.29658 0.880649 4.5131 1.35805 4.02947C1.83546 3.54584 2.60886 3.54584 3.08626 4.02947L8.33276 9.34651L13.5804 4.03044C14.0578 3.54681 14.8312 3.54681 15.3086 4.03044C15.786 4.51407 15.786 5.29755 15.3086 5.78118L9.19782 11.9717C8.95912 12.2135 8.64594 12.3334 8.33276 12.3334Z",fill:"currentColor"})}),Xr=K.forwardRef((e,t)=>{const{locale:r}=se(),n=le(null),a=Fr({...e,isReadOnly:e.isReadOnly?!0:!!e.isMobile,locale:r,createCalendar:dr}),o=le(t),{labelProps:u,fieldProps:l}=Mr({...e,isReadOnly:e.isReadOnly?!0:!!e.isMobile},a,o),i=e.isDisabled??!1,s=e.isReadOnly??!1,p=!!e.isInvalid||a.validationState==="invalid",$=()=>{const c=e.necessityIndicator??"icon";return e.isRequired&&c==="icon"?N(ve,{isError:!0,children:"*"}):e.isRequired&&c==="label"?N(ve,{isError:!0,isText:!0,children:"(required)"}):!e.isRequired&&c==="label"?N(ve,{isText:!0,children:"(optional)"}):""},{onPress:d,...g}=e.buttonProps;return G("div",{children:[G(Vr,{className:"cdg-date-field",isDisabled:i,isInvalid:p,children:[typeof e.label=="string"?G("span",{...u,className:"date-field-label",children:[e.label," ",$()]}):e.label,G("div",{...l,ref:o,className:`date-field-input ${i||s?"":e.isMobile?"mobile":""}`,onClick:()=>{var c;i||s||e.isMobile&&((c=n.current)==null||c.click())},children:[a.segments.map((c,x)=>{var w;return c.type==="literal"&&(c.isPlaceholder=((w=a.segments[x-1])==null?void 0:w.isPlaceholder)??!1),N(_r,{segment:c,state:a},x)}),N(Ar,{...g,ref:n,onClick:c=>{d==null||d(c)},type:"button",disabled:i||s,className:"toggle-calendar-button",children:N(Yr,{})})]})]}),e.isInvalid&&e.errorMessage&&N(Oe,{className:"cdg-date-field-error",error:!0,children:e.errorMessage}),e.helperText?N(Oe,{className:"cdg-date-field-helper",children:e.helperText}):null]})}),Hn=Xr,Jr=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),Qr=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function en(e){if(Intl.Locale){let r=new Intl.Locale(e).maximize().script;return Jr.has(r)}let t=e.split("-")[0];return Qr.has(t)}function nt(){let e=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([e])}catch{e="en-US"}return{locale:e,direction:en(e)?"rtl":"ltr"}}let Ce=nt(),oe=new Set;function Ve(){Ce=nt();for(let e of oe)e(Ce)}function tn(){let e=Qe(),[t,r]=h.useState(Ce);return h.useEffect(()=>(oe.size===0&&window.addEventListener("languagechange",Ve),oe.add(r),()=>{oe.delete(r),oe.size===0&&window.removeEventListener("languagechange",Ve)}),[]),e?{locale:"en-US",direction:"ltr"}:t}const rn=K.createContext(null);function at(){let e=tn();return h.useContext(rn)||e}const Ae=new WeakMap;function nn(e){let t=Ae.get(e);return t||(t=new rt(e),Ae.set(e,t)),t}function an(e){let{locale:t}=at(),r=h.useMemo(()=>nn(e),[e]);return h.useMemo(()=>new Kr(t,r),[t,r])}function on(e){return e&&e.__esModule?e.default:e}const Be={top:"top",bottom:"top",left:"left",right:"left"},he={top:"bottom",bottom:"top",left:"right",right:"left"},ln={top:"left",left:"top"},De={top:"height",left:"width"},sn={width:"totalWidth",height:"totalHeight"},fe={};let X=typeof document<"u"&&window.visualViewport;function He(e){let t=0,r=0,n=0,a=0,o=0,u=0,l={};if(e.tagName==="BODY"){let p=document.documentElement;n=p.clientWidth,a=p.clientHeight;var i;t=(i=X==null?void 0:X.width)!==null&&i!==void 0?i:n;var s;r=(s=X==null?void 0:X.height)!==null&&s!==void 0?s:a,l.top=p.scrollTop||e.scrollTop,l.left=p.scrollLeft||e.scrollLeft}else({width:t,height:r,top:o,left:u}=J(e)),l.top=e.scrollTop,l.left=e.scrollLeft,n=t,a=r;return{width:t,height:r,totalWidth:n,totalHeight:a,scroll:l,top:o,left:u}}function cn(e){return{top:e.scrollTop,left:e.scrollLeft,width:e.scrollWidth,height:e.scrollHeight}}function We(e,t,r,n,a,o){let u=a.scroll[e],l=n[De[e]],i=t-o-u,s=t+o-u+r;return i<0?-i:s>l?Math.max(l-s,-i):0}function un(e){let t=window.getComputedStyle(e);return{top:parseInt(t.marginTop,10)||0,bottom:parseInt(t.marginBottom,10)||0,left:parseInt(t.marginLeft,10)||0,right:parseInt(t.marginRight,10)||0}}function Ke(e){if(fe[e])return fe[e];let[t,r]=e.split(" "),n=Be[t]||"right",a=ln[n];Be[r]||(r="center");let o=De[n],u=De[a];return fe[e]={placement:t,crossPlacement:r,axis:n,crossAxis:a,size:o,crossSize:u},fe[e]}function ye(e,t,r,n,a,o,u,l,i,s){let{placement:p,crossPlacement:$,axis:d,crossAxis:g,size:c,crossSize:x}=n,w={};w[g]=e[g],$==="center"?w[g]+=(e[x]-r[x])/2:$!==g&&(w[g]+=e[x]-r[x]),w[g]+=o;const C=e[g]-r[x]+i+s,v=e[g]+e[x]-i-s;if(w[g]=Se(w[g],C,v),p===d){const E=l?u[c]:t[sn[c]];w[he[d]]=Math.floor(E-e[d]+a)}else w[d]=Math.floor(e[d]+e[c]+a);return w}function dn(e,t,r,n,a,o){return e.top!=null?Math.max(0,t.height+t.top+t.scroll.top-(r.top+e.top)-(a.top+a.bottom+o)):Math.max(0,n.top+r.top-(t.top+t.scroll.top)-(a.top+a.bottom+o))}function je(e,t,r,n,a,o){let{placement:u,axis:l,size:i}=o;return u===l?Math.max(0,r[l]-e[l]-e.scroll[l]+t[l]-n[l]-n[he[l]]-a):Math.max(0,e[i]+e[l]+e.scroll[l]-t[l]-r[l]-r[i]-n[l]-n[he[l]]-a)}function fn(e,t,r,n,a,o,u,l,i,s,p,$,d,g,c,x){let w=Ke(e),{size:C,crossAxis:v,crossSize:E,placement:L,crossPlacement:O}=w,M=ye(t,l,r,w,p,$,s,d,c,x),T=p,D=je(l,s,t,a,o+p,w);if(u&&n[C]>D){let P=Ke(`${he[L]} ${O}`),b=ye(t,l,r,P,p,$,s,d,c,x);je(l,s,t,a,o+p,P)>D&&(w=P,M=b,T=p)}let V=We(v,M[v],r[E],l,i,o);M[v]+=V;let S=dn(M,l,s,t,a,o);g&&g<S&&(S=g),r.height=Math.min(r.height,S),M=ye(t,l,r,w,T,$,s,d,c,x),V=We(v,M[v],r[E],l,i,o),M[v]+=V;let U={},_=t[v]+.5*t[E]-r[v];const j=c/2+x,A=r[E]-c/2-x,k=t[v]-r[v]+c/2,y=t[v]+t[E]-r[v]-c/2,m=Se(_,k,y);return U[v]=Se(m,j,A),{position:M,maxHeight:S,arrowOffsetLeft:U.left,arrowOffsetTop:U.top,placement:w.placement}}function mn(e){let{placement:t,targetNode:r,overlayNode:n,scrollNode:a,padding:o,shouldFlip:u,boundaryElement:l,offset:i,crossOffset:s,maxHeight:p,arrowSize:$=0,arrowBoundaryOffset:d=0}=e,g=n instanceof HTMLElement?pn(n):document.documentElement,c=g===document.documentElement;const x=window.getComputedStyle(g).position;let w=!!x&&x!=="static",C=c?J(r):ze(r,g);if(!c){let{marginTop:D,marginLeft:V}=window.getComputedStyle(r);C.top+=parseInt(D,10)||0,C.left+=parseInt(V,10)||0}let v=J(n),E=un(n);v.width+=E.left+E.right,v.height+=E.top+E.bottom;let L=cn(a),O=He(l),M=He(g),T=l.tagName==="BODY"?J(g):ze(g,l);return fn(t,C,v,L,E,o,u,O,M,T,i,s,w,p,$,d)}function J(e){let{top:t,left:r,width:n,height:a}=e.getBoundingClientRect(),{scrollTop:o,scrollLeft:u,clientTop:l,clientLeft:i}=document.documentElement;return{top:t+o-l,left:r+u-i,width:n,height:a}}function ze(e,t){let r=window.getComputedStyle(e),n;if(r.position==="fixed"){let{top:a,left:o,width:u,height:l}=e.getBoundingClientRect();n={top:a,left:o,width:u,height:l}}else{n=J(e);let a=J(t),o=window.getComputedStyle(t);a.top+=(parseInt(o.borderTopWidth,10)||0)-t.scrollTop,a.left+=(parseInt(o.borderLeftWidth,10)||0)-t.scrollLeft,n.top-=a.top,n.left-=a.left}return n.top-=parseInt(r.marginTop,10)||0,n.left-=parseInt(r.marginLeft,10)||0,n}function pn(e){let t=e.offsetParent;if(t&&t===document.body&&window.getComputedStyle(t).position==="static"&&!Ue(t)&&(t=document.documentElement),t==null)for(t=e.parentElement;t&&!Ue(t);)t=t.parentElement;return t||document.documentElement}function Ue(e){let t=window.getComputedStyle(e);return t.transform!=="none"||/transform|perspective/.test(t.willChange)||t.filter!=="none"||t.contain==="paint"||"backdropFilter"in t&&t.backdropFilter!=="none"||"WebkitBackdropFilter"in t&&t.WebkitBackdropFilter!=="none"}const hn=new WeakMap;function bn(e){let{triggerRef:t,isOpen:r,onClose:n}=e;h.useEffect(()=>{if(!r||n===null)return;let a=o=>{let u=o.target;if(!t.current||u instanceof Node&&!u.contains(t.current))return;let l=n||hn.get(t.current);l&&l()};return window.addEventListener("scroll",a,!0),()=>{window.removeEventListener("scroll",a,!0)}},[r,n,t])}let H=typeof document<"u"&&window.visualViewport;function $n(e){let{direction:t}=at(),{arrowSize:r=0,targetRef:n,overlayRef:a,scrollRef:o=a,placement:u="bottom",containerPadding:l=12,shouldFlip:i=!0,boundaryElement:s=typeof document<"u"?document.body:null,offset:p=0,crossOffset:$=0,shouldUpdatePosition:d=!0,isOpen:g=!0,onClose:c,maxHeight:x,arrowBoundaryOffset:w=0}=e,[C,v]=h.useState({position:{},arrowOffsetLeft:void 0,arrowOffsetTop:void 0,maxHeight:void 0,placement:void 0}),E=[d,u,a.current,n.current,o.current,l,i,s,p,$,g,t,x,w,r],L=h.useCallback(()=>{if(d===!1||!g||!a.current||!n.current||!o.current||!s)return;let T=mn({placement:vn(u,t),overlayNode:a.current,targetNode:n.current,scrollNode:o.current,padding:l,shouldFlip:i,boundaryElement:s,offset:p,crossOffset:$,maxHeight:x,arrowSize:r,arrowBoundaryOffset:w});Object.keys(T.position).forEach(D=>a.current.style[D]=T.position[D]+"px"),a.current.style.maxHeight=T.maxHeight!=null?T.maxHeight+"px":void 0,v(T)},E);Q(L,E),gn(L),br({ref:a,onResize:L});let O=h.useRef(!1);Q(()=>{let T,D=()=>{O.current=!0,clearTimeout(T),T=setTimeout(()=>{O.current=!1},500),L()};return H==null||H.addEventListener("resize",D),H==null||H.addEventListener("scroll",D),()=>{H==null||H.removeEventListener("resize",D),H==null||H.removeEventListener("scroll",D)}},[L]);let M=h.useCallback(()=>{O.current||c()},[c,O]);return bn({triggerRef:n,isOpen:g,onClose:c&&M}),{overlayProps:{style:{position:"absolute",zIndex:1e5,...C.position,maxHeight:C.maxHeight}},placement:C.placement,arrowProps:{"aria-hidden":"true",role:"presentation",style:{left:C.arrowOffsetLeft,top:C.arrowOffsetTop}},updatePosition:L}}function gn(e){Q(()=>(window.addEventListener("resize",e,!1),()=>{window.removeEventListener("resize",e,!1)}),[e])}function vn(e,t){return t==="rtl"?e.replace("start","right").replace("end","left"):e.replace("start","left").replace("end","right")}const z=[];function yn(e,t){let{onClose:r,shouldCloseOnBlur:n,isOpen:a,isDismissable:o=!1,isKeyboardDismissDisabled:u=!1,shouldCloseOnInteractOutside:l}=e;h.useEffect(()=>(a&&z.push(t),()=>{let c=z.indexOf(t);c>=0&&z.splice(c,1)}),[a,t]);let i=()=>{z[z.length-1]===t&&r&&r()},s=c=>{(!l||l(c.target))&&z[z.length-1]===t&&(c.stopPropagation(),c.preventDefault())},p=c=>{(!l||l(c.target))&&(z[z.length-1]===t&&(c.stopPropagation(),c.preventDefault()),i())},$=c=>{c.key==="Escape"&&!u&&(c.stopPropagation(),c.preventDefault(),i())};$r({ref:t,onInteractOutside:o?p:null,onInteractOutsideStart:s});let{focusWithinProps:d}=gr({isDisabled:!n,onBlurWithin:c=>{!c.relatedTarget||vr(c.relatedTarget)||(!l||l(c.relatedTarget))&&r()}}),g=c=>{c.target===c.currentTarget&&c.preventDefault()};return{overlayProps:{onKeyDown:$,...d},underlayProps:{onPointerDown:g}}}const xe=typeof document<"u"&&window.visualViewport,xn=new Set(["checkbox","radio","range","color","file","image","button","submit","reset"]);let me=0,we;function wn(e={}){let{isDisabled:t}=e;Q(()=>{if(!t)return me++,me===1&&(yr()?we=En():we=Pn()),()=>{me--,me===0&&we()}},[t])}function Pn(){return Ee(ie(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),ie(document.documentElement,"overflow","hidden"))}function En(){let e,t=0,r=$=>{e=et($.target),!(e===document.documentElement&&e===document.body)&&(t=$.changedTouches[0].pageY)},n=$=>{if(!e||e===document.documentElement||e===document.body){$.preventDefault();return}let d=$.changedTouches[0].pageY,g=e.scrollTop,c=e.scrollHeight-e.clientHeight;c!==0&&((g<=0&&d>t||g>=c&&d<t)&&$.preventDefault(),t=d)},a=$=>{let d=$.target;Ge(d)&&d!==document.activeElement&&($.preventDefault(),d.style.transform="translateY(-2000px)",d.focus(),requestAnimationFrame(()=>{d.style.transform=""}))},o=$=>{let d=$.target;Ge(d)&&(d.style.transform="translateY(-2000px)",requestAnimationFrame(()=>{d.style.transform="",xe&&(xe.height<window.innerHeight?requestAnimationFrame(()=>{Ze(d)}):xe.addEventListener("resize",()=>Ze(d),{once:!0}))}))},u=()=>{window.scrollTo(0,0)},l=window.pageXOffset,i=window.pageYOffset,s=Ee(ie(document.documentElement,"paddingRight",`${window.innerWidth-document.documentElement.clientWidth}px`),ie(document.documentElement,"overflow","hidden"),ie(document.body,"marginTop",`-${i}px`));window.scrollTo(0,0);let p=Ee(re(document,"touchstart",r,{passive:!1,capture:!0}),re(document,"touchmove",n,{passive:!1,capture:!0}),re(document,"touchend",a,{passive:!1,capture:!0}),re(document,"focus",o,!0),re(window,"scroll",u));return()=>{s(),p(),window.scrollTo(l,i)}}function ie(e,t,r){let n=e.style[t];return e.style[t]=r,()=>{e.style[t]=n}}function re(e,t,r,n){return e.addEventListener(t,r,n),()=>{e.removeEventListener(t,r,n)}}function Ze(e){let t=document.scrollingElement||document.documentElement;for(;e&&e!==t;){let r=et(e);if(r!==document.documentElement&&r!==document.body&&r!==e){let n=r.getBoundingClientRect().top,a=e.getBoundingClientRect().top;a>n+e.clientHeight&&(r.scrollTop+=a-n)}e=r.parentElement}}function Ge(e){return e instanceof HTMLInputElement&&!xn.has(e.type)||e instanceof HTMLTextAreaElement||e instanceof HTMLElement&&e.isContentEditable}var ot={},it={};it={dismiss:"تجاهل"};var lt={};lt={dismiss:"Отхвърляне"};var st={};st={dismiss:"Odstranit"};var ct={};ct={dismiss:"Luk"};var ut={};ut={dismiss:"Schließen"};var dt={};dt={dismiss:"Απόρριψη"};var ft={};ft={dismiss:"Dismiss"};var mt={};mt={dismiss:"Descartar"};var pt={};pt={dismiss:"Lõpeta"};var ht={};ht={dismiss:"Hylkää"};var bt={};bt={dismiss:"Rejeter"};var $t={};$t={dismiss:"התעלם"};var gt={};gt={dismiss:"Odbaci"};var vt={};vt={dismiss:"Elutasítás"};var yt={};yt={dismiss:"Ignora"};var xt={};xt={dismiss:"閉じる"};var wt={};wt={dismiss:"무시"};var Pt={};Pt={dismiss:"Atmesti"};var Et={};Et={dismiss:"Nerādīt"};var St={};St={dismiss:"Lukk"};var Ct={};Ct={dismiss:"Negeren"};var Dt={};Dt={dismiss:"Zignoruj"};var Tt={};Tt={dismiss:"Descartar"};var Rt={};Rt={dismiss:"Dispensar"};var Mt={};Mt={dismiss:"Revocare"};var Lt={};Lt={dismiss:"Пропустить"};var kt={};kt={dismiss:"Zrušiť"};var Ft={};Ft={dismiss:"Opusti"};var Ot={};Ot={dismiss:"Odbaci"};var It={};It={dismiss:"Avvisa"};var Nt={};Nt={dismiss:"Kapat"};var Vt={};Vt={dismiss:"Скасувати"};var At={};At={dismiss:"取消"};var Bt={};Bt={dismiss:"關閉"};ot={"ar-AE":it,"bg-BG":lt,"cs-CZ":st,"da-DK":ct,"de-DE":ut,"el-GR":dt,"en-US":ft,"es-ES":mt,"et-EE":pt,"fi-FI":ht,"fr-FR":bt,"he-IL":$t,"hr-HR":gt,"hu-HU":vt,"it-IT":yt,"ja-JP":xt,"ko-KR":wt,"lt-LT":Pt,"lv-LV":Et,"nb-NO":St,"nl-NL":Ct,"pl-PL":Dt,"pt-BR":Tt,"pt-PT":Rt,"ro-RO":Mt,"ru-RU":Lt,"sk-SK":kt,"sl-SI":Ft,"sr-SP":Ot,"sv-SE":It,"tr-TR":Nt,"uk-UA":Vt,"zh-CN":At,"zh-TW":Bt};function qe(e){let{onDismiss:t,...r}=e,n=an(on(ot)),a=fr(r,n.format("dismiss")),o=()=>{t&&t()};return K.createElement(mr,null,K.createElement("button",{...a,tabIndex:-1,onClick:o}))}let ne=new WeakMap,W=[];function Sn(e,t=document.body){let r=new Set(e),n=new Set,a=i=>{for(let d of i.querySelectorAll("[data-live-announcer], [data-react-aria-top-layer]"))r.add(d);let s=d=>{if(r.has(d)||n.has(d.parentElement)&&d.parentElement.getAttribute("role")!=="row")return NodeFilter.FILTER_REJECT;for(let g of r)if(d.contains(g))return NodeFilter.FILTER_SKIP;return NodeFilter.FILTER_ACCEPT},p=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,{acceptNode:s}),$=s(i);if($===NodeFilter.FILTER_ACCEPT&&o(i),$!==NodeFilter.FILTER_REJECT){let d=p.nextNode();for(;d!=null;)o(d),d=p.nextNode()}},o=i=>{var s;let p=(s=ne.get(i))!==null&&s!==void 0?s:0;i.getAttribute("aria-hidden")==="true"&&p===0||(p===0&&i.setAttribute("aria-hidden","true"),n.add(i),ne.set(i,p+1))};W.length&&W[W.length-1].disconnect(),a(t);let u=new MutationObserver(i=>{for(let s of i)if(!(s.type!=="childList"||s.addedNodes.length===0)&&![...r,...n].some(p=>p.contains(s.target))){for(let p of s.removedNodes)p instanceof Element&&(r.delete(p),n.delete(p));for(let p of s.addedNodes)(p instanceof HTMLElement||p instanceof SVGElement)&&(p.dataset.liveAnnouncer==="true"||p.dataset.reactAriaTopLayer==="true")?r.add(p):p instanceof Element&&a(p)}});u.observe(t,{childList:!0,subtree:!0});let l={observe(){u.observe(t,{childList:!0,subtree:!0})},disconnect(){u.disconnect()}};return W.push(l),()=>{u.disconnect();for(let i of n){let s=ne.get(i);s===1?(i.removeAttribute("aria-hidden"),ne.delete(i)):ne.set(i,s-1)}l===W[W.length-1]?(W.pop(),W.length&&W[W.length-1].observe()):W.splice(W.indexOf(l),1)}}function Cn(e,t){let{triggerRef:r,popoverRef:n,isNonModal:a,isKeyboardDismissDisabled:o,...u}=e,{overlayProps:l,underlayProps:i}=yn({isOpen:t.isOpen,onClose:t.close,shouldCloseOnBlur:!0,isDismissable:!a,isKeyboardDismissDisabled:o},n),{overlayProps:s,arrowProps:p,placement:$}=$n({...u,targetRef:r,overlayRef:n,isOpen:t.isOpen,onClose:null});return wn({isDisabled:a}),Q(()=>{if(t.isOpen&&!a&&n.current)return Sn([n.current])},[a,t.isOpen,n]),{popoverProps:pr(l,s),arrowProps:p,underlayProps:i,placement:$}}const Ht=K.createContext(null);function Dn(e){let t=Qe(),{portalContainer:r=t?null:document.body,isExiting:n}=e,[a,o]=h.useState(!1),u=h.useMemo(()=>({contain:a,setContain:o}),[a,o]);if(!r)return null;let l=e.children;return e.disableFocusManagement||(l=K.createElement(xr,{restoreFocus:!0,contain:a&&!n},l)),l=K.createElement(Ht.Provider,{value:u},K.createElement(hr,null,l)),Kt.createPortal(l,r)}function Tn(){let e=h.useContext(Ht),t=e==null?void 0:e.setContain;Q(()=>{t==null||t(!0)},[t])}function Rn(e,t){let{role:r="dialog"}=e,n=wr();n=e["aria-label"]?void 0:n;let a=h.useRef(!1);return h.useEffect(()=>{if(t.current&&!t.current.contains(document.activeElement)){Me(t.current);let o=setTimeout(()=>{document.activeElement===t.current&&(a.current=!0,t.current.blur(),Me(t.current),a.current=!1)},500);return()=>{clearTimeout(o)}}},[t]),Tn(),{dialogProps:{...Pr(e,{labelable:!0}),role:r,tabIndex:-1,"aria-labelledby":e["aria-labelledby"]||n,onBlur:o=>{a.current&&o.stopPropagation()}},titleProps:{id:n}}}const Mn=q("div",{"&:focus-visible":{outline:"1px solid $cdgBlue100"}}),Ln=K.forwardRef((e,t)=>{const{children:r,title:n}=e,a=le(t),{dialogProps:o,titleProps:u}=Rn(e,a);return G(Mn,{...o,ref:a,children:[n&&N("h3",{...u,style:{marginTop:0},children:n}),r]})}),Wn=Ln,kn=K.forwardRef((e,t)=>{const{children:r,state:n}=e,a=le(t),{popoverProps:o,underlayProps:u}=Cn({...e,popoverRef:a},n);return G(Dn,{children:[N("div",{...u}),G("div",{...o,ref:a,style:{...o.style},children:[N(qe,{onDismiss:n.close}),r,N(qe,{onDismiss:n.close})]})]})}),Kn=kn;function jn(e){const[t,r]=Xe(e.isOpen,e.defaultOpen||!1,e.onOpenChange);return{isOpen:t,setOpen:r,open(){r(!0)},close(){r(!1)},toggle(){r(!t)}}}export{Hn as D,Kn as P,Cr as a,Rr as b,jn as c,Lr as d,Wn as e,Dr as u};
