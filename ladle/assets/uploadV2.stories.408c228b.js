import{C as F}from"./components.e334c151.js";import{s as l,R as k,r as o,a as m,j as a}from"./index.1e35a2af.js";import{u as D}from"./use-dom-ref.2525156b.js";const S=1024,j=l("div",{appearance:"none",border:"none",boxSizing:"border-box",margin:"0px",padding:"0px",background:"transparent",fontWeight:"$medium",fontSize:"$label2",lineHeight:"$normal",color:"#e31617",marginTop:"$1"}),H=l("div",{appearance:"none",border:"none",boxSizing:"border-box",margin:"0px",padding:"0px",background:"transparent",fontWeight:"$medium",fontSize:"$label2",lineHeight:"",color:"#b4b4b4"}),N=l("div",{appearance:"none",boxSizing:"border-box",padding:"0px",background:"transparent",position:"relative",display:"flex",border:"1px solid #e6e6e6",borderRadius:"$lg",overflow:"hidden",alignItems:"center",margin:"4px 0","& input":{position:"absolute",width:"100%",height:"100%",opacity:"0",zIndex:"1",cursor:"pointer"},"& span:nth-child(1)":{display:"flex",padding:"$3",borderRight:"1px solid #e6e6e6",fontWeight:"$medium",fontSize:"$label1",lineHeight:"$normal",backgroundColor:"#f7f8f9"},"& span:nth-child(2)":{padding:"12px 16px",color:"#b4b4b4",fontWeight:"$medium",fontSize:"$label1",lineHeight:"$normal",minWidth:"$57",whiteSpace:"nowrap",overflow:"hidden",maxWidth:"40ch",textOverflow:"ellipsis"},'& span:nth-child(2)[data-file="true"]':{color:"#333333"},'& [data-invalid="true"]':{borderColor:"red"},'& [data-invalid="true"] span:nth-child(1)':{borderColor:"red"}}),M=l("div",{appearance:"none",border:"none",boxSizing:"border-box",margin:"0px",padding:"0px",background:"transparent",fontWeight:"$medium",fontSize:"$label1",lineHeight:"$normal",color:"#3e3e3e"}),T=l("div",{appearance:"none",border:"none",boxSizing:"border-box",margin:"0px",padding:"0px",background:"transparent",display:"flex",flexDirection:"column",width:"100%"}),B=k.forwardRef((z,w)=>{const{css:v={},fileType:p,maxFileSize:s=0,title:h,value:b=void 0,fileValueName:c,customDescription:x,customError:i,onFileChange:d,placeholder:R,...E}=z,[f,y]=o.exports.useState(),[u,g]=o.exports.useState(),r=o.exports.useRef(null),U=D(w),W=e=>{if(!e.target.files||!e.target.files[0])return;const n=e.target.files[0],t=new FileReader;if(g(n.name),C(n))e.target.files&&e.target.files[0]&&(t.readAsDataURL(n),t.onload=()=>{d&&d(n)});else{e.target.value="";return}},C=e=>{let n=!0,t="";return p.type.includes(e.type)||(t="Sorry, you have upload an inccorect file type.",n=!1),e.size/S/S>s&&(t=`Sorry, you have upload a file that exceed ${s} MB.`,n=!1),n?y(""):(y(t),d&&d(null,t)),n};return o.exports.useEffect(()=>{b?g(c):(g(""),r.current.value="")},[b,c]),o.exports.useEffect(()=>{i&&!!r&&!!r.current&&(r.current.value="")},[i]),m(T,{css:v,ref:U,...E,children:[h?a(M,{children:h}):null,m(N,{"data-invalid":!!f||!!i,children:[a("span",{children:"Browse file"}),a("span",{"data-file":!!u,children:u||R}),a("input",{type:"file",onChange:W,accept:p.accept,title:c,ref:r})]}),a(H,{children:x||`Only ${p.label} files are accepted. Maximum size: ${s} MB`}),f||i?a(j,{children:f||i}):""]})}),$=B;$.displayName="upload v2";const G=()=>m(F,{children:[a("h3",{children:"Default file upload"}),a($,{fileType:{accept:"image/*",label:"PNG, JPEG",type:["image/jpeg","image/jpg","image/png"]},maxFileSize:10})]});typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{G as Default};
