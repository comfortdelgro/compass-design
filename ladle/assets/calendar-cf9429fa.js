import{r as C,s as v,j as d,F as N,R as S,a as P}from"./index-dc844aab.js";import{u as w,C as A,ao as m,d as V,ap as k,ab as I,ak as W,p as H,aq as Z,x as _,ar as K,ae as U,as as q,l as J,K as Q,at as M}from"./useCalendarState-9e612596.js";import"./index-c06ca3ab.js";import{u as X}from"./use-dom-ref-864ef16e.js";import{B as R}from"./button-6b6c0e59.js";let $=new Map;function ee(n){let{locale:e}=w(),l=e+(n?Object.entries(n).sort((c,r)=>c[0]<r[0]?-1:1).join():"");if($.has(l))return $.get(l);let i=new Intl.Collator(e,n);return $.set(l,i),i}function fe(n){let e=ee({usage:"search",...n}),l=C.useCallback((r,a)=>a.length===0?!0:(r=r.normalize("NFC"),a=a.normalize("NFC"),e.compare(r.slice(0,a.length),a)===0),[e]),i=C.useCallback((r,a)=>a.length===0?!0:(r=r.normalize("NFC"),a=a.normalize("NFC"),e.compare(r.slice(-a.length),a)===0),[e]),c=C.useCallback((r,a)=>{if(a.length===0)return!0;r=r.normalize("NFC"),a=a.normalize("NFC");let o=0,s=a.length;for(;o+s<=r.length;o++){let b=r.slice(o,o+s);if(e.compare(a,b)===0)return!0}return!1},[e]);return C.useMemo(()=>({startsWith:l,endsWith:i,contains:c}),[l,i,c])}const z=v("div",{display:"grid",gridTemplateColumns:"repeat(3,1fr)",marginTop:"12px"}),E=v("button",{width:"94px",height:"47.5px",backgroundColor:"transparent",border:"none",borderRadius:"$md",cursor:"pointer",fontSize:"$link3",color:"$primaryText","&:hover, &:focus-visible":{backgroundColor:"$cdgBlue100",color:"$primaryText !important",fontWeight:"normal !important",outline:"none"},"&:disabled, &:disabled:hover":{backgroundColor:"inherit",color:"$gray50 !important",cursor:"not-allowed"},"&.highlighted":{color:"$cdgBlue100",fontWeight:"bold"}}),ae=n=>{const{state:e,monthYearState:l}=n,i=(l==null?void 0:l.months)??[],c=r=>{const a=e.focusedDate;return()=>{var o;(o=e.setFocusedDate)==null||o.call(e,new A((a==null?void 0:a.year)??new Date().getFullYear(),i.indexOf(r)+1,1)),l==null||l.setMonthYearState(m.DATE)}};return d(z,{children:i.map(r=>d(E,{type:"button","aria-label":r,onClick:c(r),children:r},r))})},re=ae,le=n=>{const{state:e,monthYearState:l,maxValue:i}=n,c=a=>{const o=e.focusedDate;return()=>{var s;(s=e.setFocusedDate)==null||s.call(e,new A(a,(o==null?void 0:o.month)??new Date().getMonth()+1,1)),l==null||l.nextState()}},r=new Date;return d(z,{children:Array.isArray(l==null?void 0:l.renderedYears)?l==null?void 0:l.renderedYears.map(a=>{const o=(()=>{var b;return i?(i==null?void 0:i.year)<a:e.minValue?((b=e.minValue)==null?void 0:b.year)>a:!1})(),s=a===r.getFullYear();return d(E,{type:"button",className:`calendar-year-cell ${o?"disabled":""} ${s?"highlighted":""}`,"aria-label":a.toString(),onClick:c(a),disabled:o,children:a},a)}):d(N,{})})},ne=le,oe=v("div",{width:"fit-content",backgroundColor:"$background",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.08)",borderRadius:"$md",padding:"$4","& .calendar-footer":{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"$2",paddingTop:"$6",marginTop:"$6",borderTop:"1px solid $gray60"},"& .calendar-footer button":{padding:"$1 $2_5",height:"$8",fontSize:"$label2"}});function ie(n,e){var g,y,D,t,u,p;const l=V(n),i=k((g=e.visibleRange)==null?void 0:g.start,e.timeZone??"UTC"),c=k((y=e.visibleRange)==null?void 0:y.end,e.timeZone??"UTC");I.set(e,{ariaLabel:n["aria-label"]??"",ariaLabelledBy:n["aria-labelledby"]??"",errorMessageId:"",selectedDateDescription:""});const r=C.useRef(!1),a=n.isDisabled||((D=e==null?void 0:e.isNextVisibleRangeInvalid)==null?void 0:D.call(e));a&&r.current&&(r.current=!1,(t=e==null?void 0:e.setFocused)==null||t.call(e,!0));const o=C.useRef(!1),s=n.isDisabled||((u=e.isPreviousVisibleRangeInvalid)==null?void 0:u.call(e));s&&o.current&&(o.current=!1,(p=e.setFocused)==null||p.call(e,!0));const b=W({id:n.id,"aria-label":[n["aria-label"],c].filter(Boolean).join(", "),"aria-labelledby":n["aria-labelledby"]});return{title:i,calendarProps:{...l,...b,role:"group","aria-describedby":n["aria-describedby"]||void 0},nextButtonProps:{onPress:()=>{var f;return(f=e.focusNextPage)==null?void 0:f.call(e)},"aria-label":"Next",isDisabled:a,onFocus:()=>r.current=!0,onBlur:()=>r.current=!1},prevButtonProps:{onPress:()=>{var f;return(f=e.focusPreviousPage)==null?void 0:f.call(e)},"aria-label":"Previous",isDisabled:s,onFocus:()=>o.current=!0,onBlur:()=>o.current=!1}}}const te=S.forwardRef((n,e)=>{var F;const{state:l,hasFooter:i=!1,css:c={},maxValue:r=H("2999-02-17"),isDisabled:a=!1,ctaButtonRender:o,"aria-labelledby":s,"aria-describedby":b,...g}=n,{locale:y}=w(),D=X(e),t=Z({locale:y,isDisabled:a,createCalendar:_,...g,value:n.state?(F=n.state)==null?void 0:F.value:n.value}),u=K({state:t,maxValue:r}),{calendarProps:p,prevButtonProps:f,nextButtonProps:Y}=ie({isDisabled:a,...g},t),{setIsReset:x}=U(),j=()=>{var h;x||(h=n.onChange)==null||h.call(n,null),x==null||x(!0)},L=()=>{var T,B;const h=J(Q());l?l==null||l.setDateValue(h):(T=t.selectDate)==null||T.call(t,h),(B=t.setFocusedDate)==null||B.call(t,h)},G=()=>{switch(u.currentState){case m.DATE:return d(M,{state:t,maxValue:r});case m.MONTH:return d(re,{state:t,monthYearState:u,maxValue:r});case m.YEAR:return d(ne,{state:t,monthYearState:u,maxValue:r});default:return d(M,{state:t,maxValue:r})}},O=C.useCallback(()=>o||d(R,{className:"cdg-calendar-today-btn",onPress:()=>{u.setMonthYearState(m.DATE),L()},children:"Today"}),[o]);return d(N,{children:P(oe,{ref:D,css:c,role:"Calendar","aria-label":"Calendar","aria-labelledby":s,"aria-describedby":b,children:[d(q,{state:t,calendarProps:p,prevButtonProps:f,nextButtonProps:Y,middleButtonProps:u}),G(),i&&P("div",{className:"calendar-footer",children:[d(R,{className:"cdg-calendar-clear-btn",variant:"ghost",onPress:()=>{u.setMonthYearState(m.DATE),j()},children:"Clear"}),O()]})]})})}),Ce=te;export{Ce as C,fe as a,ee as u};
