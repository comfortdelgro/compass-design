import{r as o}from"./index-800efed3.js";import{f as u,g as K,h as b}from"./module-4a931779.js";import{_ as g}from"./_define_property-1764bf98.js";import{$}from"./module-03602ad4.js";let h=Symbol.iterator;class d{*[h](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(t){let e=this.keyMap.get(t);return e?e.prevKey:null}getKeyAfter(t){let e=this.keyMap.get(t);return e?e.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(t){return this.keyMap.get(t)}at(t){const e=[...this.getKeys()];return this.getItem(e[t])}constructor(t){g(this,"keyMap",new Map),this.iterable=t;let e=s=>{if(this.keyMap.set(s.key,s),s.childNodes&&s.type==="section")for(let i of s.childNodes)e(i)};for(let s of t)e(s);let a,n=0;for(let[s,i]of this.keyMap)a?(a.nextKey=s,i.prevKey=a.key):(this.firstKey=s,i.prevKey=void 0),i.type==="item"&&(i.index=n++),a=i,a.nextKey=void 0;this.lastKey=a==null?void 0:a.key}}function m(l){let{filter:t}=l,e=u(l),a=o.useMemo(()=>l.disabledKeys?new Set(l.disabledKeys):new Set,[l.disabledKeys]),n=r=>t?new d(t(r)):new d(r),s=o.useMemo(()=>({suppressTextValueWarning:l.suppressTextValueWarning}),[l.suppressTextValueWarning]),i=K(l,n,s,[t]);return o.useEffect(()=>{e.focusedKey!=null&&!i.getItem(e.focusedKey)&&e.setFocusedKey(null)},[i,e.focusedKey]),{collection:i,disabledKeys:a,selectionManager:new b(i,e)}}function p(l){var t;let[e,a]=$(l.selectedKey,(t=l.defaultSelectedKey)!==null&&t!==void 0?t:null,l.onSelectionChange),n=o.useMemo(()=>e!=null?[e]:[],[e]),{collection:s,disabledKeys:i,selectionManager:r}=m({...l,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:n,onSelectionChange:f=>{let c=f.values().next().value;c===e&&l.onSelectionChange&&l.onSelectionChange(c),a(c)}}),y=e!=null?s.getItem(e):null;return{collection:s,disabledKeys:i,selectionManager:r,selectedKey:e,setSelectedKey:a,selectedItem:y}}export{p as $,d as a,m as b};
