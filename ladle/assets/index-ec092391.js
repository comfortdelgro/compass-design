import{k as y,s as v,r as t,j as x,a as fe}from"./index-bbce26b5.js";import{p as _}from"./pick-child-6b284e39.js";import{u as R}from"./use-dom-ref-b98156a9.js";import{u as pe}from"./useDrag-a18bc1c0.js";const ue=y({from:{transform:"translateX(-100%)"}}),me=y({to:{transform:"translateX(-100%)"}}),he=y({from:{transform:"translateX(100%)"}}),we=y({to:{transform:"translateX(100%)"}}),xe=y({from:{transform:"translateY(100%)"}}),ye=y({to:{transform:"translateY(100%)"}}),be=v("dialog",{position:"fixed",insetBlock:0,padding:0,maxHeight:"100%",maxWidth:"unset",flexDirection:"column",border:"none",boxShadow:"0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1)",zIndex:"48",pointerEvents:"none","&:focus-visible":{outline:"none"},"&::backdrop":{background:"rgba(0, 0, 0, 0.4)"},"&[open]":{display:"flex",pointerEvents:"auto"},"@media (prefers-reduced-motion: no-preference)":{display:"flex",opacity:0,animation:".2s cubic-bezier(.25,0,.3,1) forwards",transition:"height .2s ease, opacity .2s ease","&[open]":{opacity:1,animation:".4s cubic-bezier(.25,0,.3,1) forwards"}},variants:{drawerMode:{"non-modal":{overflow:"hidden"},modal:{}},position:{left:{insetInline:"0 auto",animationName:`${me}`,"&[open]":{animationName:ue}},right:{insetInline:"auto 0",animationName:`${we}`,"&[open]":{animationName:he}},bottom:{height:"40dvh",width:"100%",insetBlock:"auto 0",boxShadow:"0 -4px 6px -1px rgb(0 0 0 / 0.1), 0 -2px 4px -2px rgb(0 0 0 / 0.1)",animationName:`${ye}`,"&[open]":{animationName:xe}}},variant:{default:{height:"100dvh",width:"100%","@sm":{width:"clamp( 30vw, $160, 50vw )"}},h5:{height:"40dvh",maxHeight:"calc(100dvh - 1rem)",borderRadius:"1rem 1rem 0 0","&.drawer-expanded":{height:"calc(100dvh - 1rem)"}}}}}),ge=v("header",{padding:"$4",display:"flex",alignItems:"center",justifyContent:"space-between",gap:"$4"}),ve=v("article",{flex:1,padding:"$4",maxHeight:"100%",width:"100%",overflow:"hidden auto"}),He=v("footer",{padding:"$4"}),Ee=v("div",{paddingBlock:"$4","@sm":{paddingBlock:"$2"},display:"flex",alignItems:"center",justifyContent:"center",width:"100%",cursor:"grab","&:active":{cursor:"grabbing"},"& .expander-line":{display:"block",width:"$10",height:"$1",background:"$grayShades20",borderRadius:"$md"}}),De=({drawerOpen:f,children:p,css:a={},onDragPositionYChange:i,onDragStart:n,onDrag:u,onDragEnd:m,...h})=>{const C=t.useMemo(()=>({direction:"vertical",setCSS:!1,onStart(...c){n==null||n(...c)},onMove(...c){u==null||u(...c)},onEnd(...c){m==null||m(...c)}}),[n,u,m]),{target:d,position:{y:E},setPosition:w}=pe(C);return t.useEffect(()=>{w({x:0,y:0})},[f]),t.useEffect(()=>{i==null||i(E)},[E]),x(Ee,{css:a,ref:d,...h,children:p||x("div",{className:"expander-line"})})},$e=De,Ne=t.forwardRef(({children:f,css:p={},...a},i)=>{const n=R(i);return x(He,{css:p,ref:n,...a,children:f})}),G=Ne,ke=t.forwardRef(({children:f,css:p={},...a},i)=>{const n=R(i);return x(ge,{css:p,ref:n,...a,children:f})}),W=ke,T=100,U=67,Ae=t.forwardRef((f,p)=>{const a=typeof window<"u"?window.innerHeight:void 0,i=t.useMemo(()=>typeof document<"u"?document.body.style.overflow:null,[]),{drawerMode:n="modal",className:u="",css:m={},style:h,children:C,open:d=!1,onClose:E,onMouseDown:w,preventFocus:c=!0,preventClose:D=!1,variant:$="default",position:q="right",expanderCSS:J={},onExpandChange:I,expandedPoint:N=T,expandableLine:k=U,disableResize:K=!1,disableDragClose:L=!1,disableAddBodyAttr:Q=!1,...V}=f,F=n==="non-modal"?!0:Q,Z=$==="h5"?"bottom":q,O=R(p),e=O.current,[r,Y]=t.useState(0),[l,M]=t.useState(),[B,A]=t.useState(e==null?void 0:e.offsetHeight),[ee,te]=t.useState(!1),{expandedPosition:P,expandablePosition:X}=t.useMemo(()=>{if(!a)return{expandedPosition:0,expandablePosition:0};const o=Math.floor(r/a*100);let s=N>100||N<0?T:N,g=k>100||k<0?U:k;return s<o&&(s=o),s<g&&(g=s),{expandedPosition:Math.floor(a*(s/100)),expandablePosition:Math.floor(a*(g/100))}},[N,k,a,r]),{child:re,rest:oe}=_(C,W),{child:ne,rest:ae}=_(oe,G),b=t.useCallback(o=>{typeof document>"u"||!e||(A(r),document.body.style.setProperty("overflow",i),document.body.removeAttribute("inert"),e.close(o))},[e,r]),ie=t.useCallback(o=>{e&&(w==null||w(o),!(!(o.target instanceof HTMLDialogElement)||D)&&o.target.nodeName==="DIALOG"&&b("dismiss"))},[e,D,w,b]),se=t.useCallback(o=>{D&&o.preventDefault()},[D]),de=t.useCallback(()=>{e&&e.style.setProperty("transition-property","opacity")},[e]),le=t.useCallback(o=>{if(!e)return;let s=r;l&&l>r&&(s=l),A(s-o)},[e,r,l]),ce=t.useCallback((o,s,g)=>{if(!window.innerHeight||!d||!e)return;e.style.setProperty("transition-property","height, opacity");let j=r;l&&l>r&&(j=l);const z=j-s.y,S=z>X;if(te(S),I==null||I(S),g({x:0,y:0}),S&&P&&l===r){M(P),A(P);return}S||M(r),!L&&z<r-100&&b()},[e,d,L,r,l,P,X]);return t.useEffect(()=>{if(!(typeof document>"u"||!e)){if(d){F?(document.body.style.setProperty("overflow",i),document.body.removeAttribute("inert")):(document.body.style.setProperty("overflow","hidden"),document.body.setAttribute("inert","")),c||e.setAttribute("inert",""),n==="modal"?e.showModal():e.show(),e.removeAttribute("inert");return}b()}},[d,e,F,c,b]),t.useEffect(()=>{!d&&r&&A(r),M(r)},[d,r]),t.useEffect(()=>{Y((e==null?void 0:e.offsetHeight)??0)},[e]),fe(be,{ref:O,className:`${u} ${ee?"drawer-expanded":""}`,css:m,drawerMode:n,variant:$,position:Z,...V,style:{...h,height:$==="h5"&&B?`${B}px`:h==null?void 0:h.height},onMouseDown:ie,onClose:E,onCancel:se,children:[$==="h5"&&!K&&x($e,{drawerOpen:d,className:"drawer-expander",css:J,onDragStart:de,onDragPositionYChange:le,onDragEnd:ce}),re,x(ve,{className:"drawer-content",children:ae}),ne]})}),H=Ae;H.Header=W;H.Footer=G;H.Header.displayName="Drawer.Header";H.Footer.displayName="Drawer.Footer";H.displayName="Drawer";export{H as D};
