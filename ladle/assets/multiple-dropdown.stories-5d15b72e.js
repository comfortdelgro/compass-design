import{h as P}from"./index-ba5d2b59.js";import{s as R,R as l,a,j as e,F as ie}from"./index-56d078fc.js";import{a as H}from"./index-43a44c94.js";import{C as ae}from"./components-d15b83dd.js";import{S as de,a as se,B as ce,b as he,p as ue,c as fe,t as ge,L as me,P as pe,I as ye,D as G,d as ke,e as Ce}from"./index-2db005e5.js";import{S as be,a as N}from"./dropdown.styles-8be1de3b.js";import{u as L}from"./use-dom-ref-da3a6937.js";import"./index.es-af965b1b.js";import"./pick-child-10d40204.js";const ve=R("div",{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:"$6",height:"$6",div:{border:"1px solid #323130",borderRadius:"3px",width:"$4",height:"$4",display:"flex",alignItems:"center",justifyContent:"center",background:"#FFFFFF"},variants:{isSelected:{true:{div:{border:0,background:"$cdgBlue100",svg:{display:"block"}}},false:{div:{svg:{display:"none"}}}}}});function we({item:r,currentKeys:s,focusKey:d,disabledKeys:h,onHover:f,onSelect:k}){const g=l.useRef(null),v=l.useMemo(()=>r.key?s.includes(r.key):!1,[s]),S=l.useMemo(()=>d===r.key,[d]),C=l.useMemo(()=>r.key?h.includes(r.key):!1,[h]);return a(de,{ref:g,isFocused:S,isSelected:v,onClick:()=>{r.key&&!C&&k(r.key)},onMouseOver:()=>f(r.key),onMouseOut:()=>f(-1),isDisabled:C,children:[e(se,{children:r.props.children}),e(ve,{isSelected:v,children:e("div",{children:e(Ie,{})})})]})}const Ie=()=>e("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:e("path",{d:"M9.39158 1.86239C9.64736 2.12284 9.64736 2.54372 9.39158 2.80416L4.15319 8.13808C3.89741 8.39853 3.48407 8.39853 3.22829 8.13808L0.608522 5.47112C0.352823 5.21068 0.352823 4.7898 0.608522 4.52935C0.864262 4.26891 1.27883 4.26891 1.53461 4.52935L3.67232 6.72334L8.46668 1.86239C8.72246 1.60153 9.1358 1.60153 9.39158 1.86239Z",fill:"white"})});function Se(r){const s=l.useRef(null),{focusKey:d,isLoading:h,collection:f,currentKeys:k,disabledKeys:g,rootChildren:v,listBoxRef:S=s,sectionCollection:C,onHover:x,onSelect:E,onLoadMore:w}=r;return e(ce,{isLoading:h,listBoxRef:S,collection:f,sectionCollection:C,rootChildren:v,onLoadMore:w,renderOptions:A=>A.map(m=>a("div",{children:[m.title&&e(he,{children:m.title}),m.children.map($=>$?e(we,{item:$,focusKey:d,currentKeys:k,disabledKeys:g,onHover:x,onSelect:E},$.key):null)]},m.id))})}const xe=R("div",{width:"100%",label:{fontSize:"$label1",fontWeight:"$semibold",marginBottom:"$2",display:"inline-block",width:"100%",span:{marginLeft:"$1",color:"$danger"}}}),$e=R("div",{width:"100%",border:"1px solid #E6E6E6",borderRadius:"$md",cursor:"text",display:"flex",alignItems:"center",padding:"$3 $4",gap:"$1",backgroundColor:"#FFFFFF",".dropdown-icon":{cursor:"pointer",flexShrink:0,width:"$6",height:"$6",display:"flex",justifyContent:"center",alignItems:"center",padding:0,border:"none",background:"transparent",svg:{width:"$4",height:"$4"}},input:{height:"$6_5",width:4,padding:0,margin:0,border:"none","&:focus":{outline:"none"},"&:focus-visible":{outline:"none"}},variants:{isEmpty:{true:{button:{p:{color:"#B4B4B4"}}}},isDisabled:{true:{cursor:"not-allowed !important","& > *":{cursor:"not-allowed !important"}}},isErrored:{true:{borderWidth:1,borderColor:"$danger","&:focus":{borderColor:"$danger",outlineColor:"$danger"},"&:focus-within":{borderColor:"$danger",outlineColor:"$danger"}}}}}),De=R("div",{flexGrow:1,alignItems:"center",minHeight:"$7",display:"flex",gap:"$2_5",flexWrap:"wrap",p:{color:"#B4B4B4",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:"$label1",fontWeight:"$semibold",height:"$6",display:"flex",alignItems:"center",flexGrow:1,border:"none",textAlign:"start",padding:0,margin:0}}),Re=R("div",{border:"1px solid #EDEBE9",borderRadius:"$full",padding:"$1 $3",fontSize:"$label1",cursor:"default",fontWeight:"$semibold",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2147483640,gap:"$2",div:{width:"fit-content",height:"fit-content"}}),Ee=()=>a("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:[e("g",{clipPath:"url(#clip0_5299_13653)",children:e("path",{d:"M9.11731 7.88215C9.45908 8.22392 9.45908 8.77759 9.11731 9.11936C8.94779 9.29024 8.72359 9.375 8.49938 9.375C8.27518 9.375 8.05153 9.28956 7.88092 9.11867L4.99966 6.23892L2.11867 9.11799C1.94779 9.29024 1.72386 9.375 1.49993 9.375C1.276 9.375 1.05235 9.29024 0.881328 9.11799C0.539557 8.77622 0.539557 8.22255 0.881328 7.88078L3.76313 4.99897L0.881328 2.11854C0.539557 1.77677 0.539557 1.2231 0.881328 0.881328C1.2231 0.539557 1.77677 0.539557 2.11854 0.881328L4.99966 3.7645L7.88146 0.882695C8.22323 0.540925 8.7769 0.540925 9.11867 0.882695C9.46044 1.22446 9.46044 1.77813 9.11867 2.1199L6.23687 5.00171L9.11731 7.88215Z",fill:"#3B3A39"})}),e("defs",{children:e("clipPath",{id:"clip0_5299_13653",children:e("rect",{width:"10",height:"10",fill:"white"})})})]});function Ke(r,s){if(s!=null&&s.length>0){const d=[];for(const h of s)d.push(h);return d}else if(r!=null&&r.length>0){const d=[];for(const h of r)d.push(h);return d}return[]}const Fe=l.forwardRef((r,s)=>{const{css:d={},isOpen:h,children:f,isErrored:k,isDisabled:g,isRequired:v,isReadOnly:S,helperText:C,defaultOpen:x,errorMessage:E,selectedKeys:w,icon:A=e(ye,{}),disabledKeys:m=[],isLoading:$=!1,defaultSelectedKeys:U=[],onLoadMore:X=()=>{}}=r,[b,I]=l.useState(!1),[K,Z]=l.useState(""),[j,z]=l.useState(!1),[c,B]=l.useState(Ke(U,w)),[p,D]=l.useState(),T=l.useRef(!0),J=L(s),u=L(null),Q=L(null),M=L(null),Y=l.useRef(null),y=l.useMemo(()=>ue(f,G),[f]),V=l.useMemo(()=>fe(f),[f]),W=l.useMemo(()=>!j||K===""?y:y.filter(t=>{const o=ge(t);return o==null?void 0:o.toLowerCase().includes(K.toLowerCase())}),[y,K,j]),F=l.useMemo(()=>new me(y,m),[y,m]),O=l.useMemo(()=>{const t=[];return y.length>0&&c&&c.length>0&&c.forEach(o=>{const i=y.find(le=>le.key===o);t.push({key:o,rendered:i==null?void 0:i.props.children})}),t},[c,y,c.length]);l.useEffect(()=>{w&&B(w)},[w]),l.useEffect(()=>{var t;c.length>0&&((t=r.onSelectionChange)==null||t.call(r,c))},[c]),l.useEffect(()=>{!h&&x&&I(x),h&&I(h)},[h]),l.useEffect(()=>{var t,o,i;D([...c].pop()),(t=r.onOpenChange)==null||t.call(r,b),b?((o=r.onFocus)==null||o.call(r),T.current=!1):T.current||(i=r.onBlur)==null||i.call(r)},[b]),l.useEffect(()=>{var t,o;b?((t=M.current)==null||t.focus(),u.current&&(u.current.style.outlineColor=k?"#A4262C":"-webkit-focus-ring-color",u.current.style.outlineStyle="solid",u.current.style.outlineWidth="1px")):((o=M.current)==null||o.blur(),u.current&&(u.current.style.outlineColor=k?"#A4262C":"inherit",u.current.style.outlineColor="inherit",u.current.style.outlineStyle="inherit",u.current.style.outlineWidth="inherit"))},[b]);const ee=t=>{const o=new Set(c);c.includes(t)&&(o.delete(t),B([...o]))},ne=t=>{if(u.current){const o=t.target.value;if(z(!0),Z(o),o!==""){const i=document.createElement("div");i.style.position="absolute",i.style.top="0",i.style.left="-9999px",i.style.overflow="hidden",i.style.visibility="hidden",i.style.whiteSpace="nowrap",i.style.height="0",i.style.width="fit-content",i.style.maxWidth=`${u.current.clientWidth-62}px`,i.innerHTML=o.replace(/\s/g,"&nbsp;"),document.body.appendChild(i),t.target.focus(),t.target.style.width=`${i.clientWidth+4}px`,i.remove()}else t.target.style.width="4px"}},te=t=>{switch(t.key){case"ArrowUp":case"ArrowLeft":{t.preventDefault();const o=p!=null&&p!=-1?F.getKeyAbove(p):F.getFirstKey();o&&D(o);break}case"ArrowDown":case"ArrowRight":{t.preventDefault();const o=p!=null&&p!=-1?F.getKeyBelow(p):F.getFirstKey();o&&D(o);break}case"Enter":{t.preventDefault(),p&&(_(p),I(!1));break}case"Escape":{t.preventDefault(),I(!1);break}}},re=()=>{z(!1),I(!1)},_=t=>{if(!S){const o=new Set(c);c.includes(t)?o.delete(t):o.add(t),B([...o]),D(t)}},oe=t=>{t&&D(t)},q=()=>{g||I(!0)};return a(xe,{css:d,ref:J,children:[r.label&&a("label",{onClick:q,children:[r.label,v&&e("span",{children:"*"})]}),a($e,{ref:u,isErrored:!!k,isDisabled:!!g,onClick:q,children:[a(De,{children:[O.length===0&&!b&&e("p",{children:r.placeholder}),O.length>0&&O.map(t=>{const o=g||m.includes(t.key);return a(Re,{style:{cursor:g?"not-allowed":"pointer"},children:[e("div",{children:t.rendered}),o?e(ie,{}):e("div",{onClick:()=>{!g&&![...m].includes(t.key)&&ee(t.key)},children:e(Ee,{})})]},t.key)}),!g&&e("input",{type:"text",ref:M,value:K,onChange:ne})]}),e("div",{className:"dropdown-icon",children:A})]}),e(be,{children:W&&W.length>0&&b&&e(pe,{popoverRef:Q,close:re,triggerRef:u,handleKeyDown:te,children:e(Se,{focusKey:p,isLoading:$,collection:W,rootChildren:f,listBoxRef:Y,currentKeys:c,disabledKeys:m,sectionCollection:V,onHover:oe,onSelect:_,onLoadMore:X})})}),E&&e(N,{error:!!k,children:E}),C&&e(N,{children:C})]})}),n=Fe;n.Item=G;n.Header=ke;n.Section=Ce;n.displayName="MultipleDropdown";const ze=()=>{const[r,s]=l.useState([]);return a(ae,{children:[e("h3",{children:"Controlled"}),a(n,{label:"Favorite Animal",disabledKeys:["cat"],placeholder:"Choose an animal",selectedKeys:r,defaultSelectedKeys:["cat"],isRequired:!0,onSelectionChange:d=>s(d),onBlur:()=>console.log("blur"),onFocus:()=>console.log("focus"),children:[a(n.Item,{children:[e(H,{icon:P,style:{marginRight:5}}),"Red Panda"]},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"UnControlled"}),a(n,{label:"Favorite Animal",disabledKeys:["snake"],defaultSelectedKeys:["snake"],placeholder:"Choose an animal",children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Errored"}),a(n,{label:"Favorite Animal",disabledKeys:["snake"],placeholder:"Choose an animal",isErrored:!0,errorMessage:"Error Message",helperText:"Helper Message",children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Loading"}),a(n,{label:"Favorite Animal",placeholder:"Choose an animal",isLoading:!0,children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"With Header"}),a(n,{disabledKeys:["snake"],label:"Favorite Animal",placeholder:"Choose an animal",children:[e(n.Header,{children:a("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"8px 16px",borderBottom:"2px solid #EDEBE9"},children:[e("span",{style:{color:"#323130",fontSize:"12px",fontWeight:"bold",padding:0,margin:0},children:"Filter"}),e("button",{style:{fontSize:"12px",fontWeight:"bold",color:"#A4262C",border:0,cursor:"pointer",backgroundColor:"transparent"},children:"Clear"})]})}),e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"With Icon"}),a(n,{label:"Favorite Animal",placeholder:"Choose an animal",icon:e(H,{icon:P}),children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Disabled"}),a(n,{label:"Favorite Animal",disabledKeys:["cat"],placeholder:"Choose an animal",selectedKeys:r,defaultSelectedKeys:["cat"],isRequired:!0,onSelectionChange:d=>s(d),isDisabled:!0,children:[a(n.Item,{children:[e(H,{icon:P,style:{marginRight:5}}),"Red Panda"]},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{ze as Default};
