import{B as z}from"./bug-8668f4ae.js";import{s as L,R as i,a,j as e,F as ye}from"./index-6261c28d.js";import{C as be}from"./components-2b432f73.js";import{S as ke,a as ve,B as Z,b as Q,c as Ce,P as we,D as Ie}from"./index.styles-233bc1c4.js";import{p as Se,a as xe,t as Re,L as $e,I as De,D as Y,b as Le}from"./utils-8bdc36e3.js";import{u as Ke,a as Fe,b as Be,D as Ee,c as Me,z as Ae}from"./floating-ui.react.esm-9016ad68.js";import{S as J}from"./dropdown.styles-fb6d7bd0.js";import{u as B}from"./use-dom-ref-ae33fb80.js";import"./pick-child-c895a700.js";const Oe=L("div",{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:"$6",height:"$6",div:{border:"1px solid #323130",borderRadius:"3px",width:"$4",height:"$4",display:"flex",alignItems:"center",justifyContent:"center",background:"#FFFFFF"},variants:{isSelected:{true:{div:{border:0,background:"$cdgBlue100",svg:{display:"block"}}},false:{div:{svg:{display:"none"}}}}}});function V({item:t,currentKeys:s,focusKey:d,disabledKeys:c,onHover:h,onSelect:C}){const u=i.useRef(null),g=i.useMemo(()=>t.key?s.includes(t.key):!1,[s]),w=i.useMemo(()=>d===t.key,[d]),p=i.useMemo(()=>t.key?c.includes(t.key):!1,[c]);return a(ke,{ref:u,isFocused:w,isSelected:g,onClick:()=>{t.key&&!p&&C(t.key)},onMouseOver:()=>h(t.key),onMouseOut:()=>h(-1),isDisabled:p,children:[e(ve,{children:t.props.children}),e(Oe,{isSelected:g,children:e("div",{children:e(Pe,{})})})]})}const Pe=()=>e("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:e("path",{d:"M9.39158 1.86239C9.64736 2.12284 9.64736 2.54372 9.39158 2.80416L4.15319 8.13808C3.89741 8.39853 3.48407 8.39853 3.22829 8.13808L0.608522 5.47112C0.352823 5.21068 0.352823 4.7898 0.608522 4.52935C0.864262 4.26891 1.27883 4.26891 1.53461 4.52935L3.67232 6.72334L8.46668 1.86239C8.72246 1.60153 9.1358 1.60153 9.39158 1.86239Z",fill:"white"})});function We(t){const s=i.useRef(null),{focusKey:d,isLoading:c,collection:h,currentKeys:C,disabledKeys:u,rootChildren:g,listBoxRef:w=s,sectionCollection:p,onHover:I,onSelect:y,onLoadMore:b}=t;return e(Z,{isLoading:c,listBoxRef:w,collection:h,sectionCollection:p,rootChildren:g,onLoadMore:b,renderOptions:E=>E.map(S=>a("div",{children:[S.title&&e(Q,{children:S.title}),S.children.map(k=>k?e(V,{item:k,focusKey:d,currentKeys:C,disabledKeys:u,onHover:I,onSelect:y},k.key):null)]},S.id))})}const He=L("div",{width:"100%",label:{fontSize:"$label1",fontWeight:"$semibold",marginBottom:"$2",display:"inline-block",width:"100%",span:{marginLeft:"$1",color:"$danger"}}}),ze=L("div",{width:"100%",minHeight:"$11",borderRadius:"$md",cursor:"text",display:"flex",alignItems:"center",padding:"$2 $4",gap:"$1",backgroundColor:"#FFFFFF",transition:"$default",borderWidth:"1px",borderStyle:"solid",borderColor:"#E6E6E6",".dropdown-icon":{cursor:"pointer",flexShrink:0,width:"$6",height:"$6",display:"flex",justifyContent:"center",alignItems:"center",padding:0,border:"none",background:"transparent",svg:{width:"$4",height:"$4"}},"&:focus-within":{borderColor:"$cdgBlue"},input:{height:"$6_5",width:4,padding:0,margin:0,border:"none","&:focus":{outline:"none"},"&:focus-visible":{outline:"none"}},variants:{isEmpty:{true:{button:{p:{color:"#B4B4B4"}}}},isDisabled:{true:{cursor:"not-allowed !important","& > *":{cursor:"not-allowed !important"}}},isErrored:{true:{borderColor:"$danger","&:focus-within":{borderColor:"$danger"}}}}}),je=L("div",{flexGrow:1,alignItems:"center",minHeight:"$7",display:"flex",gap:"$2_5",flexWrap:"wrap",p:{color:"#B4B4B4",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:"$label1",fontWeight:"$semibold",height:"$6",display:"flex",alignItems:"center",flexGrow:1,border:"none",textAlign:"start",padding:0,margin:0}}),Ne=L("div",{border:"1px solid #EDEBE9",borderRadius:"$full",padding:"$1 $3",fontSize:"$label1",cursor:"default",fontWeight:"$semibold",display:"flex",justifyContent:"center",alignItems:"center",gap:"$2",div:{width:"fit-content",height:"fit-content"}}),_e=i.forwardRef((t,s)=>{const{collection:d,rootChildren:c,sectionCollection:h,listBoxRef:C,isLoading:u,numberOfRows:g,onLoadMore:w}=t,p=B(s);return g&&g>=0?e(Ce,{ref:p,children:e(Z,{isLoading:u,collection:d,listBoxRef:C,rootChildren:c,sectionCollection:h,renderOptions:I=>I.slice(0,Math.min(g,d.length)).map(y=>a("div",{children:[y.title&&e(Q,{children:y.title}),y.children.map(b=>b?e(V,{item:b,focusKey:void 0,currentKeys:[],disabledKeys:[],onHover:()=>{},onSelect:()=>{}},b.key):null)]},y.id)),onLoadMore:w})}):null}),Te=_e,qe=()=>a("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:[e("g",{clipPath:"url(#clip0_5299_13653)",children:e("path",{d:"M9.11731 7.88215C9.45908 8.22392 9.45908 8.77759 9.11731 9.11936C8.94779 9.29024 8.72359 9.375 8.49938 9.375C8.27518 9.375 8.05153 9.28956 7.88092 9.11867L4.99966 6.23892L2.11867 9.11799C1.94779 9.29024 1.72386 9.375 1.49993 9.375C1.276 9.375 1.05235 9.29024 0.881328 9.11799C0.539557 8.77622 0.539557 8.22255 0.881328 7.88078L3.76313 4.99897L0.881328 2.11854C0.539557 1.77677 0.539557 1.2231 0.881328 0.881328C1.2231 0.539557 1.77677 0.539557 2.11854 0.881328L4.99966 3.7645L7.88146 0.882695C8.22323 0.540925 8.7769 0.540925 9.11867 0.882695C9.46044 1.22446 9.46044 1.77813 9.11867 2.1199L6.23687 5.00171L9.11731 7.88215Z",fill:"#3B3A39"})}),e("defs",{children:e("clipPath",{id:"clip0_5299_13653",children:e("rect",{width:"10",height:"10",fill:"white"})})})]});function X(t,s){if(s!=null&&s.length>0){const d=[];for(const c of s)d.push(c);return d}else if(t!=null&&t.length>0){const d=[];for(const c of t)d.push(c);return d}return[]}const Ue=i.forwardRef((t,s)=>{const{css:d={},isOpen:c,children:h,isErrored:C,isDisabled:u,isRequired:g,isReadOnly:w,helperText:p,defaultOpen:I,errorMessage:y,selectedKeys:b,numberOfRows:E,icon:S=e(De,{}),disabledKeys:k=[],isLoading:j=!1,defaultSelectedKeys:M=[],onLoadMore:ee=()=>{},onBlur:ne=()=>{},onFocus:te=()=>{}}=t,[x,R]=i.useState(!1),[$,re]=i.useState(""),[N,A]=i.useState(!1),[f,O]=i.useState(X(M,b)),[v,D]=i.useState(),oe=B(s),K=B(null),P=B(null),le=i.useRef(null),ie=i.useRef(null),_=i.useRef(null),{refs:T,floatingStyles:ae,context:de}=Ke({open:x,onOpenChange:R,middleware:[Ee(8),Me()],whileElementsMounted:Ae}),se=Fe(de),{getReferenceProps:ce,getFloatingProps:he}=Be([se]),m=i.useMemo(()=>Se(h,Y),[h]),q=i.useMemo(()=>xe(h),[h]),W=i.useMemo(()=>!N||$===""?m:m.filter(r=>{const o=Re(r);return o==null?void 0:o.toLowerCase().includes($.toLowerCase())}),[m,$,N]),F=i.useMemo(()=>new $e(m,k),[m,k]),H=i.useMemo(()=>{const r=[];return m.length>0&&f&&f.length>0&&f.forEach(o=>{const l=m.find(pe=>pe.key===o);r.push({key:o,rendered:l==null?void 0:l.props.children})}),r},[f,m,f.length]);i.useEffect(()=>{O(X(M,b))},[JSON.stringify(b),JSON.stringify(M)]),i.useEffect(()=>{!c&&I&&R(I),c&&R(c)},[c]),i.useEffect(()=>{var r,o,l;D([...f].pop()),(r=t.onOpenChange)==null||r.call(t,x),x?(o=P.current)==null||o.focus():(A(!1),(l=P.current)==null||l.blur(),A(!1))},[x]);const ue=r=>{var l;const o=new Set(f);f.includes(r)&&(o.delete(r),O([...o]),(l=t.onSelectionChange)==null||l.call(t,[...o]))},fe=r=>{if(K.current){const o=r.target.value;if(A(!0),re(o),o!==""){const l=document.createElement("div");l.style.position="absolute",l.style.top="0",l.style.left="-9999px",l.style.overflow="hidden",l.style.visibility="hidden",l.style.whiteSpace="nowrap",l.style.height="0",l.style.width="fit-content",l.style.maxWidth=`${K.current.clientWidth-62}px`,l.innerHTML=o.replace(/\s/g,"&nbsp;"),document.body.appendChild(l),r.target.focus(),r.target.style.width=`${l.clientWidth+4}px`,l.remove()}else r.target.style.width="4px"}},ge=r=>{switch(r.key){case"ArrowUp":case"ArrowLeft":{r.preventDefault();const o=v!=null&&v!=-1?F.getKeyAbove(v):F.getFirstKey();o&&D(o);break}case"ArrowDown":case"ArrowRight":{r.preventDefault();const o=v!=null&&v!=-1?F.getKeyBelow(v):F.getFirstKey();o&&D(o);break}case"Enter":{r.preventDefault(),v&&(U(v),R(!1));break}case"Escape":{r.preventDefault(),R(!1);break}}},U=r=>{var o;if(!w){const l=new Set(f);f.includes(r)?l.delete(r):l.add(r),O([...l]),(o=t.onSelectionChange)==null||o.call(t,[...l]),D(r)}},me=r=>{r&&D(r)},G=()=>{u||R(!0)};return a(He,{css:d,ref:oe,children:[t.label&&a("label",{onClick:G,children:[t.label,g&&e("span",{children:"*"})]}),e("div",{ref:T.setReference,...ce,children:a(ze,{ref:K,isErrored:!!C,isDisabled:!!u,onClick:G,children:[a(je,{children:[H.length===0&&$===""&&!x&&e("p",{children:t.placeholder}),H.length>0&&H.map(r=>{const o=u||k.includes(r.key);return a(Ne,{style:{cursor:u?"not-allowed":"pointer"},children:[e("div",{children:r.rendered}),o?e(ye,{}):e("div",{onClick:()=>{!u&&![...k].includes(r.key)&&ue(r.key)},children:e(qe,{})})]},r.key)}),!u&&e("input",{type:"text",ref:P,value:$,onChange:fe})]}),e("div",{className:"dropdown-icon",children:S})]})}),W&&x&&e("div",{className:"Popover",ref:T.setFloating,style:{...ae,zIndex:3},...he,children:e(we,{isEmpty:W.length===0,visualizeRef:_,triggerRef:K,onBlur:ne,onFocus:te,handleKeyDown:ge,children:e(We,{focusKey:v,isLoading:j,collection:W,rootChildren:h,listBoxRef:le,currentKeys:f,disabledKeys:k,sectionCollection:q,onHover:me,onSelect:U,onLoadMore:ee})})}),e(Te,{ref:ie,isLoading:j,collection:m,listBoxRef:_,rootChildren:h,numberOfRows:E,sectionCollection:q,onLoadMore:()=>{}}),y&&e(J,{error:!!C,children:y}),p&&e(J,{children:p})]})}),n=Ue;n.Item=Y;n.Header=Ie;n.Section=Le;n.displayName="MultipleDropdown";const tn=()=>{const[t,s]=i.useState([]);return a(be,{children:[e("h3",{children:"Controlled"}),a(n,{label:"Favorite Animal",disabledKeys:["cat"],placeholder:"Choose an animal",selectedKeys:t,defaultSelectedKeys:["cat"],isRequired:!0,onSelectionChange:d=>s(d),onBlur:()=>console.log("blur"),onFocus:()=>console.log("focus"),children:[a(n.Item,{children:[e(z,{style:{marginRight:5}}),"Red Panda"]},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"UnControlled"}),a(n,{label:"Favorite Animal",disabledKeys:["snake"],defaultSelectedKeys:["snake"],placeholder:"Choose an animal",children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Errored"}),a(n,{label:"Favorite Animal",disabledKeys:["snake"],placeholder:"Choose an animal",isErrored:!0,errorMessage:"Error Message",helperText:"Helper Message",children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Loading"}),a(n,{label:"Favorite Animal",placeholder:"Choose an animal",isLoading:!0,children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"With Header"}),a(n,{disabledKeys:["snake"],label:"Favorite Animal",placeholder:"Choose an animal",children:[e(n.Header,{children:a("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"8px 16px",borderBottom:"2px solid #EDEBE9"},children:[e("span",{style:{color:"#323130",fontSize:"12px",fontWeight:"bold",padding:0,margin:0},children:"Filter"}),e("button",{style:{fontSize:"12px",fontWeight:"bold",color:"#A4262C",border:0,cursor:"pointer",backgroundColor:"transparent"},children:"Clear"})]})}),e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"With Icon"}),a(n,{label:"Favorite Animal",placeholder:"Choose an animal",icon:e(z,{}),children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Number of rows"}),a(n,{label:"Favorite Animal",placeholder:"Choose an animal",numberOfRows:4,children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Disabled"}),a(n,{label:"Favorite Animal",disabledKeys:["cat"],placeholder:"Choose an animal",selectedKeys:t,defaultSelectedKeys:["cat"],isRequired:!0,onSelectionChange:d=>s(d),isDisabled:!0,children:[a(n.Item,{children:[e(z,{style:{marginRight:5}}),"Red Panda"]},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{tn as Default};
