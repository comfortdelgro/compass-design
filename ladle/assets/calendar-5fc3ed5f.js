import{n as M,d as S,$ as V,s as j,e as O,K as z}from"./import-7720de84.js";import{s as D,j as d,F as k,r as p,R as H,a as T}from"./index-2982a9a3.js";import"./index-a40598ac.js";import{z as $,b as I,A as B,l as L,v as _,B as U,C as W,o as Z,E as K,F as R}from"./useCalendarState-f192cb43.js";import{u as q}from"./use-dom-ref-02339d1d.js";import{B as F}from"./button-4f4384f8.js";const w=D("div",{display:"grid",gridTemplateColumns:"repeat(3,1fr)",marginTop:"12px"}),A=D("button",{width:"94px",height:"47.5px",backgroundColor:"transparent",border:"none",borderRadius:"$md",cursor:"pointer",fontSize:"$link3",color:"$primaryText","&:hover, &:focus-visible":{backgroundColor:"$cdgBlue100",color:"$primaryText !important",fontWeight:"normal !important",outline:"none"},"&:disabled, &:disabled:hover":{backgroundColor:"inherit",color:"$gray50 !important",cursor:"not-allowed"},"&.highlighted":{color:"$cdgBlue100",fontWeight:"bold"}}),J=a=>{const{state:e,monthYearState:r}=a,s=(r==null?void 0:r.months)??[],b=n=>{const o=e.focusedDate;return()=>{var l;(l=e.setFocusedDate)==null||l.call(e,new M((o==null?void 0:o.year)??new Date().getFullYear(),s.indexOf(n)+1,1)),r==null||r.setMonthYearState($.DATE)}};return d(w,{children:s.map(n=>d(A,{type:"button","aria-label":n,onClick:b(n),children:n},n))})},Q=J,X=a=>{const{state:e,monthYearState:r,maxValue:s}=a,b=o=>{const l=e.focusedDate;return()=>{var c;(c=e.setFocusedDate)==null||c.call(e,new M(o,(l==null?void 0:l.month)??new Date().getMonth()+1,1)),r==null||r.nextState()}},n=new Date;return d(w,{children:Array.isArray(r==null?void 0:r.renderedYears)?r==null?void 0:r.renderedYears.map(o=>{const l=(()=>{var f;return s?(s==null?void 0:s.year)<o:e.minValue?((f=e.minValue)==null?void 0:f.year)>o:!1})(),c=o===n.getFullYear();return d(A,{type:"button",className:`calendar-year-cell ${l?"disabled":""} ${c?"highlighted":""}`,"aria-label":o.toString(),onClick:b(o),disabled:l,children:o},o)}):d(k,{})})},ee=X,re=D("div",{width:"fit-content",backgroundColor:"$background",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.08)",borderRadius:"$md",padding:"$4","& .calendar-footer":{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"$2",paddingTop:"$6",marginTop:"$6",borderTop:"1px solid $gray60"},"& .calendar-footer button":{padding:"$1 $2_5",height:"$8",fontSize:"$label2"}});function ae(a,e){var h,i,u,C,x,m;const r=I(a),s=B((h=e.visibleRange)==null?void 0:h.start,e.timeZone??"UTC"),b=B((i=e.visibleRange)==null?void 0:i.end,e.timeZone??"UTC");L.set(e,{ariaLabel:a["aria-label"]??"",ariaLabelledBy:a["aria-labelledby"]??"",errorMessageId:"",selectedDateDescription:""});const n=p.useRef(!1),o=a.isDisabled||((u=e==null?void 0:e.isNextVisibleRangeInvalid)==null?void 0:u.call(e));o&&n.current&&(n.current=!1,(C=e==null?void 0:e.setFocused)==null||C.call(e,!0));const l=p.useRef(!1),c=a.isDisabled||((x=e.isPreviousVisibleRangeInvalid)==null?void 0:x.call(e));c&&l.current&&(l.current=!1,(m=e.setFocused)==null||m.call(e,!0));const f=_({id:a.id,"aria-label":[a["aria-label"],b].filter(Boolean).join(", "),"aria-labelledby":a["aria-labelledby"]});return{title:s,calendarProps:{...r,...f,role:"group","aria-describedby":a["aria-describedby"]||void 0},nextButtonProps:{onPress:()=>{var t;return(t=e.focusNextPage)==null?void 0:t.call(e)},"aria-label":"Next",isDisabled:o,onFocus:()=>n.current=!0,onBlur:()=>n.current=!1},prevButtonProps:{onPress:()=>{var t;return(t=e.focusPreviousPage)==null?void 0:t.call(e)},"aria-label":"Previous",isDisabled:c,onFocus:()=>l.current=!0,onBlur:()=>l.current=!1}}}const ne=H.forwardRef((a,e)=>{var v;const{state:r,hasFooter:s=!1,css:b={},maxValue:n=S("2999-02-17"),isDisabled:o=!1,ctaButtonRender:l,...c}=a,{locale:f}=V(),h=q(e),i=U({locale:f,isDisabled:o,createCalendar:j,...c,value:a.state?(v=a.state)==null?void 0:v.value:a.value}),u=W({state:i,maxValue:n}),{calendarProps:C,prevButtonProps:x,nextButtonProps:m}=ae({isDisabled:o,...c},i),{setIsReset:t}=Z(),E=()=>{var g;t||(g=a.onChange)==null||g.call(a,null),t==null||t(!0)},N=()=>{var y,P;const g=O(z());r?r==null||r.setDateValue(g):(y=i.selectDate)==null||y.call(i,g),(P=i.setFocusedDate)==null||P.call(i,g)},Y=()=>{switch(u.currentState){case $.DATE:return d(R,{state:i,maxValue:n});case $.MONTH:return d(Q,{state:i,monthYearState:u,maxValue:n});case $.YEAR:return d(ee,{state:i,monthYearState:u,maxValue:n});default:return d(R,{state:i,maxValue:n})}},G=p.useCallback(()=>l||d(F,{className:"cdg-calendar-today-btn",onPress:()=>{u.setMonthYearState($.DATE),N()},children:"Today"}),[l]);return d(k,{children:T(re,{ref:h,css:b,children:[d(K,{state:i,calendarProps:C,prevButtonProps:x,nextButtonProps:m,middleButtonProps:u}),Y(),s&&T("div",{className:"calendar-footer",children:[d(F,{className:"cdg-calendar-clear-btn",variant:"ghost",onPress:()=>{u.setMonthYearState($.DATE),E()},children:"Clear"}),G()]})]})})}),te=ne;export{te as C};
