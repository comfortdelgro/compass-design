import{s as v,r as o,R as D,j as r,a as F}from"./index-bac5e390.js";import{u as R}from"./use-dom-ref-c2dd4c70.js";import{C as B}from"./components-f6bdc2da.js";const M=v("input",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",padding:"0px",lineHeight:"1em",width:"3rem",height:"3rem",margin:"0",fontSize:"2rem",textAlign:"center",borderRadius:"10px",border:"1px solid rgba(0, 0, 0, 0.2)","&[type=number]":{"-moz-appearance":"textfield","&::-webkit-outer-spin-button, &::-webkit-inner-spin-button":{"-webkit-appearance":"none",margin:0}},"&:disabled":{cursor:"not-allowed"}}),L=v("div",{appearance:"none",border:"none",backgroundColor:"transparent",boxSizing:"border-box",padding:"0px",lineHeight:"1em",margin:"5% auto",display:"flex",gap:"2rem","@media screen and (max-width: 640px)":{gap:"1rem",input:{width:"2.5rem",height:"2.5rem",fontSize:"1.8rem",borderRadius:"6px"}},variants:{isMobile:{true:{margin:0,[`${M}`]:{height:"$16",width:"$12",fontSize:"$label1",lineHeight:"$tight",borderRadius:"$lg",borderColor:"$grayShades20"}}}}});function _(n){const i=o.useRef();return o.useEffect(()=>{i.current=n},[n]),i.current}const K=D.forwardRef((n,i)=>{const{css:P={},index:u,focus:s,autoFocus:m,...I}=n,l=R(i),d=_(!!s);return o.useLayoutEffect(()=>{if(l.current){if(u===0){s&&(m||s!==d)&&(l.current.focus(),l.current.select());return}s&&s!==d&&(l.current.focus(),l.current.select())}},[m,s,d]),r(M,{ref:l,css:P,...I})}),q=o.memo(K),G=q,J=D.forwardRef((n,i)=>{const{css:P={},length:u=6,isNumberInput:s,autoFocus:m,disabled:I,isMobile:l=!1,onChangeOTP:d,...N}=n,$=R(i),[a,k]=o.useState(0),[c,y]=o.useState(Array(u).fill("")),b=o.useCallback(e=>{const t=e.join("");d(t)},[d]),f=o.useCallback(e=>{const t=e;return s?!t||/\d/.test(t)?t:"":t},[s]),h=o.useCallback(e=>{const t=[...c];t[a]=e[0]||"",c[a]!==t[a]&&(y(t),b(t))},[a,b,c]),p=o.useCallback(e=>{const t=Math.max(Math.min(u-1,e),0);k(t)},[u]),T=o.useCallback(()=>{p(a-1)},[a,p]),O=o.useCallback(()=>{p(a+1)},[a,p]),A=o.useCallback(e=>()=>{p(e)},[p]),V=o.useCallback(e=>{const t=f(e.currentTarget.value);if(!t){e.preventDefault();return}h(t),O()},[h,O,f]),z=o.useCallback(()=>{k(-1)},[]),E=o.useCallback(e=>{switch(e.key){case"Backspace":case"Delete":{e.preventDefault(),c[a]&&h(""),T();break}case"ArrowLeft":{e.preventDefault(),T();break}case"ArrowRight":{e.preventDefault(),O();break}case" ":{e.preventDefault();break}}},[a,h,O,T,c]),j=o.useCallback(e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain").trim().slice(0,u-a).split("");if(t){let S=0;const C=[...c];C.forEach((H,w)=>{if(w>=a){const x=f(t.shift()||H);x&&(C[w]=x,S=w)}}),y(C),b(C),k(Math.min(S+1,u-1))}},[a,f,b,u,c]);return r(L,{css:P,ref:$,isMobile:l,...N,children:Array.from(Array(u).keys()).map(e=>r(G,{focus:a===e,autoFocus:m,index:e,value:c&&c[e],onFocus:A(e),onInput:V,onKeyDown:E,onBlur:z,onPaste:j,...s?{type:"number",pattern:"d{1}",inputMode:"numeric"}:void 0,autoComplete:"one-time-code",disabled:I},`SingleInput-${e}`))})}),Q=o.memo(J),g=Q;g.displayName="OTPInput";const Y=()=>F(B,{children:[r("h2",{children:"Number OTP"}),r(g,{length:4,isNumberInput:!0,autoFocus:!0,onChangeOTP:n=>console.log("Number OTP: ",n)}),r("h2",{children:"6 Numbers"}),r(g,{isNumberInput:!0,autoFocus:!0,onChangeOTP:n=>console.log("Number OTP: ",n)}),r("h2",{children:"String OTP"}),r(g,{autoFocus:!0,length:4,onChangeOTP:n=>console.log("String OTP: ",n)}),r("h2",{children:"Disabled"}),r(g,{disabled:!0,length:4,onChangeOTP:n=>console.log("String OTP: ",n)}),r("h2",{children:"Mobile view"}),r(g,{css:{marginBottom:"$8"},length:4,onChangeOTP:n=>console.log("String OTP: ",n),autoFocus:!0,isNumberInput:!0,isMobile:!0})]}),Z={decorators:[n=>F("div",{children:[r("style",{dangerouslySetInnerHTML:{__html:".ladle-main { background: #F7F8F9; }"}}),r(n,{})]})]};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{Y as Variants,Z as default};
