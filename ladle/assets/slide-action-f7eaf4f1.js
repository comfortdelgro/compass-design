"use client";import{j as f}from"./jsx-runtime-ea7736fc.js";import{r as a}from"./index-6c164b11.js";import{c as R,C as P}from"./string-cf4adbb3.js";import{u as T}from"./use-dom-ref-7c72e1a5.js";const O=(i,[e,g])=>Math.min(Math.max(i,e),g),W=(i,e)=>{const g=Math.floor(i/e)*e,n=Math.ceil(i/e)*e;return i-g>n-i?n:g},X=i=>{const e=a.useMemo(()=>{const t={prevent:!0,touch:!0,mouse:!0,direction:"both",limit:{x:{max:1/0,min:-1/0},y:{max:1/0,min:-1/0}},stepSize:0,setCSS:!0,disabled:!1,...i};return t.disabled&&(t.mouse=!1,t.touch=!1),t},[i]),g=a.useRef(null),n=e.targetRef||g,_=a.useRef({x:0,y:0}),y=a.useRef({x:0,y:0}),r=a.useRef(!1),[c,m]=a.useState({x:0,y:0}),p=a.useCallback((t,s)=>{n.current&&(!(s!=null&&s.skipCalulateStep)&&e.stepSize&&(t={x:W(c.x,typeof e.stepSize=="object"?e.stepSize.x:e.stepSize),y:W(c.y,typeof e.stepSize=="object"?e.stepSize.y:e.stepSize)}),y.current=t,m(t),e.setCSS&&(s!=null&&s.transition?n.current.style.transition=s.transition:n.current.style.transition="",n.current.style.transform=`translate3d(${t.x}px, ${t.y}px, 0)`))},[e.setCSS,e.stepSize,c.x,c.y,n]),h=a.useCallback(t=>{var d,o,x,j;const{x:s,y:v}=y.current;let u=s,l=v;if(e.touch&&((o=(d=t.touches)==null?void 0:d[0])!=null&&o.clientX)){const L=t.touches[0];L&&(r.current=!0,u=L.clientX-s,l=L.clientY-v,_.current={x:u,y:l},(x=e.onStart)==null||x.call(e,n,{x:u,y:l},p));return}e.mouse&&t instanceof window.MouseEvent&&t.button===0&&(r.current=!0,u=t.clientX-s,l=t.clientY-v,_.current={x:u,y:l},(j=e.onStart)==null||j.call(e,n,{x:u,y:l},p))},[e,p,n]),N=a.useCallback(t=>{var x,j,L,M,q,k,C,S,I,w,E;if(!r.current||!e.mouse&&!e.touch)return;e.prevent&&t.cancelable&&t.preventDefault();const{x:s,y:v}=_.current,{x:u,y:l}=y.current;let d=u,o=l;if(e.touch&&((j=(x=t.touches)==null?void 0:x[0])!=null&&j.clientX)){const A=t.touches[0];A&&(d=A.clientX-s,o=A.clientY-v)}else e.mouse&&t instanceof window.MouseEvent&&t.button===0&&(d=t.clientX-s,o=t.clientY-v);e.stepSize&&(d=W(d,typeof e.stepSize=="object"?e.stepSize.x:e.stepSize),o=W(o,typeof e.stepSize=="object"?e.stepSize.y:e.stepSize)),d=e.direction==="vertical"?0:O(d,[((M=(L=e.limit)==null?void 0:L.x)==null?void 0:M.min)??-1/0,((k=(q=e.limit)==null?void 0:q.x)==null?void 0:k.max)??1/0]),o=e.direction==="horizontal"?0:O(o,[((S=(C=e.limit)==null?void 0:C.y)==null?void 0:S.min)??-1/0,((w=(I=e.limit)==null?void 0:I.y)==null?void 0:w.max)??1/0]),(d!==u||o!==l)&&((E=e.onMove)==null||E.call(e,n,{x:d,y:o})),p({x:d,y:o},{skipCalulateStep:!0})},[e,p,n]),b=a.useCallback(t=>{var s;r.current&&(e.touch&&typeof t.touches<"u"||e.mouse&&t instanceof window.MouseEvent&&t.button===0)&&(r.current=!1,(s=e.onEnd)==null||s.call(e,n,y.current,p))},[e,p,n]);return a.useEffect(()=>{const t=n.current;if(!(typeof window>"u"||typeof document>"u"||!t))return e.touch&&(t.addEventListener("touchstart",h),t.addEventListener("touchmove",N,{passive:!e.prevent}),document.addEventListener("touchcancel",b),document.addEventListener("touchend",b)),e.mouse&&(t.addEventListener("mousedown",h),document.addEventListener("mousemove",N),document.addEventListener("mouseup",b)),()=>{e.touch&&(t.removeEventListener("touchstart",h),t.removeEventListener("touchmove",N),document.removeEventListener("touchcancel",b),document.removeEventListener("touchend",b)),e.mouse&&(t.removeEventListener("mousedown",h),document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",b))}},[n,e,h,N,b]),{target:e.targetRef?void 0:n,position:c,setPosition:p}},z=.4,Y="_slideAction_1favy_6",B="_slideActionBackground_1favy_21",F="_slideActionDragger_1favy_31",Z="_slideActionDefaultIcon_1favy_50",$="_slideActionLabel_1favy_55",U="_compact_1favy_90",H="_gradient_1favy_114",G="_gradientWave_1favy_1",J="_slide_1favy_6",K="_gradientWaveText_1favy_1",D={slideAction:Y,slideActionBackground:B,slideActionDragger:F,slideActionDefaultIcon:Z,slideActionLabel:$,compact:U,static:"_static_1favy_109",gradient:H,gradientWave:G,default:"_default_1favy_121",slide:J,gradientWaveText:K};function V({slideRef:i,icon:e,onDrag:g,onDragEnd:n,disableDrag:_=!1}){const y=a.useRef(null),r=y.current,c=a.useMemo(()=>{if(typeof window>"u"||!i.current)return{slideDragWidth:0,maxSlideDistance:0};const m=window.getComputedStyle(i.current),p=parseFloat(m.paddingLeft)+parseFloat(m.paddingRight),h=(r==null?void 0:r.offsetWidth)??0;return{slideDragWidth:h,maxSlideDistance:i.current.offsetWidth-p-h}},[r==null?void 0:r.offsetWidth]);return X({targetRef:y,direction:"horizontal",limit:{x:{min:0,max:c.maxSlideDistance}},onMove:(...m)=>{g==null||g(c,...m)},onEnd:(...m)=>{n==null||n(c,...m)},disabled:_}),f.jsx("button",{ref:y,className:R(D.slideActionDragger,"cdg-slide-action__dragger"),style:{pointerEvents:_?"none":"auto"},children:e||f.jsx("svg",{className:R(D.slideActionDefaultIcon,"cdg-slide-action__default-icon"),width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:f.jsxs("g",{id:"Frame 105",children:[f.jsxs("g",{id:"Vector",children:[f.jsx("path",{d:"M0.886667 14.998C0.66 14.998 0.433333 14.9106 0.26 14.74C-0.0866667 14.3988 -0.0866667 13.8432 0.26 13.502L5.85111 7.99914L0.26 2.49188C-0.0866667 2.15068 -0.0866667 1.59514 0.26 1.25394C0.606667 0.912748 1.17111 0.912748 1.51778 1.25394L7.74 7.37799C8.08667 7.71918 8.08667 8.27472 7.74 8.61592L1.51778 14.74C1.34 14.9106 1.11333 14.998 0.886667 14.998Z"}),f.jsx("path",{d:"M0.886667 14.998C0.66 14.998 0.433333 14.9106 0.26 14.74C-0.0866667 14.3988 -0.0866667 13.8432 0.26 13.502L5.85111 7.99914L0.26 2.49188C-0.0866667 2.15068 -0.0866667 1.59514 0.26 1.25394C0.606667 0.912748 1.17111 0.912748 1.51778 1.25394L7.74 7.37799C8.08667 7.71918 8.08667 8.27472 7.74 8.61592L1.51778 14.74C1.34 14.9106 1.11333 14.998 0.886667 14.998Z"})]}),f.jsxs("g",{id:"Vector_2",children:[f.jsx("path",{d:"M6.88667 14.998C6.66 14.998 6.43333 14.9106 6.26 14.74C5.91333 14.3988 5.91333 13.8432 6.26 13.502L11.8511 7.99914L6.26 2.49188C5.91333 2.15068 5.91333 1.59514 6.26 1.25394C6.60667 0.912748 7.17111 0.912748 7.51778 1.25394L13.74 7.37799C14.0867 7.71918 14.0867 8.27472 13.74 8.61592L7.51778 14.74C7.34 14.9106 7.11333 14.998 6.88667 14.998Z"}),f.jsx("path",{d:"M6.88667 14.998C6.66 14.998 6.43333 14.9106 6.26 14.74C5.91333 14.3988 5.91333 13.8432 6.26 13.502L11.8511 7.99914L6.26 2.49188C5.91333 2.15068 5.91333 1.59514 6.26 1.25394C6.60667 0.912748 7.17111 0.912748 7.51778 1.25394L13.74 7.37799C14.0867 7.71918 14.0867 8.27472 13.74 8.61592L7.51778 14.74C7.34 14.9106 7.11333 14.998 6.88667 14.998Z"})]})]})})})}V.__docgenInfo={description:"@note This component is draggable.\n\nIt will be re-render (to reflect with the user's drag actions) and how frequently is\ndepend on the `stepSize` option of `useDrag` hook.",methods:[],displayName:"SlideDragger",props:{slideRef:{required:!0,tsType:{name:"RefObject",elements:[{name:"HTMLDivElement"}],raw:"RefObject<HTMLDivElement>"},description:""},icon:{required:!1,tsType:{name:"ReactNode"},description:""},onDrag:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  slideDragInfo: {slideDragWidth: number; maxSlideDistance: number},
  ...params: Parameters<NonNullable<DraggableOptions['onMove']>>
) => void`,signature:{arguments:[{type:{name:"signature",type:"object",raw:"{slideDragWidth: number; maxSlideDistance: number}",signature:{properties:[{key:"slideDragWidth",value:{name:"number",required:!0}},{key:"maxSlideDistance",value:{name:"number",required:!0}}]}},name:"slideDragInfo"},{type:{name:"Parameters",elements:[{name:"NonNullable",elements:[{name:"signature",raw:"DraggableOptions['onMove']"}],raw:"NonNullable<DraggableOptions['onMove']>"}],raw:"Parameters<NonNullable<DraggableOptions['onMove']>>"},name:"params",rest:!0}],return:{name:"void"}}},description:""},onDragEnd:{required:!1,tsType:{name:"signature",type:"function",raw:`(
  slideDragInfo: {slideDragWidth: number; maxSlideDistance: number},
  ...params: Parameters<NonNullable<DraggableOptions['onEnd']>>
) => void`,signature:{arguments:[{type:{name:"signature",type:"object",raw:"{slideDragWidth: number; maxSlideDistance: number}",signature:{properties:[{key:"slideDragWidth",value:{name:"number",required:!0}},{key:"maxSlideDistance",value:{name:"number",required:!0}}]}},name:"slideDragInfo"},{type:{name:"Parameters",elements:[{name:"NonNullable",elements:[{name:"signature",raw:"DraggableOptions['onEnd']"}],raw:"NonNullable<DraggableOptions['onEnd']>"}],raw:"Parameters<NonNullable<DraggableOptions['onEnd']>>"},name:"params",rest:!0}],return:{name:"void"}}},description:""},disableDrag:{required:!1,tsType:{name:"boolean"},description:"",defaultValue:{value:"false",computed:!1}}}};const Q=i=>typeof window>"u"||typeof document>"u"?!1:!!window.getComputedStyle(document.documentElement).getPropertyValue(i).trim(),ee=a.forwardRef(({css:i={},className:e="",icon:g,color:n="--cdg-color-dangerShades",label:_="Slide",labelType:y="default",onChange:r,onSwipeEnd:c,slideType:m="slide",slideColor:p="mono",allowSwipeAfterEnd:h=!1,compact:N=!1,children:b,...t},s)=>{const v=T(s),u=a.useRef(null),l=a.useRef(null),[d,o]=a.useState(!1),x=a.useCallback((C,S)=>{if(u.current){if(m==="static"){u.current.style.setProperty("opacity",C.toFixed(2));return}u.current.style.setProperty("width",`${S}px`)}},[m]),j=a.useCallback(({slideDragWidth:C,maxSlideDistance:S},I,{x:w})=>{if(!v.current||!l.current)return;const E=(S-w)/S;l.current.style.setProperty("opacity",(E-.1).toFixed(2));const A=w/S-z;x(A>z?z:A,C+w)},[x]),L=a.useCallback(({maxSlideDistance:C},S,{x:I},w)=>{if(!v.current)return;const E=()=>{l.current&&l.current.style.setProperty("opacity","1"),o(!1),r==null||r(!1),w({x:0,y:0},{transition:"transform .2s ease"}),x(0,0)};if(I===C){h||o==null||o(!0),r==null||r(!0),c==null||c(E);return}E()},[r,x,h,c]),M=R(D.slideAction,N&&D.compact,e,"cdg-slide-action"),q=R(D.slideActionBackground,p&&D[p],m&&D[m],"cdg-slide-action__bg"),k=R(D.slideActionLabel,y&&D[y],"cdg-slide-action__label");return f.jsx(P,{css:i,childrenRef:v,children:f.jsxs("div",{ref:v,className:M,style:{"--slide-action-theme":Q(n)?`var(${n})`:n},...t,children:[f.jsx("div",{ref:u,className:q}),f.jsx(V,{slideRef:v,icon:g,onDrag:j,onDragEnd:L,disableDrag:d}),f.jsx("div",{ref:l,className:k,title:typeof b=="string"?b:_,children:b||_})]})})});ee.__docgenInfo={description:`A Slide action or Swiper component that requires user to swipe to confirm an action.

Usually use for important actions, such as purchase order, turn off privacy setting, delete something, etc.`,methods:[],displayName:"SlideAction",props:{css:{defaultValue:{value:"{}",computed:!1},required:!1},className:{defaultValue:{value:"''",computed:!1},required:!1},color:{defaultValue:{value:"'--cdg-color-dangerShades'",computed:!1},required:!1},label:{defaultValue:{value:"'Slide'",computed:!1},required:!1},labelType:{defaultValue:{value:"'default'",computed:!1},required:!1},slideType:{defaultValue:{value:"'slide'",computed:!1},required:!1},slideColor:{defaultValue:{value:"'mono'",computed:!1},required:!1},allowSwipeAfterEnd:{defaultValue:{value:"false",computed:!1},required:!1},compact:{defaultValue:{value:"false",computed:!1},required:!1}}};export{ee as S};
