import{R as M,r as m}from"./index.28d6044e.js";import{f as Y,g as z,c as j,h as G,b as Z,i as J}from"./module.31e72b8d.js";import{g as Q,h as O,c as W,i as B,e as X,j as N}from"./module.e0843ab4.js";function H(o){return null}H.getCollectionNode=function*(e,t){let{childItems:r,title:l,children:c}=e,a=e.title||e.children,d=e.textValue||(typeof a=="string"?a:"")||e["aria-label"]||"";!d&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:a,textValue:d,"aria-label":e["aria-label"],hasChildNodes:_(e),*childNodes(){if(r)for(let n of r)yield{type:"item",value:n};else if(l){let n=[];M.Children.forEach(c,y=>{n.push({type:"item",element:y})}),yield*n}}}};function _(o){return o.hasChildItems!=null?o.hasChildItems:!!(o.childItems||o.title&&M.Children.count(o.children)>0)}let ue=H;class ee{build(e,t){return this.context=t,U(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:r}=e;if(typeof t=="function"){if(!r)throw new Error("props.children was a function but props.items is missing");for(let l of e.items)yield*this.getFullNode({value:l},{renderer:t})}else{let l=[];M.Children.forEach(t,a=>{l.push(a)});let c=0;for(let a of l){let d=this.getFullNode({element:a,index:c},{});for(let n of d)c++,yield n}}}getKey(e,t,r,l){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${l}${t.key}`;let c=t.value;if(c!=null){var a;let d=(a=c.key)!==null&&a!==void 0?a:c.id;if(d==null)throw new Error("No key found for item");return d}return l?`${l}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,r,l){let c=e.element;if(!c&&e.value&&t&&t.renderer){let n=this.cache.get(e.value);if(n&&(!n.shouldInvalidate||!n.shouldInvalidate(this.context))){n.index=e.index,n.parentKey=l?l.key:null,yield n;return}c=t.renderer(e.value)}if(M.isValidElement(c)){let n=c.type;if(typeof n!="function"&&typeof n.getCollectionNode!="function"){let h=typeof c.type=="function"?c.type.name:c.type;throw new Error(`Unknown element <${h}> in collection.`)}let y=n.getCollectionNode(c.props,this.context),v=e.index,p=y.next();for(;!p.done&&p.value;){let h=p.value;e.index=v;let f=h.key;f||(f=h.element?null:this.getKey(c,e,t,r));let $=[...this.getFullNode({...h,key:f,index:v,wrapper:te(e.wrapper,h.wrapper)},this.getChildState(t,h),r?`${r}${c.key}`:c.key,l)];for(let g of $){if(g.value=h.value||e.value,g.value&&this.cache.set(g.value,g),e.type&&g.type!==e.type)throw new Error(`Unsupported type <${V(g.type)}> in <${V(l.type)}>. Only <${V(e.type)}> is supported.`);v++,yield g}p=y.next($)}return}if(e.key==null)return;let a=this,d={type:e.type,props:e.props,key:e.key,parentKey:l?l.key:null,value:e.value,level:l?l.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:U(function*(){if(!e.hasChildNodes)return;let n=0;for(let y of e.childNodes()){y.key!=null&&(y.key=`${d.key}${y.key}`),y.index=n;let v=a.getFullNode(y,a.getChildState(t,y),d.key,d);for(let p of v)n++,yield p}})};yield d}constructor(){this.cache=new WeakMap}}function U(o){let e=[],t=null;return{*[Symbol.iterator](){for(let r of e)yield r;t||(t=o());for(let r of t)e.push(r),yield r}}}function te(o,e){if(o&&e)return t=>o(e(t));if(o)return o;if(e)return e}function V(o){return o[0].toUpperCase()+o.slice(1)}function fe(o,e,t,r=[]){let l=m.exports.useMemo(()=>new ee,[]),c=m.exports.useRef(null);return m.exports.useMemo(()=>{let a=l.build(o,t);return c.current=e(a,c.current),c.current},[l,o.children,o.items,t,...r])}function q(o){return X()?o.altKey:o.ctrlKey}function I(o){return N()?o.metaKey:o.ctrlKey}const le=1e3;function ie(o){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:r}=o,l=m.exports.useRef({search:"",timeout:null}).current,c=a=>{let d=oe(a.key);if(!d||a.ctrlKey||a.metaKey)return;d===" "&&l.search.trim().length>0&&(a.preventDefault(),"continuePropagation"in a||a.stopPropagation()),l.search+=d;let n=e.getKeyForSearch(l.search,t.focusedKey);n==null&&(n=e.getKeyForSearch(l.search)),n!=null&&(t.setFocusedKey(n),r&&r(n)),clearTimeout(l.timeout),l.timeout=setTimeout(()=>{l.search=""},le)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?c:null}}}function oe(o){return o.length===1||!/^[A-Z]/i.test(o)?o:""}function re(o){let{selectionManager:e,keyboardDelegate:t,ref:r,autoFocus:l=!1,shouldFocusWrap:c=!1,disallowEmptySelection:a=!1,disallowSelectAll:d=!1,selectOnFocus:n=e.selectionBehavior==="replace",disallowTypeAhead:y=!1,shouldUseVirtualFocus:v,allowsTabNavigation:p=!1,isVirtualized:h,scrollRef:f=r}=o,{direction:x}=Y(),$=s=>{if(s.altKey&&s.key==="Tab"&&s.preventDefault(),!r.current.contains(s.target))return;const b=(u,A)=>{u!=null&&(e.setFocusedKey(u,A),s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):n&&!q(s)&&e.replaceSelection(u))};switch(s.key){case"ArrowDown":if(t.getKeyBelow){var S,K;s.preventDefault();let u=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(S=t.getFirstKey)===null||S===void 0?void 0:S.call(t);u==null&&c&&(u=(K=t.getFirstKey)===null||K===void 0?void 0:K.call(t,e.focusedKey)),b(u)}break;case"ArrowUp":if(t.getKeyAbove){var D,i;s.preventDefault();let u=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(D=t.getLastKey)===null||D===void 0?void 0:D.call(t);u==null&&c&&(u=(i=t.getLastKey)===null||i===void 0?void 0:i.call(t,e.focusedKey)),b(u)}break;case"ArrowLeft":if(t.getKeyLeftOf){s.preventDefault();let u=t.getKeyLeftOf(e.focusedKey);b(u,x==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){s.preventDefault();let u=t.getKeyRightOf(e.focusedKey);b(u,x==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){s.preventDefault();let u=t.getFirstKey(e.focusedKey,I(s));e.setFocusedKey(u),I(s)&&s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):n&&e.replaceSelection(u)}break;case"End":if(t.getLastKey){s.preventDefault();let u=t.getLastKey(e.focusedKey,I(s));e.setFocusedKey(u),I(s)&&s.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):n&&e.replaceSelection(u)}break;case"PageDown":if(t.getKeyPageBelow){s.preventDefault();let u=t.getKeyPageBelow(e.focusedKey);b(u)}break;case"PageUp":if(t.getKeyPageAbove){s.preventDefault();let u=t.getKeyPageAbove(e.focusedKey);b(u)}break;case"a":I(s)&&e.selectionMode==="multiple"&&d!==!0&&(s.preventDefault(),e.selectAll());break;case"Escape":s.preventDefault(),a||e.clearSelection();break;case"Tab":if(!p){if(s.shiftKey)r.current.focus();else{let u=J(r.current,{tabbable:!0}),A,E;do E=u.lastChild(),E&&(A=E);while(E);A&&!A.contains(document.activeElement)&&B(A)}break}}},g=m.exports.useRef({top:0,left:0});Q(f,"scroll",h?null:()=>{g.current={top:f.current.scrollTop,left:f.current.scrollLeft}});let F=s=>{if(e.isFocused){s.currentTarget.contains(s.target)||e.setFocused(!1);return}if(!!s.currentTarget.contains(s.target)){if(e.setFocused(!0),e.focusedKey==null){let K=i=>{i!=null&&(e.setFocusedKey(i),n&&e.replaceSelection(i))},D=s.relatedTarget;var b,S;D&&s.currentTarget.compareDocumentPosition(D)&Node.DOCUMENT_POSITION_FOLLOWING?K((b=e.lastSelectedKey)!==null&&b!==void 0?b:t.getLastKey()):K((S=e.firstSelectedKey)!==null&&S!==void 0?S:t.getFirstKey())}else if(!h){f.current.scrollTop=g.current.top,f.current.scrollLeft=g.current.left;let K=f.current.querySelector(`[data-key="${e.focusedKey}"]`);K&&(B(K),O(f.current,K))}}},k=s=>{s.currentTarget.contains(s.relatedTarget)||e.setFocused(!1)};const P=m.exports.useRef(l);m.exports.useEffect(()=>{if(P.current){let s=null;l==="first"&&(s=t.getFirstKey()),l==="last"&&(s=t.getLastKey());let b=e.selectedKeys;b.size&&(s=b.values().next().value),e.setFocused(!0),e.setFocusedKey(s),s==null&&!v&&z(r.current)}P.current=!1},[]),m.exports.useEffect(()=>{if(!h&&e.focusedKey&&(f==null?void 0:f.current)){let s=f.current.querySelector(`[data-key="${e.focusedKey}"]`);s&&O(f.current,s)}},[h,f,e.focusedKey]);let T={onKeyDown:$,onFocus:F,onBlur:k,onMouseDown(s){f.current===s.target&&s.preventDefault()}},{typeSelectProps:C}=ie({keyboardDelegate:t,selectionManager:e});y||(T=W(C,T));let w;return v||(w=e.focusedKey==null?0:-1),{collectionProps:{...T,tabIndex:w}}}function de(o){let{selectionManager:e,key:t,ref:r,shouldSelectOnPressUp:l,isVirtualized:c,shouldUseVirtualFocus:a,focus:d,isDisabled:n,onAction:y,allowsDifferentPressOrigin:v}=o,p=i=>{if(i.pointerType==="keyboard"&&q(i))e.toggleSelection(t);else{if(e.selectionMode==="none")return;e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):i&&i.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||i&&(I(i)||i.pointerType==="touch"||i.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};m.exports.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!a&&document.activeElement!==r.current&&(d?d():z(r.current))},[r,t,e.focusedKey,e.childFocusStrategy,e.isFocused,a]),n=n||e.isDisabled(t);let h={};!a&&!n?h={tabIndex:t===e.focusedKey?0:-1,onFocus(i){i.target===r.current&&e.setFocusedKey(t)}}:n&&(h.onMouseDown=i=>{i.preventDefault()});let f=!n&&e.canSelectItem(t),x=y&&!n,$=x&&(e.selectionBehavior==="replace"?!f:e.isEmpty),g=x&&f&&e.selectionBehavior==="replace",F=$||g,k=m.exports.useRef(null),P=F&&f,T=m.exports.useRef(!1),C=m.exports.useRef(!1),w={};l?(w.onPressStart=i=>{k.current=i.pointerType,T.current=P,i.pointerType==="keyboard"&&(!F||L())&&p(i)},v?(w.onPressUp=i=>{i.pointerType!=="keyboard"&&p(i)},w.onPress=$?()=>y():null):w.onPress=i=>{if($||g&&i.pointerType!=="mouse"){if(i.pointerType==="keyboard"&&!R())return;y()}else i.pointerType!=="keyboard"&&p(i)}):(w.onPressStart=i=>{k.current=i.pointerType,T.current=P,C.current=$,(i.pointerType==="mouse"&&!$||i.pointerType==="keyboard"&&(!y||L()))&&p(i)},w.onPress=i=>{(i.pointerType==="touch"||i.pointerType==="pen"||i.pointerType==="virtual"||i.pointerType==="keyboard"&&F&&R()||i.pointerType==="mouse"&&C.current)&&(F?y():p(i))}),c||(h["data-key"]=t),w.preventFocusOnPress=a;let{pressProps:s,isPressed:b}=G(w),S=g?i=>{k.current==="mouse"&&(i.stopPropagation(),i.preventDefault(),y())}:void 0,{longPressProps:K}=Z({isDisabled:!P,onLongPress(i){i.pointerType==="touch"&&(p(i),e.setSelectionBehavior("toggle"))}});return{itemProps:W(h,f||$?s:{},P?K:{},{onDoubleClick:S,onDragStartCapture:i=>{k.current==="touch"&&T.current&&i.preventDefault()}}),isPressed:b,isSelected:e.isSelected(t),isDisabled:n,allowsSelection:f,hasAction:F}}function R(){let o=window.event;return(o==null?void 0:o.key)==="Enter"}function L(){let o=window.event;return(o==null?void 0:o.key)===" "||(o==null?void 0:o.code)==="Space"}class se{getKeyBelow(e){for(e=this.collection.getKeyAfter(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}}getKeyAbove(e){for(e=this.collection.getKeyBefore(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}}getFirstKey(){let e=this.collection.getFirstKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}}getLastKey(){let e=this.collection.getLastKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}}getItem(e){return this.ref.current.querySelector(`[data-key="${e}"]`)}getKeyPageAbove(e){let t=this.ref.current,r=this.getItem(e);if(!r)return null;let l=Math.max(0,r.offsetTop+r.offsetHeight-t.offsetHeight);for(;r&&r.offsetTop>l;)e=this.getKeyAbove(e),r=this.getItem(e);return e}getKeyPageBelow(e){let t=this.ref.current,r=this.getItem(e);if(!r)return null;let l=Math.min(t.scrollHeight,r.offsetTop-r.offsetHeight+t.offsetHeight);for(;r&&r.offsetTop<l;)e=this.getKeyBelow(e),r=this.getItem(e);return e}getKeyForSearch(e,t){if(!this.collator)return null;let r=this.collection,l=t||this.getFirstKey();for(;l!=null;){let c=r.getItem(l),a=c.textValue.slice(0,e.length);if(c.textValue&&this.collator.compare(a,e)===0)return l;l=this.getKeyBelow(l)}return null}constructor(e,t,r,l){this.collection=e,this.disabledKeys=t,this.ref=r,this.collator=l}}function ye(o){let{selectionManager:e,collection:t,disabledKeys:r,ref:l,keyboardDelegate:c,autoFocus:a,shouldFocusWrap:d,isVirtualized:n,disallowEmptySelection:y,selectOnFocus:v=e.selectionBehavior==="replace",disallowTypeAhead:p,shouldUseVirtualFocus:h,allowsTabNavigation:f}=o,x=j({usage:"search",sensitivity:"base"}),$=e.disabledBehavior,g=m.exports.useMemo(()=>c||new se(t,$==="selection"?new Set:r,l,x),[c,t,r,l,x,$]),{collectionProps:F}=re({ref:l,selectionManager:e,keyboardDelegate:g,autoFocus:a,shouldFocusWrap:d,disallowEmptySelection:y,selectOnFocus:v,disallowTypeAhead:p,shouldUseVirtualFocus:h,allowsTabNavigation:f,isVirtualized:n,scrollRef:l});return{listProps:F}}export{se as $,re as a,ie as b,ue as c,ye as d,de as e,fe as f};
