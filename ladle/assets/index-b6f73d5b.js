import{j as d}from"./jsx-runtime-ea7736fc.js";import{r as n,R as j}from"./index-6c164b11.js";import{C as A}from"./objectToCSS-aff350d4.js";import{u as F}from"./use-dom-ref-7c72e1a5.js";const $="_singleInput_d0ntb_7",q="_inputContainer_d0ntb_22",z="_singleInputNumber_d0ntb_53",J="_singleInputIsError_d0ntb_62",Q="_inputContainerIsMobile_d0ntb_72",W="_singleInputIsMobile_d0ntb_76",I={singleInput:$,inputContainer:q,singleInputNumber:z,singleInputIsError:J,inputContainerIsMobile:Q,singleInputIsMobile:W};function X(l){const i=n.useRef();return n.useEffect(()=>{i.current=l},[l]),i.current}const V=j.forwardRef((l,i)=>{const{css:c={},className:N,index:b,focus:r,autoFocus:g,isErrored:p,isNumberInput:C,isMobile:v,...o}=l,a=F(i),m=X(!!r);n.useLayoutEffect(()=>{if(a.current){if(b===0){r&&(g||r!==m)&&(a.current.focus(),a.current.select());return}r&&r!==m&&(a.current.focus(),a.current.select())}},[g,r,b,a,m]);const M=[I.singleInput,C&&I.singleInputNumber,v&&I.singleInputIsMobile,p&&I.singleInputisErrored,"cdg-otp-single-input",N].filter(Boolean).join(" ");return d.jsx(A,{css:c,children:d.jsx("input",{...o,ref:a,className:M})})}),Y=n.memo(V);V.__docgenInfo={description:"",methods:[],displayName:"SingleOTPInputComponent"};const Z=6,w=j.forwardRef((l,i)=>{const{otp:c,css:N={},disabled:b,autoFocus:r,className:g,isNumberInput:p,isMobile:C=!1,isErrored:v=!1,length:o=Z,onChangeOTP:a,...m}=l,M=F(i),[s,T]=n.useState(0),[u,D]=n.useState(c?c.split("").slice(0,o):Array(o).fill(""));j.useEffect(()=>{c&&D(c.split("").slice(0,o))},[o,c]);const h=n.useCallback(e=>{const t=e.join("");a(t)},[a]),_=n.useCallback(e=>{const t=e;return p?!t||/\d/.test(t)?t:"":t},[p]),O=n.useCallback(e=>{const t=[...u];t[s]=e[0]||"",u[s]!==t[s]&&(D(t),h(t))},[s,h,u]),f=n.useCallback(e=>{const t=Math.max(Math.min(o-1,e),0);T(t)},[o]),E=n.useCallback(()=>{f(s-1)},[s,f]),k=n.useCallback(()=>{f(s+1)},[s,f]),S=n.useCallback(e=>()=>{f(e)},[f]),B=n.useCallback(e=>{const t=_(e.currentTarget.value);if(!t){e.preventDefault();return}O(t),k()},[O,k,_]),L=n.useCallback(()=>{T(-1)},[]),K=n.useCallback(e=>{switch(e.key){case"Backspace":case"Delete":{e.preventDefault(),u[s]&&O(""),E();break}case"ArrowLeft":{e.preventDefault(),E();break}case"ArrowRight":{e.preventDefault(),k();break}case" ":{e.preventDefault();break}}},[s,O,k,E,u]),G=n.useCallback(e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain").trim().slice(0,o-s).split("");if(t){let R=0;const P=[...u];P.forEach((U,y)=>{if(y>=s){const x=_(t.shift()||U);x&&(P[y]=x,R=y)}}),D(P),h(P),T(Math.min(R+1,o-1))}},[s,_,h,o,u]),H=[I.inputContainer,C&&I.inputContainerIsMobile,"cdg-otp-input",g].filter(Boolean).join(" ");return d.jsx(A,{css:N,children:d.jsx("div",{ref:M,className:H,...m,children:Array.from(Array(o).keys()).map(e=>d.jsx(Y,{index:e,disabled:b,isMobile:C,autoFocus:r,isErrored:v,autoComplete:"one-time-code",focus:s===e,isNumberInput:p,value:u&&u[e],...p?{type:"number",pattern:"d{1}",inputMode:"numeric"}:void 0,onBlur:L,onInput:B,onPaste:G,onKeyDown:K,onFocus:S(e)},`SingleInput-${e}`))})})}),ee=n.memo(w);w.__docgenInfo={description:"",methods:[],displayName:"OTPInputComponent"};ee.displayName="OTPInput";export{ee as O};
