import{R as k,r as y}from"./index-63360bd1.js";import{b as Y,a as Q}from"./import-56691b36.js";import{d as X,i as V,z as _,$ as j,s as O,y as ee,h as te}from"./import-c5521a7a.js";import{e as le,a as se,k as ie}from"./import-fd958c92.js";import{l as ne,s as oe}from"./real-module-9c0a69a4.js";import{$ as G}from"./import-41853bb9.js";import{_ as N}from"./_define_property-1764bf98.js";function Z(s){return null}Z.getCollectionNode=function*(e,t){let{childItems:l,title:i,children:n}=e,o=e.title||e.children,f=e.textValue||(typeof o=="string"?o:"")||e["aria-label"]||"";!f&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:o,textValue:f,"aria-label":e["aria-label"],hasChildNodes:re(e),*childNodes(){if(l)for(let c of l)yield{type:"item",value:c};else if(i){let c=[];k.Children.forEach(n,d=>{c.push({type:"item",element:d})}),yield*c}}}};function re(s){return s.hasChildItems!=null?s.hasChildItems:!!(s.childItems||s.title&&k.Children.count(s.children)>0)}let Pe=Z;class ce{build(e,t){return this.context=t,z(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:l}=e;if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");for(let i of e.items)yield*this.getFullNode({value:i},{renderer:t})}else{let i=[];k.Children.forEach(t,o=>{i.push(o)});let n=0;for(let o of i){let f=this.getFullNode({element:o,index:n},{});for(let c of f)n++,yield c}}}getKey(e,t,l,i){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${i}${t.key}`;let n=t.value;if(n!=null){var o;let f=(o=n.key)!==null&&o!==void 0?o:n.id;if(f==null)throw new Error("No key found for item");return f}return i?`${i}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,l,i){let n=e.element;if(!n&&e.value&&t&&t.renderer){let c=this.cache.get(e.value);if(c&&(!c.shouldInvalidate||!c.shouldInvalidate(this.context))){c.index=e.index,c.parentKey=i?i.key:null,yield c;return}n=t.renderer(e.value)}if(k.isValidElement(n)){let c=n.type;if(typeof c!="function"&&typeof c.getCollectionNode!="function"){let p=typeof n.type=="function"?n.type.name:n.type;throw new Error(`Unknown element <${p}> in collection.`)}let d=c.getCollectionNode(n.props,this.context),b=e.index,K=d.next();for(;!K.done&&K.value;){let p=K.value;e.index=b;let u=p.key;u||(u=p.element?null:this.getKey(n,e,t,l));let m=[...this.getFullNode({...p,key:u,index:b,wrapper:ae(e.wrapper,p.wrapper)},this.getChildState(t,p),l?`${l}${n.key}`:n.key,i)];for(let g of m){if(g.value=p.value||e.value,g.value&&this.cache.set(g.value,g),e.type&&g.type!==e.type)throw new Error(`Unsupported type <${R(g.type)}> in <${R(i.type)}>. Only <${R(e.type)}> is supported.`);b++,yield g}K=d.next(m)}return}if(e.key==null)return;let o=this,f={type:e.type,props:e.props,key:e.key,parentKey:i?i.key:null,value:e.value,level:i?i.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:z(function*(){if(!e.hasChildNodes)return;let c=0;for(let d of e.childNodes()){d.key!=null&&(d.key=`${f.key}${d.key}`),d.index=c;let b=o.getFullNode(d,o.getChildState(t,d),f.key,f);for(let K of b)c++,yield K}})};yield f}constructor(){N(this,"cache",new WeakMap)}}function z(s){let e=[],t=null;return{*[Symbol.iterator](){for(let l of e)yield l;t||(t=s());for(let l of t)e.push(l),yield l}}}function ae(s,e){if(s&&e)return t=>s(e(t));if(s)return s;if(e)return e}function R(s){return s[0].toUpperCase()+s.slice(1)}function ue(s,e,t,l=[]){let i=y.useMemo(()=>new ce,[]),n=y.useRef(null);return y.useMemo(()=>{let o=i.build(s,t);return n.current=e(o,n.current),n.current},[i,s.children,s.items,t,...l])}const U=new WeakMap;function de(s){let e=U.get(s);if(e!=null)return e;e=0;for(let t of s)t.type==="section"?e+=de(t.childNodes):e++;return U.set(s,e),e}function J(s){return ee()?s.altKey:s.ctrlKey}function E(s){return te()?s.metaKey:s.ctrlKey}const fe=1e3;function he(s){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=s,i=y.useRef({search:"",timeout:null}).current,n=o=>{let f=ye(o.key);if(!f||o.ctrlKey||o.metaKey)return;f===" "&&i.search.trim().length>0&&(o.preventDefault(),"continuePropagation"in o||o.stopPropagation()),i.search+=f;let c=e.getKeyForSearch(i.search,t.focusedKey);c==null&&(c=e.getKeyForSearch(i.search)),c!=null&&(t.setFocusedKey(c),l&&l(c)),clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},fe)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?n:null}}}function ye(s){return s.length===1||!/^[A-Z]/i.test(s)?s:""}function ge(s){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:i=!1,shouldFocusWrap:n=!1,disallowEmptySelection:o=!1,disallowSelectAll:f=!1,selectOnFocus:c=e.selectionBehavior==="replace",disallowTypeAhead:d=!1,shouldUseVirtualFocus:b,allowsTabNavigation:K=!1,isVirtualized:p,scrollRef:u=l}=s,{direction:$}=ne(),m=a=>{if(a.altKey&&a.key==="Tab"&&a.preventDefault(),!l.current.contains(a.target))return;const S=(h,A)=>{h!=null&&(e.setFocusedKey(h,A),a.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):c&&!J(a)&&e.replaceSelection(h))};switch(a.key){case"ArrowDown":if(t.getKeyBelow){var P,x;a.preventDefault();let h=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(P=t.getFirstKey)===null||P===void 0?void 0:P.call(t);h==null&&n&&(h=(x=t.getFirstKey)===null||x===void 0?void 0:x.call(t,e.focusedKey)),S(h)}break;case"ArrowUp":if(t.getKeyAbove){var D,r;a.preventDefault();let h=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(D=t.getLastKey)===null||D===void 0?void 0:D.call(t);h==null&&n&&(h=(r=t.getLastKey)===null||r===void 0?void 0:r.call(t,e.focusedKey)),S(h)}break;case"ArrowLeft":if(t.getKeyLeftOf){a.preventDefault();let h=t.getKeyLeftOf(e.focusedKey);S(h,$==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){a.preventDefault();let h=t.getKeyRightOf(e.focusedKey);S(h,$==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){a.preventDefault();let h=t.getFirstKey(e.focusedKey,E(a));e.setFocusedKey(h),E(a)&&a.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):c&&e.replaceSelection(h)}break;case"End":if(t.getLastKey){a.preventDefault();let h=t.getLastKey(e.focusedKey,E(a));e.setFocusedKey(h),E(a)&&a.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(h):c&&e.replaceSelection(h)}break;case"PageDown":if(t.getKeyPageBelow){a.preventDefault();let h=t.getKeyPageBelow(e.focusedKey);S(h)}break;case"PageUp":if(t.getKeyPageAbove){a.preventDefault();let h=t.getKeyPageAbove(e.focusedKey);S(h)}break;case"a":E(a)&&e.selectionMode==="multiple"&&f!==!0&&(a.preventDefault(),e.selectAll());break;case"Escape":a.preventDefault(),o||e.clearSelection();break;case"Tab":if(!K){if(a.shiftKey)l.current.focus();else{let h=Q(l.current,{tabbable:!0}),A,B;do B=h.lastChild(),B&&(A=B);while(B);A&&!A.contains(document.activeElement)&&O(A)}break}}},g=y.useRef({top:0,left:0});X(u,"scroll",p?null:()=>{g.current={top:u.current.scrollTop,left:u.current.scrollLeft}});let w=a=>{if(e.isFocused){a.currentTarget.contains(a.target)||e.setFocused(!1);return}if(a.currentTarget.contains(a.target)){if(e.setFocused(!0),e.focusedKey==null){let x=r=>{r!=null&&(e.setFocusedKey(r),c&&e.replaceSelection(r))},D=a.relatedTarget;var S,P;D&&a.currentTarget.compareDocumentPosition(D)&Node.DOCUMENT_POSITION_FOLLOWING?x((S=e.lastSelectedKey)!==null&&S!==void 0?S:t.getLastKey()):x((P=e.firstSelectedKey)!==null&&P!==void 0?P:t.getFirstKey())}else if(!p){u.current.scrollTop=g.current.top,u.current.scrollLeft=g.current.left;let x=u.current.querySelector(`[data-key="${e.focusedKey}"]`);x&&(O(x),V(u.current,x))}}},I=a=>{a.currentTarget.contains(a.relatedTarget)||e.setFocused(!1)};const v=y.useRef(i);y.useEffect(()=>{if(v.current){let a=null;i==="first"&&(a=t.getFirstKey()),i==="last"&&(a=t.getLastKey());let S=e.selectedKeys;S.size&&(a=S.values().next().value),e.setFocused(!0),e.setFocusedKey(a),a==null&&!b&&Y(l.current)}v.current=!1},[]),y.useEffect(()=>{let a=le();if(!p&&e.isFocused&&e.focusedKey!=null&&(u!=null&&u.current)){let S=u.current.querySelector(`[data-key="${e.focusedKey}"]`);S&&(V(u.current,S),a==="keyboard"&&_(S,{containingElement:l.current}))}},[p,u,e.focusedKey,e.isFocused,l]);let T={onKeyDown:m,onFocus:w,onBlur:I,onMouseDown(a){u.current===a.target&&a.preventDefault()}},{typeSelectProps:C}=he({keyboardDelegate:t,selectionManager:e});d||(T=j(C,T));let F;return b||(F=e.focusedKey==null?0:-1),{collectionProps:{...T,tabIndex:F}}}function De(s){let{selectionManager:e,key:t,ref:l,shouldSelectOnPressUp:i,isVirtualized:n,shouldUseVirtualFocus:o,focus:f,isDisabled:c,onAction:d,allowsDifferentPressOrigin:b}=s,K=r=>{if(r.pointerType==="keyboard"&&J(r))e.toggleSelection(t);else{if(e.selectionMode==="none")return;e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):r&&r.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||r&&(E(r)||r.pointerType==="touch"||r.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};y.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!o&&document.activeElement!==l.current&&(f?f():Y(l.current))},[l,t,e.focusedKey,e.childFocusStrategy,e.isFocused,o]),c=c||e.isDisabled(t);let p={};!o&&!c?p={tabIndex:t===e.focusedKey?0:-1,onFocus(r){r.target===l.current&&e.setFocusedKey(t)}}:c&&(p.onMouseDown=r=>{r.preventDefault()});let u=!c&&e.canSelectItem(t),$=d&&!c,m=$&&(e.selectionBehavior==="replace"?!u:e.isEmpty),g=$&&u&&e.selectionBehavior==="replace",w=m||g,I=y.useRef(null),v=w&&u,T=y.useRef(!1),C=y.useRef(!1),F={};i?(F.onPressStart=r=>{I.current=r.pointerType,T.current=v,r.pointerType==="keyboard"&&(!w||W())&&K(r)},b?(F.onPressUp=r=>{r.pointerType!=="keyboard"&&K(r)},F.onPress=m?()=>d():null):F.onPress=r=>{if(m||g&&r.pointerType!=="mouse"){if(r.pointerType==="keyboard"&&!L())return;d()}else r.pointerType!=="keyboard"&&K(r)}):(F.onPressStart=r=>{I.current=r.pointerType,T.current=v,C.current=m,(r.pointerType==="mouse"&&!m||r.pointerType==="keyboard"&&(!d||W()))&&K(r)},F.onPress=r=>{(r.pointerType==="touch"||r.pointerType==="pen"||r.pointerType==="virtual"||r.pointerType==="keyboard"&&w&&L()||r.pointerType==="mouse"&&C.current)&&(w?d():K(r))}),n||(p["data-key"]=t),F.preventFocusOnPress=o;let{pressProps:a,isPressed:S}=se(F),P=g?r=>{I.current==="mouse"&&(r.stopPropagation(),r.preventDefault(),d())}:void 0,{longPressProps:x}=ie({isDisabled:!v,onLongPress(r){r.pointerType==="touch"&&(K(r),e.setSelectionBehavior("toggle"))}});return{itemProps:j(p,u||m?a:{},v?x:{},{onDoubleClick:P,onDragStartCapture:r=>{I.current==="touch"&&T.current&&r.preventDefault()}}),isPressed:S,isSelected:e.isSelected(t),isDisabled:c,allowsSelection:u,hasAction:w}}function L(){let s=window.event;return(s==null?void 0:s.key)==="Enter"}function W(){let s=window.event;return(s==null?void 0:s.key)===" "||(s==null?void 0:s.code)==="Space"}class Ke{getKeyBelow(e){for(e=this.collection.getKeyAfter(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}}getKeyAbove(e){for(e=this.collection.getKeyBefore(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}}getFirstKey(){let e=this.collection.getFirstKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}}getLastKey(){let e=this.collection.getLastKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}}getItem(e){return this.ref.current.querySelector(`[data-key="${e}"]`)}getKeyPageAbove(e){let t=this.ref.current,l=this.getItem(e);if(!l)return null;let i=Math.max(0,l.offsetTop+l.offsetHeight-t.offsetHeight);for(;l&&l.offsetTop>i;)e=this.getKeyAbove(e),l=this.getItem(e);return e}getKeyPageBelow(e){let t=this.ref.current,l=this.getItem(e);if(!l)return null;let i=Math.min(t.scrollHeight,l.offsetTop-l.offsetHeight+t.offsetHeight);for(;l&&l.offsetTop<i;)e=this.getKeyBelow(e),l=this.getItem(e);return e}getKeyForSearch(e,t){if(!this.collator)return null;let l=this.collection,i=t||this.getFirstKey();for(;i!=null;){let n=l.getItem(i),o=n.textValue.slice(0,e.length);if(n.textValue&&this.collator.compare(o,e)===0)return i;i=this.getKeyBelow(i)}return null}constructor(e,t,l,i){this.collection=e,this.disabledKeys=t,this.ref=l,this.collator=i}}function Ae(s){let{selectionManager:e,collection:t,disabledKeys:l,ref:i,keyboardDelegate:n,autoFocus:o,shouldFocusWrap:f,isVirtualized:c,disallowEmptySelection:d,selectOnFocus:b=e.selectionBehavior==="replace",disallowTypeAhead:K,shouldUseVirtualFocus:p,allowsTabNavigation:u}=s,$=oe({usage:"search",sensitivity:"base"}),m=e.disabledBehavior,g=y.useMemo(()=>n||new Ke(t,m==="selection"?new Set:l,i,$),[n,t,l,i,$,m]),{collectionProps:w}=ge({ref:i,selectionManager:e,keyboardDelegate:g,autoFocus:o,shouldFocusWrap:f,disallowEmptySelection:d,selectOnFocus:b,disallowTypeAhead:K,shouldUseVirtualFocus:p,allowsTabNavigation:u,isVirtualized:c,scrollRef:i});return{listProps:w}}class M extends Set{constructor(e,t,l){super(e),e instanceof M?(this.anchorKey=t||e.anchorKey,this.currentKey=l||e.currentKey):(this.anchorKey=t,this.currentKey=l)}}function pe(s,e){if(s.size!==e.size)return!1;for(let t of s)if(!e.has(t))return!1;return!0}function me(s){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:l,selectionBehavior:i="toggle",disabledBehavior:n="all"}=s,o=y.useRef(!1),[,f]=y.useState(!1),c=y.useRef(null),d=y.useRef(null),[,b]=y.useState(null),K=y.useMemo(()=>H(s.selectedKeys),[s.selectedKeys]),p=y.useMemo(()=>H(s.defaultSelectedKeys,new M),[s.defaultSelectedKeys]),[u,$]=G(K,p,s.onSelectionChange),m=y.useMemo(()=>s.disabledKeys?new Set(s.disabledKeys):new Set,[s.disabledKeys]),[g,w]=y.useState(i);i==="replace"&&g==="toggle"&&typeof u=="object"&&u.size===0&&w("replace");let I=y.useRef(i);return y.useEffect(()=>{i!==I.current&&(w(i),I.current=i)},[i]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:g,setSelectionBehavior:w,get isFocused(){return o.current},setFocused(v){o.current=v,f(v)},get focusedKey(){return c.current},get childFocusStrategy(){return d.current},setFocusedKey(v,T="first"){c.current=v,d.current=T,b(v)},selectedKeys:u,setSelectedKeys(v){(l||!pe(v,u))&&$(v)},disabledKeys:m,disabledBehavior:n}}function H(s,e){return s?s==="all"?"all":new M(s):e}class be{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(l=>t.has(l)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||(l==null?void 0:l.index)<e.index)&&(e=l)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||(l==null?void 0:l.index)>e.index)&&(e=l)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new M([e],e,e);else{let l=this.state.selectedKeys,i=l.anchorKey||e;t=new M(l,i,e);for(let n of this.getKeyRange(i,l.currentKey||e))t.delete(n);for(let n of this.getKeyRange(e,i))this.canSelectItem(n)&&t.add(n)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let l=this.collection.getItem(e),i=this.collection.getItem(t);return l&&i?l.index<=i.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let l=[],i=e;for(;i;){let n=this.collection.getItem(i);if((n&&n.type==="item"||n.type==="cell"&&this.allowsCellSelection)&&l.push(i),i===t)return l;i=this.collection.getKeyAfter(i)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new M(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new M([e],e,e):new M;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new M;for(let l of e)if(l=this.getKey(l),l!=null&&(t.add(l),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=l=>{for(;l;){if(this.canSelectItem(l)){let i=this.collection.getItem(l);i.type==="item"&&e.push(l),i.hasChildNodes&&(this.allowsCellSelection||i.type!=="item")&&t([...i.childNodes][0].key)}l=this.collection.getKeyAfter(l)}};return t(this.collection.getFirstKey()),e}selectAll(){this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new M)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let l of e)if(!t.has(l))return!1;for(let l of t)if(!e.has(l))return!1;return!0}canSelectItem(e){if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let t=this.collection.getItem(e);return!(!t||t.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){return this.state.disabledKeys.has(e)&&this.state.disabledBehavior==="all"}constructor(e,t,l){this.collection=e,this.state=t;var i;this.allowsCellSelection=(i=l==null?void 0:l.allowsCellSelection)!==null&&i!==void 0?i:!1,this._isSelectAll=null}}let Se=Symbol.iterator;class q{*[Se](){yield*this.iterable}get size(){return this.keyMap.size}getKeys(){return this.keyMap.keys()}getKeyBefore(e){let t=this.keyMap.get(e);return t?t.prevKey:null}getKeyAfter(e){let t=this.keyMap.get(e);return t?t.nextKey:null}getFirstKey(){return this.firstKey}getLastKey(){return this.lastKey}getItem(e){return this.keyMap.get(e)}at(e){const t=[...this.getKeys()];return this.getItem(t[e])}constructor(e){N(this,"keyMap",new Map),this.iterable=e;let t=n=>{if(this.keyMap.set(n.key,n),n.childNodes&&n.type==="section")for(let o of n.childNodes)t(o)};for(let n of e)t(n);let l,i=0;for(let[n,o]of this.keyMap)l?(l.nextKey=n,o.prevKey=l.key):(this.firstKey=n,o.prevKey=void 0),o.type==="item"&&(o.index=i++),l=o,l.nextKey=void 0;this.lastKey=l==null?void 0:l.key}}function ve(s){let{filter:e}=s,t=me(s),l=y.useMemo(()=>s.disabledKeys?new Set(s.disabledKeys):new Set,[s.disabledKeys]),i=d=>e?new q(e(d)):new q(d),n=y.useMemo(()=>({suppressTextValueWarning:s.suppressTextValueWarning}),[s.suppressTextValueWarning]),o=ue(s,i,n,[e]),f=y.useMemo(()=>new be(o,t),[o,t]);const c=y.useRef(null);return y.useEffect(()=>{if(t.focusedKey!=null&&!o.getItem(t.focusedKey)){const d=c.current.getItem(t.focusedKey),b=[...c.current.getKeys()].map(m=>{const g=c.current.getItem(m);return g.type==="item"?g:null}).filter(m=>m!==null),K=[...o.getKeys()].map(m=>{const g=o.getItem(m);return g.type==="item"?g:null}).filter(m=>m!==null),p=b.length-K.length;let u=Math.min(p>1?Math.max(d.index-p+1,0):d.index,K.length-1),$;for(;u>=0;){if(!f.isDisabled(K[u].key)){$=K[u];break}u<K.length-1?u++:(u>d.index&&(u=d.index),u--)}t.setFocusedKey($?$.key:null)}c.current=o},[o,f,t,t.focusedKey]),{collection:o,disabledKeys:l,selectionManager:f}}function Ee(s){var e;let[t,l]=G(s.selectedKey,(e=s.defaultSelectedKey)!==null&&e!==void 0?e:null,s.onSelectionChange),i=y.useMemo(()=>t!=null?[t]:[],[t]),{collection:n,disabledKeys:o,selectionManager:f}=ve({...s,selectionMode:"single",disallowEmptySelection:!0,allowDuplicateSelectionEvents:!0,selectedKeys:i,onSelectionChange:d=>{let b=d.values().next().value;b===t&&s.onSelectionChange&&s.onSelectionChange(b),l(b)}}),c=t!=null?n.getItem(t):null;return{collection:n,disabledKeys:o,selectionManager:f,selectedKey:t,setSelectedKey:l,selectedItem:c}}export{ve as $,Ke as a,Pe as b,q as c,ge as d,de as e,Ee as f,he as g,Ae as h,De as i};
