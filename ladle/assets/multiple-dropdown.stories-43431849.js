import{B as z}from"./bug-6da19246.js";import{s as K,R as i,a,j as e,F as he}from"./index-7868a988.js";import{C as ue}from"./components-737ca3e4.js";import{S as fe,a as ge,B as me,b as pe,P as ye,D as be}from"./index-b28609c4.js";import{p as ke,a as ve,t as we,L as Ce,I as Ie,D as Q,b as Se}from"./utils-3e629f9a.js";import{S as xe,a as X}from"./dropdown.styles-5cf2cbdf.js";import{u as D}from"./use-dom-ref-7ffc5cd9.js";import"./pick-child-adddb2ce.js";const Re=K("div",{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:"$6",height:"$6",div:{border:"1px solid #323130",borderRadius:"3px",width:"$4",height:"$4",display:"flex",alignItems:"center",justifyContent:"center",background:"#FFFFFF"},variants:{isSelected:{true:{div:{border:0,background:"$cdgBlue100",svg:{display:"block"}}},false:{div:{svg:{display:"none"}}}}}});function Y({item:t,currentKeys:c,focusKey:d,disabledKeys:s,onHover:h,onSelect:m}){const f=i.useRef(null),k=i.useMemo(()=>t.key?c.includes(t.key):!1,[c]),C=i.useMemo(()=>d===t.key,[d]),b=i.useMemo(()=>t.key?s.includes(t.key):!1,[s]);return a(fe,{ref:f,isFocused:C,isSelected:k,onClick:()=>{t.key&&!b&&m(t.key)},onMouseOver:()=>h(t.key),onMouseOut:()=>h(-1),isDisabled:b,children:[e(ge,{children:t.props.children}),e(Re,{isSelected:k,children:e("div",{children:e($e,{})})})]})}const $e=()=>e("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:e("path",{d:"M9.39158 1.86239C9.64736 2.12284 9.64736 2.54372 9.39158 2.80416L4.15319 8.13808C3.89741 8.39853 3.48407 8.39853 3.22829 8.13808L0.608522 5.47112C0.352823 5.21068 0.352823 4.7898 0.608522 4.52935C0.864262 4.26891 1.27883 4.26891 1.53461 4.52935L3.67232 6.72334L8.46668 1.86239C8.72246 1.60153 9.1358 1.60153 9.39158 1.86239Z",fill:"white"})});function De(t){const c=i.useRef(null),{focusKey:d,isLoading:s,collection:h,currentKeys:m,disabledKeys:f,rootChildren:k,listBoxRef:C=c,sectionCollection:b,onHover:I,onSelect:L,onLoadMore:S}=t;return e(me,{isLoading:s,listBoxRef:C,collection:h,sectionCollection:b,rootChildren:k,onLoadMore:S,renderOptions:A=>A.map(v=>a("div",{children:[v.title&&e(pe,{children:v.title}),v.children.map(p=>p?e(Y,{item:p,focusKey:d,currentKeys:m,disabledKeys:f,onHover:I,onSelect:L},p.key):null)]},v.id))})}const Ke=K("div",{width:"100%",label:{fontSize:"$label1",fontWeight:"$semibold",marginBottom:"$2",display:"inline-block",width:"100%",span:{marginLeft:"$1",color:"$danger"}}}),Le=K("div",{width:"100%",minHeight:"$11",borderRadius:"$md",cursor:"text",display:"flex",alignItems:"center",padding:"$2 $4",gap:"$1",backgroundColor:"#FFFFFF",transition:"$default",borderWidth:"1px",borderStyle:"solid",borderColor:"#E6E6E6",".dropdown-icon":{cursor:"pointer",flexShrink:0,width:"$6",height:"$6",display:"flex",justifyContent:"center",alignItems:"center",padding:0,border:"none",background:"transparent",svg:{width:"$4",height:"$4"}},"&:focus-within":{borderColor:"$cdgBlue"},input:{height:"$6_5",width:4,padding:0,margin:0,border:"none","&:focus":{outline:"none"},"&:focus-visible":{outline:"none"}},variants:{isEmpty:{true:{button:{p:{color:"#B4B4B4"}}}},isDisabled:{true:{cursor:"not-allowed !important","& > *":{cursor:"not-allowed !important"}}},isErrored:{true:{borderColor:"$danger","&:focus-within":{borderColor:"$danger"}}}}}),Fe=K("div",{flexGrow:1,alignItems:"center",minHeight:"$7",display:"flex",gap:"$2_5",flexWrap:"wrap",p:{color:"#B4B4B4",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:"$label1",fontWeight:"$semibold",height:"$6",display:"flex",alignItems:"center",flexGrow:1,border:"none",textAlign:"start",padding:0,margin:0}}),Be=K("div",{border:"1px solid #EDEBE9",borderRadius:"$full",padding:"$1 $3",fontSize:"$label1",cursor:"default",fontWeight:"$semibold",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2147483640,gap:"$2",div:{width:"fit-content",height:"fit-content"}}),Ee=i.forwardRef((t,c)=>{const{collection:d,numberOfRows:s}=t,h=D(c);return s&&s>=0?e("div",{ref:h,style:{position:"absolute",top:0,left:"-9999px",overflow:"hidden",visibility:"hidden",whiteSpace:"nowrap",zIndex:-99999999},children:d.slice(0,Math.min(s,d.length)).map(m=>e(Y,{item:m,focusKey:void 0,currentKeys:[],disabledKeys:[],onHover:()=>{},onSelect:()=>{}},m.key))}):null}),Ae=Ee,Me=()=>a("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:[e("g",{clipPath:"url(#clip0_5299_13653)",children:e("path",{d:"M9.11731 7.88215C9.45908 8.22392 9.45908 8.77759 9.11731 9.11936C8.94779 9.29024 8.72359 9.375 8.49938 9.375C8.27518 9.375 8.05153 9.28956 7.88092 9.11867L4.99966 6.23892L2.11867 9.11799C1.94779 9.29024 1.72386 9.375 1.49993 9.375C1.276 9.375 1.05235 9.29024 0.881328 9.11799C0.539557 8.77622 0.539557 8.22255 0.881328 7.88078L3.76313 4.99897L0.881328 2.11854C0.539557 1.77677 0.539557 1.2231 0.881328 0.881328C1.2231 0.539557 1.77677 0.539557 2.11854 0.881328L4.99966 3.7645L7.88146 0.882695C8.22323 0.540925 8.7769 0.540925 9.11867 0.882695C9.46044 1.22446 9.46044 1.77813 9.11867 2.1199L6.23687 5.00171L9.11731 7.88215Z",fill:"#3B3A39"})}),e("defs",{children:e("clipPath",{id:"clip0_5299_13653",children:e("rect",{width:"10",height:"10",fill:"white"})})})]});function Z(t,c){if(c!=null&&c.length>0){const d=[];for(const s of c)d.push(s);return d}else if(t!=null&&t.length>0){const d=[];for(const s of t)d.push(s);return d}return[]}const Oe=i.forwardRef((t,c)=>{var G;const{css:d={},isOpen:s,children:h,isErrored:m,isDisabled:f,isRequired:k,isReadOnly:C,helperText:b,defaultOpen:I,errorMessage:L,selectedKeys:S,numberOfRows:A,icon:v=e(Ie,{}),disabledKeys:p=[],isLoading:V=!1,defaultSelectedKeys:M=[],onLoadMore:ee=()=>{}}=t,[x,w]=i.useState(!1),[R,ne]=i.useState(""),[j,N]=i.useState(!1),[u,O]=i.useState(Z(M,S)),[y,$]=i.useState(),_=i.useRef(!0),te=D(c),F=D(null),re=D(null),W=D(null),le=i.useRef(null),T=i.useRef(null),g=i.useMemo(()=>ke(h,Q),[h]),oe=i.useMemo(()=>ve(h),[h]),H=i.useMemo(()=>!j||R===""?g:g.filter(r=>{const l=we(r);return l==null?void 0:l.toLowerCase().includes(R.toLowerCase())}),[g,R,j]),B=i.useMemo(()=>new Ce(g,p),[g,p]),P=i.useMemo(()=>{const r=[];return g.length>0&&u&&u.length>0&&u.forEach(l=>{const o=g.find(E=>E.key===l);r.push({key:l,rendered:o==null?void 0:o.props.children})}),r},[u,g,u.length]);i.useEffect(()=>{O(Z(M,S))},[JSON.stringify(S),JSON.stringify(M)]),i.useEffect(()=>{!s&&I&&w(I),s&&w(s)},[s]),i.useEffect(()=>{var r,l,o,E,J;$([...u].pop()),(r=t.onOpenChange)==null||r.call(t,x),x?((l=t.onFocus)==null||l.call(t),(o=W.current)==null||o.focus(),_.current=!1):_.current?(J=W.current)==null||J.blur():(E=t.onBlur)==null||E.call(t)},[x]);const ie=r=>{var o;const l=new Set(u);u.includes(r)&&(l.delete(r),O([...l]),(o=t.onSelectionChange)==null||o.call(t,[...l]))},ae=r=>{if(F.current){const l=r.target.value;if(N(!0),ne(l),l!==""){const o=document.createElement("div");o.style.position="absolute",o.style.top="0",o.style.left="-9999px",o.style.overflow="hidden",o.style.visibility="hidden",o.style.whiteSpace="nowrap",o.style.height="0",o.style.width="fit-content",o.style.maxWidth=`${F.current.clientWidth-62}px`,o.innerHTML=l.replace(/\s/g,"&nbsp;"),document.body.appendChild(o),r.target.focus(),r.target.style.width=`${o.clientWidth+4}px`,o.remove()}else r.target.style.width="4px"}},de=r=>{switch(r.key){case"ArrowUp":case"ArrowLeft":{r.preventDefault();const l=y!=null&&y!=-1?B.getKeyAbove(y):B.getFirstKey();l&&$(l);break}case"ArrowDown":case"ArrowRight":{r.preventDefault();const l=y!=null&&y!=-1?B.getKeyBelow(y):B.getFirstKey();l&&$(l);break}case"Enter":{r.preventDefault(),y&&(q(y),w(!1));break}case"Escape":{r.preventDefault(),w(!1);break}}},se=()=>{N(!1),w(!1)},q=r=>{var l;if(!C){const o=new Set(u);u.includes(r)?o.delete(r):o.add(r),O([...o]),(l=t.onSelectionChange)==null||l.call(t,[...o]),$(r)}},ce=r=>{r&&$(r)},U=()=>{f||w(!0)};return a(Ke,{css:d,ref:te,children:[t.label&&a("label",{onClick:U,children:[t.label,k&&e("span",{children:"*"})]}),a(Le,{ref:F,isErrored:!!m,isDisabled:!!f,onClick:U,children:[a(Fe,{children:[P.length===0&&R===""&&!x&&e("p",{children:t.placeholder}),P.length>0&&P.map(r=>{const l=f||p.includes(r.key);return a(Be,{style:{cursor:f?"not-allowed":"pointer"},children:[e("div",{children:r.rendered}),l?e(he,{}):e("div",{onClick:()=>{!f&&![...p].includes(r.key)&&ie(r.key)},children:e(Me,{})})]},r.key)}),!f&&e("input",{type:"text",ref:W,value:R,onChange:ae})]}),e("div",{className:"dropdown-icon",children:v})]}),H&&x&&e(xe,{children:e(ye,{popoverRef:re,triggerRef:F,isEmpty:H.length===0,maxULHeight:(G=T.current)==null?void 0:G.clientHeight,close:se,handleKeyDown:de,children:e(De,{focusKey:y,isLoading:V,collection:H,rootChildren:h,listBoxRef:le,currentKeys:u,disabledKeys:p,sectionCollection:oe,onHover:ce,onSelect:q,onLoadMore:ee})})}),e(Ae,{ref:T,collection:g,numberOfRows:A}),L&&e(X,{error:!!m,children:L}),b&&e(X,{children:b})]})}),n=Oe;n.Item=Q;n.Header=be;n.Section=Se;n.displayName="MultipleDropdown";const qe=()=>{const[t,c]=i.useState([]);return a(ue,{children:[e("h3",{children:"Controlled"}),a(n,{label:"Favorite Animal",disabledKeys:["cat"],placeholder:"Choose an animal",selectedKeys:t,defaultSelectedKeys:["cat"],isRequired:!0,onSelectionChange:d=>c(d),onBlur:()=>console.log("blur"),onFocus:()=>console.log("focus"),children:[a(n.Item,{children:[e(z,{style:{marginRight:5}}),"Red Panda"]},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"UnControlled"}),a(n,{label:"Favorite Animal",disabledKeys:["snake"],defaultSelectedKeys:["snake"],placeholder:"Choose an animal",children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Errored"}),a(n,{label:"Favorite Animal",disabledKeys:["snake"],placeholder:"Choose an animal",isErrored:!0,errorMessage:"Error Message",helperText:"Helper Message",children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Loading"}),a(n,{label:"Favorite Animal",placeholder:"Choose an animal",isLoading:!0,children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"With Header"}),a(n,{disabledKeys:["snake"],label:"Favorite Animal",placeholder:"Choose an animal",children:[e(n.Header,{children:a("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%",padding:"8px 16px",borderBottom:"2px solid #EDEBE9"},children:[e("span",{style:{color:"#323130",fontSize:"12px",fontWeight:"bold",padding:0,margin:0},children:"Filter"}),e("button",{style:{fontSize:"12px",fontWeight:"bold",color:"#A4262C",border:0,cursor:"pointer",backgroundColor:"transparent"},children:"Clear"})]})}),e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"With Icon"}),a(n,{label:"Favorite Animal",placeholder:"Choose an animal",icon:e(z,{}),children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Number of rows"}),a(n,{label:"Favorite Animal",placeholder:"Choose an animal",numberOfRows:4,children:[e(n.Item,{children:"Red Panda"},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]}),e("h3",{children:"Disabled"}),a(n,{label:"Favorite Animal",disabledKeys:["cat"],placeholder:"Choose an animal",selectedKeys:t,defaultSelectedKeys:["cat"],isRequired:!0,onSelectionChange:d=>c(d),isDisabled:!0,children:[a(n.Item,{children:[e(z,{style:{marginRight:5}}),"Red Panda"]},"red panda"),e(n.Item,{children:"Cat"},"cat"),e(n.Item,{children:"Dog"},"dog"),e(n.Item,{children:"Aardvark"},"aardvark"),e(n.Item,{children:"Kangaroo"},"kangaroo"),e(n.Item,{children:"Snake"},"snake")]})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{qe as Default};
