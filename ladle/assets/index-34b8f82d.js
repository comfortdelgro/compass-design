import{j as n}from"./jsx-runtime-ea7736fc.js";import{g as X}from"./get-80d15efb.js";import{r}from"./index-6c164b11.js";import{C as Y}from"./objectToCSS-aff350d4.js";const Z="_tagBoxV2_173q8_7",T="_container_173q8_15",A="_tagCloseIcon_173q8_35",R="_tagContent_173q8_48",ee="_tagInput_173q8_59",te="_tagContainer_173q8_72",ne="_buttonContainer_173q8_88",ae="_newTagButton_173q8_101",se="_newTagInput_173q8_126",re="_label_173q8_149",le="_asterisk_173q8_164",ce="_containerIsErrored_173q8_171",oe="_containerIsDisabled_173q8_174",ue="_containerFocused_173q8_179",ie="_tagContainerIsErrored_173q8_183",a={tagBoxV2:Z,container:T,tagCloseIcon:A,tagContent:R,tagInput:ee,tagContainer:te,buttonContainer:ne,newTagButton:ae,newTagInput:se,label:re,asterisk:le,containerIsErrored:ce,containerIsDisabled:oe,containerFocused:ue,tagContainerIsErrored:ie},q=r.forwardRef(({isRequired:y,tagBoxLabel:h,tags:f=[],onAddTag:c,onEditTag:l,onRemoveTag:s,isDisabled:u=!1,isEditable:b,isErrored:g=!1,className:I,customValidationHandler:k,addTagPlaceholder:V,canRemoveOnDeleteAndBackspaceKey:D,css:F={},...$},H)=>{const[w,C]=r.useState(!1),[m,B]=r.useState(!1),[K,_]=r.useState(""),[o,i]=r.useState(null),d=r.useRef(null),x=r.useRef(null);r.useImperativeHandle(H,()=>({focus(){var e;(e=d.current)==null||e.focus()},blur(){var e;(e=d.current)==null||e.blur()}}));const M=e=>!!e&&e.trim()!=="",p=e=>{const t=M(e);return k?t&&k(e):t},v=()=>{var e;(e=d.current)==null||e.focus()},S=()=>{C(!0),setTimeout(()=>{var e;return(e=d.current)==null?void 0:e.focus()})},z=()=>{x.current&&!g&&B(!0)},L=e=>{_(e.target.value)},P=e=>{switch(e.key){case"Enter":case"Escape":{p(e.currentTarget.value)&&(c==null||c(e.currentTarget.value.trim())),_(""),C(!1);break}case"Backspace":case"Delete":{e.currentTarget.value===""&&D&&f&&f.length&&(s==null||s(f.at(-1)));break}}},j=e=>{x.current&&!g&&B(!1),p(e.currentTarget.value)&&(c==null||c(e.currentTarget.value.trim())),_(""),C(!1)},O=(e,t)=>{i({id:t.id,value:e.target.value})},U=(e,t)=>{e.preventDefault(),p(e.currentTarget.value)?(l==null||l({id:t.id,value:e.currentTarget.value.trim()}),i(null)):s==null||s(t)},E=(e,t)=>{switch(e.key){case"Enter":{e.preventDefault(),p(e.currentTarget.value)&&(l==null||l({id:t.id,value:e.currentTarget.value.trim()}),i(null));break}case"Escape":{e.preventDefault(),p(e.currentTarget.value)?(l==null||l({id:t.id,value:e.currentTarget.value.trim()}),i(null)):s==null||s(t);break}}},N=(e,t)=>{e.stopPropagation(),!u&&b&&i(t)},W=(e,t)=>{e.stopPropagation(),s==null||s(t)},G=r.useMemo(()=>[a.tagBoxV2,I,"cdg-tag-box-v2"].filter(Boolean).join(" "),[I]),J=r.useMemo(()=>[a.container,g&&a.containerIsErrored,u&&a.containerIsDisabled,m&&a.containerFocused,"cdg-tag-box-v2-container"].filter(Boolean).join(" "),[m,u,g]),Q=r.useCallback(e=>[a.tagContainer,e.isErrored&&a.tagContainerIsErrored,"cdg-tag-box-v2-tag"].filter(Boolean).join(" "),[]);return n.jsx(Y,{css:F,children:n.jsxs("div",{className:G,...$,children:[n.jsxs("div",{"aria-label":h,onClick:v,className:`${a.label} cdg-tag-box-v2-label`,children:[h,y&&n.jsx("span",{className:`${a.asterisk} cdg-tag-box-v2-asterisk`,children:"*"})]}),n.jsxs("div",{ref:x,onClick:v,onFocus:z,onBlur:j,className:J,children:[f.map(e=>n.jsxs("div",{onClick:t=>N(t,e),onDoubleClick:t=>N(t,e),className:Q(e),children:[n.jsx("div",{title:b?"Click to edit":void 0,className:`${a.tagContent} cdg-tag-box-v2-tag-content`,children:o&&o.id===e.id?n.jsx("input",{type:"text",autoFocus:!0,size:X(o,"value.length",0)+1,value:o.value,onChange:t=>O(t,e),onBlur:t=>U(t,e),onKeyDown:t=>E(t,e),className:`${a.tagInput} cdg-tag-box-v2-tag-input`}):e.value}),!u&&n.jsx("svg",{width:9,viewBox:"0 0 384 512",onClick:t=>W(t,e),style:{display:o&&o.id===e.id?"none":"inline-block"},className:`${a.tagCloseIcon} cdg-tag-box-v2-tag-icon`,children:n.jsx("path",{fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})})]},e.id)),!u&&n.jsxs("div",{className:`${a.buttonContainer} cdg-tag-box-v2-add`,children:[!w&&n.jsxs("div",{onClick:S,className:`${a.newTagButton} cdg-tag-box-v2-add-button`,children:[n.jsx("svg",{width:11,viewBox:"0 0 448 512",children:n.jsx("path",{fill:"currentColor",d:"M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32V224H48c-17.7 0-32 14.3-32 32s14.3 32 32 32H192V432c0 17.7 14.3 32 32 32s32-14.3 32-32V288H400c17.7 0 32-14.3 32-32s-14.3-32-32-32H256V80z"})}),n.jsx("p",{children:"New Tag"})]}),n.jsx("input",{type:"text",style:{display:w?"inline-block":"none"},placeholder:V,ref:d,value:K,onClick:e=>e.stopPropagation(),onChange:L,onKeyDown:P,onBlur:j,className:`${a.newTagInput} cdg-tag-box-v2-add-input`})]})]})]})})});q.__docgenInfo={description:"",methods:[{name:"focus",docblock:null,modifiers:[],params:[],returns:null},{name:"blur",docblock:null,modifiers:[],params:[],returns:null}],displayName:"TagBoxV2",props:{tags:{defaultValue:{value:"[]",computed:!1},required:!1},isDisabled:{defaultValue:{value:"false",computed:!1},required:!1},isErrored:{defaultValue:{value:"false",computed:!1},required:!1},css:{defaultValue:{value:"{}",computed:!1},required:!1}}};q.displayName="Tag-Box-V2";export{q as T};
