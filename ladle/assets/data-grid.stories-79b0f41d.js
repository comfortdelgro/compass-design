import{k as U,l as X,m as q,n as P,o as _,p as J,q as Q,r as Y}from"./index-bbc6e670.js";import{s,R as g,r as u,j as t,F as M,a as i}from"./index-4f639d7a.js";import{f as k,u as ee,g as te,a as oe,b as ne,c as re,d as ae}from"./index-494a596c.js";import{p as B}from"./pick-child-6c82c64d.js";import{u as C}from"./use-dom-ref-172c1966.js";import{S as le,a as ie,b as se}from"./checkbox.styles-aa1cc09d.js";import{I as de,a as L}from"./index-0450e891.js";import"./index-a4fa3985.js";import"./index-5b008f88.js";import"./index-e7979014.js";import{F as N}from"./index.es-d62ae1d4.js";import{P as ce}from"./pagination-4e04837e.js";import{S as ue}from"./searchfield-7f5a8749.js";import{B as D}from"./button-13e47faa.js";const ge=s("td",{position:"relative",textAlign:"left",fontSize:"$label1",padding:"$3_5 $3",border:"3px solid gray",zIndex:"10","&:hover":{backgroundColor:"#F7F8F9",border:"3px solid black"}}),he=g.forwardRef(({cell:e,row:r,onChangeCell:n},l)=>{const a=C(l),{getValue:h,row:{index:d},column:{id:o}}=e,[m,p]=u.useState(!1),[S,x]=u.useState(""),w=u.useRef(null),v=()=>{const f=h();x(f),p(!0)},F=f=>{x(f.target.value)},G=()=>{p(!1),n&&n({value:S,row:{index:d},column:{id:o}})},$=f=>{f.key==="Enter"&&(p(!1),n&&n({value:S,row:{index:d},column:{id:o}}))};return u.useEffect(()=>{const f=I=>{m&&w.current&&!w.current.contains(I.target)&&G()};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[m]),t(ge,{ref:a,key:e.id,style:{width:e.column.getSize(),background:e.getIsGrouped()?"#0aff0082":e.getIsAggregated()?"#ffa50078":e.getIsPlaceholder()?"#ff000042":"white"},onDoubleClick:v,onBlur:G,children:m?t("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0},children:t("input",{style:{width:"100%",height:"100%",boxSizing:"border-box"},ref:w,type:"text",value:S,onChange:F,onKeyDown:$})}):e.getIsGrouped()?t(M,{children:i("button",{onClick:r.getToggleExpandedHandler(),style:{cursor:r.getCanExpand()?"pointer":"normal",display:"flex",alignItems:"center"},children:[r.getIsExpanded()?t("svg",{width:"12",height:"24",viewBox:"0 0 32 32",fill:"currentColor",children:t("path",{d:"M15.9989 24C15.3734 24 14.7477 23.7582 14.271 23.2746L2.04944 10.8936C1.09463 9.92634 1.09463 8.35938 2.04944 7.39211C3.00425 6.42485 4.55105 6.42485 5.50586 7.39211L15.9989 18.0262L26.4941 7.39405C27.449 6.42679 28.9957 6.42679 29.9506 7.39405C30.9054 8.36131 30.9054 9.92827 29.9506 10.8955L17.729 23.2765C17.2516 23.7601 16.6252 24 15.9989 24Z"})}):t("svg",{width:"12",height:"24",viewBox:"0 0 32 32",fill:"currentColor",children:t("path",{d:"M10.9997 30C10.4879 30 9.97594 29.7722 9.58594 29.3165C8.80469 28.4051 8.80469 26.9286 9.58594 26.0172L18.1747 16.0009L9.58594 5.98281C8.80469 5.07141 8.80469 3.59495 9.58594 2.68355C10.3672 1.77215 11.6328 1.77215 12.4141 2.68355L22.4141 14.3495C23.1953 15.2609 23.1953 16.7373 22.4141 17.6487L12.4141 29.3146C12.0234 29.774 11.5116 30 10.9997 30Z"})})," ",k(e.column.columnDef.cell,e.getContext())," (",r.subRows.length,")"]})}):e.getIsAggregated()?k(e.column.columnDef.aggregatedCell??e.column.columnDef.cell,e.getContext()):e.getIsPlaceholder()?null:k(e.column.columnDef.cell,e.getContext())})}),fe=he,me=s("input",{position:"absolute",opacity:0,height:0,width:0,cursor:"pointer"}),pe=({indeterminate:e,className:r="",...n})=>{const l=g.useRef(null);return g.useEffect(()=>{typeof e=="boolean"&&(l.current.indeterminate=!n.checked&&e)},[l,e]),i(le,{children:[t(me,{type:"checkbox",ref:l,className:r+" cursor-pointer",...n}),t(ie,{disabled:!1,rounded:!1,children:t(se,{children:t(de,{icon:e?U:X,className:"icon"})})})]})},V=pe,be=({indeterminate:e,className:r="",...n})=>t(V,{indeterminate:e,type:"checkbox",className:r+" cursor-pointer",...n}),Ce=be,we=s("div",{position:"absolute",right:"-200%",zIndex:99,textAlign:"left",fontSize:"$label1"}),ye=u.forwardRef(({column:e,table:r},n)=>{var h;const l=(h=r.getPreFilteredRowModel().flatRows[0])==null?void 0:h.getValue(e.id),a=e.getFilterValue();return t(we,{children:typeof l=="number"?i("div",{className:"flex space-x-2",children:[t("input",{type:"number",ref:n,value:(a==null?void 0:a[0])??"",onChange:d=>e.setFilterValue(o=>[d.target.value,o==null?void 0:o[1]]),placeholder:"Min",className:"w-24 border shadow rounded"}),t("input",{type:"number",ref:n,value:(a==null?void 0:a[1])??"",onChange:d=>e.setFilterValue(o=>[o==null?void 0:o[0],d.target.value]),placeholder:"Max",className:"w-24 border shadow rounded"})]}):t("input",{type:"text",ref:n,value:a??"",onChange:d=>e.setFilterValue(d.target.value),placeholder:"Search...",className:"w-36 border shadow rounded"})})}),Re=ye,H=s("span",{color:"$gray30",textAlign:"right"}),xe=s("th",{textAlign:"left",fontSize:"$label1",fontWeight:"$semibold",padding:"$3_5 $3",position:"relative",border:"3px solid gray"}),Se=s("div",{position:"absolute",right:0,top:0,height:"100%",width:"5px",background:"rgba(0, 0, 0, 0.5)",cursor:"col-resize",opacity:0,"&:hover":{opacity:1}}),ve=g.forwardRef(({headerProps:e},r)=>{const n=C(r);return t(Se,{onMouseDown:e.getResizeHandler(),onTouchStart:e.getResizeHandler(),className:`resizer ${e.column.getIsResizing()?"isResizing":""}`,ref:n})}),De=ve,Ge=g.forwardRef(({headerProps:e,tableOption:r},n)=>{var m,p;const l=(p=(m=e==null?void 0:e.column)==null?void 0:m.columnDef)==null?void 0:p.enableResizing,a=C(n),[h,d]=u.useState(!1),o=()=>{d(!h)};return t(xe,{ref:a,key:e.id,colSpan:e.colSpan,style:{width:e.getSize()},children:i("div",{onClick:e.column.getToggleSortingHandler(),style:{cursor:e.column.getCanSort()?"pointer":"unset",userSelect:e.column.getCanSort()?"none":"unset"},children:[e.isPlaceholder?null:i("div",{style:e.column.getCanSort()?{display:"flex",minHeight:"30px",justifyContent:"space-between",alignItems:"center"}:{},children:[i("div",{onClick:e.column.getToggleGroupingHandler(),children:[e.column.getIsGrouped()?i("span",{children:["(",e.column.getGroupedIndex(),")"]}):t(M,{}),k(e.column.columnDef.header,e.getContext())]}),{asc:t(H,{"aria-hidden":"true",style:{visibility:"visible"},children:i("svg",{width:"24",height:"26",viewBox:"0 0 24 26",fill:"none",children:[t("path",{d:"M12.8476 4.34166C12.379 3.88611 11.6181 3.88611 11.1495 4.34166L6.35152 9.00651C6.00666 9.34179 5.90546 9.84108 6.09288 10.2784C6.2803 10.7157 6.71512 11 7.20242 11H16.7984C17.282 11 17.7205 10.7157 17.908 10.2784C18.0954 9.84108 17.9904 9.34179 17.6493 9.00651L12.8513 4.34166H12.8476Z",fill:["#A19F9D","#EDEBE9"][0]}),t("path",{d:"M11.1524 21.3277C11.621 21.7834 12.3819 21.7834 12.8505 21.3277L17.6485 16.661C17.9933 16.3256 18.0945 15.8261 17.9071 15.3886C17.7197 14.9511 17.2849 14.6667 16.7976 14.6667L7.20159 14.6704C6.71804 14.6704 6.27947 14.9548 6.09205 15.3923C5.90463 15.8298 6.00958 16.3292 6.35069 16.6647L11.1487 21.3313L11.1524 21.3277Z",fill:["#A19F9D","#EDEBE9"][1]})]})}),desc:t(H,{"aria-hidden":"true",style:{visibility:"visible"},children:i("svg",{width:"24",height:"26",viewBox:"0 0 24 26",fill:"none",children:[t("path",{d:"M12.8476 4.34166C12.379 3.88611 11.6181 3.88611 11.1495 4.34166L6.35152 9.00651C6.00666 9.34179 5.90546 9.84108 6.09288 10.2784C6.2803 10.7157 6.71512 11 7.20242 11H16.7984C17.282 11 17.7205 10.7157 17.908 10.2784C18.0954 9.84108 17.9904 9.34179 17.6493 9.00651L12.8513 4.34166H12.8476Z",fill:["#EDEBE9","#A19F9D"][0]}),t("path",{d:"M11.1524 21.3277C11.621 21.7834 12.3819 21.7834 12.8505 21.3277L17.6485 16.661C17.9933 16.3256 18.0945 15.8261 17.9071 15.3886C17.7197 14.9511 17.2849 14.6667 16.7976 14.6667L7.20159 14.6704C6.71804 14.6704 6.27947 14.9548 6.09205 15.3923C5.90463 15.8298 6.00958 16.3292 6.35069 16.6647L11.1487 21.3313L11.1524 21.3277Z",fill:["#EDEBE9","#A19F9D"][1]})]})})}[e.column.getIsSorted()]??null,e.column.getCanFilter()?i("div",{children:[t("svg",{onClick:o,onTouchStart:o,width:"24",height:"26",viewBox:"0 0 28 23",fill:"#A19F9D",children:t("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"})}),t("div",{style:{display:h?"block":"none",position:"relative"},children:t(Re,{column:e.column,table:r,setFiltering:d})})]}):null]}),l&&t(De,{headerProps:e})]})})}),ke=Ge,Me=s("div",{paddingTop:"$6"}),Fe=g.forwardRef((e,r)=>{const{css:n={},children:l}=e,a=C(r);return t(Me,{css:n,ref:a,children:l})}),j=Fe,$e=s("tr",{background:"$primaryBg"}),Ie=g.forwardRef(({children:e},r)=>{const n=C(r);return t($e,{ref:n,children:e})}),Le=Ie,Ne=s("div",{minHeight:"200px",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}),Ee=({colSpan:e})=>t("tr",{children:t("td",{colSpan:e,children:i(Ne,{children:[t("svg",{width:"64",height:"41",viewBox:"0 0 64 41",xmlns:"http://www.w3.org/2000/svg",children:i("g",{transform:"translate(0 1)",fill:"none",fillRule:"evenodd",children:[t("ellipse",{fill:"#f5f5f5",cx:"32",cy:"33",rx:"32",ry:"7"}),i("g",{fillRule:"nonzero",stroke:"#d9d9d9",children:[t("path",{d:"M55 12.76L44.854 1.258C44.367.474 43.656 0 42.907 0H21.093c-.749 0-1.46.474-1.947 1.257L9 12.761V22h46v-9.24z"}),t("path",{d:"M41.613 15.931c0-1.605.994-2.93 2.227-2.931H55v18.137C55 33.26 53.68 35 52.05 35h-40.1C10.32 35 9 33.259 9 31.137V13h11.16c1.233 0 2.227 1.323 2.227 2.928v.022c0 1.605 1.005 2.901 2.237 2.901h14.752c1.232 0 2.237-1.308 2.237-2.913v-.007z",fill:"#fafafa"})]})]})}),t("div",{className:"empty-description",style:{color:"rgba(0, 0, 0, 0.25)"},children:"No data"})]})})}),ze=s("div",{width:"200px",height:"20px",backgroundColor:"#f0f0f0",borderRadius:"10px",position:"relative"}),Be=s("div",{height:"100%",borderRadius:"10px",transition:"width 0.5s ease-in-out","&.low":{backgroundColor:"#f44336"},"&.average":{backgroundColor:"#ffc107"},"&.high":{backgroundColor:"#4caf50"}}),He=s("span",{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"#000"}),Te=({progress:e})=>{let r="";return e>=0&&e<=30?r="low":e>=30&&e<=60?r="average":r="high",i(ze,{className:"progress-bar",children:[t(Be,{className:`progress ${r}`,style:{width:`${e}%`}}),t(He,{className:"progress-label",children:`${e}%`})]})},K=Te,Ae=s("tr",{background:"$whiteText",backgroundColor:"transparent",borderLeftWidth:"$medium",borderLeftStyle:"solid",borderLeftColor:"transparent",borderWidth:"$borderWidths.light",transition:"$default"}),Ve=g.forwardRef(({children:e,isSelected:r},n)=>{const l=C(n);return t(Ae,{css:{backgroundColor:r?"$cdgBlue10":"unset",borderLeftColor:r?"$cdgBlue":"inherit"},ref:l,children:e})}),je=Ve,Ke=s("tbody",{}),We=({as:e="tbody",children:r,...n})=>t(Ke,{as:e,...n,children:r}),T=We,Oe=s("div",{paddingBottom:"$6",overflowX:"auto"}),Ze=g.forwardRef((e,r)=>{const{css:n={},children:l}=e,a=C(r);return t(Oe,{css:n,ref:a,children:l})}),W=Ze,Ue=s("div",{overflowX:"auto",table:{fontFamily:"$sans",borderCollapse:"collapse",width:"100%",border:"1px solid #F5F5F6"}}),Xe=s("div",{width:"100%"}),qe=g.forwardRef((e,r)=>{var z;const[n,l]=u.useState([]),[a,h]=u.useState({}),[d,o]=g.useState([]),{css:m={},data:p,columns:S,options:x,onManualSorting:w,onChangeRowSelection:v,onUpdateData:F,children:G,...$}=e,{child:f,rest:I}=B(G,W),{child:E}=B(I,j),O=C(r),y=ee({state:{grouping:d,rowSelection:a,sorting:x.initialSortBy?x.initialSortBy:n},onGroupingChange:o,getExpandedRowModel:te(),getGroupedRowModel:oe(),onSortingChange:l,getCoreRowModel:ne(),getSortedRowModel:re(),getFilteredRowModel:ae(),onRowSelectionChange:h,debugTable:!0,data:p,columns:S,isMultiSortEvent:()=>!0,...x});return u.useEffect(()=>{const R=y.getSelectedRowModel().rows.map(Z=>Z.original);v==null||v(R)},[a]),u.useEffect(()=>{w==null||w(n)},[n]),i(Xe,{css:m,children:[f&&t(M,{children:f}),t(Ue,{...$,children:i("table",{ref:O,children:[t(T,{as:"thead",children:y.getHeaderGroups().map(b=>t(Le,{children:b.headers.map(R=>t(ke,{headerProps:R,tableOption:y},R.id))},b.id))}),t(T,{as:"tbody",children:y.getRowModel().rows.length===0||y.getRowModel().rows===void 0?t(Ee,{colSpan:(z=y.getAllLeafColumns())==null?void 0:z.length}):y.getRowModel().rows.map(b=>t(je,{isSelected:b.getIsSelected(),children:b.getVisibleCells().map(R=>t(fe,{cell:R,row:b,onChangeCell:F||(()=>{})},R.id))},b.id))})]})}),E&&t(M,{children:E})]})}),c=qe;c.Toolbar=W;c.Footer=j;c.Checkbox=V;c.CheckboxCell=Ce;c.ProgressPercentage=K;c.Toolbar.displayName="ToolBar";c.Footer.displayName="Footer";c.ProgressPercentage.displayName="ProgressPercentage";c.displayName="DataGrid";const Pe=({status:e})=>i("div",{children:[t("span",{style:{paddingRight:"5px"},children:(()=>{switch(e){case"relationship":return t(N,{icon:_});case"complicated":return t(N,{icon:P});case"single":return t(N,{icon:q});default:return null}})()}),t("span",{children:e})]}),_e=Pe,Je=e=>{const r=[];for(let n=0;n<e;n++)r.push(n);return r},A=e=>{let r="";const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",l=n.length;for(let a=0;a<e;a++)r+=n.charAt(Math.floor(Math.random()*l));return r},Qe=(e,r)=>{const n=e.getTime(),l=r.getTime(),a=Math.floor(Math.random()*(l-n+1)+n);return new Date(a)},Ye=()=>({firstName:A(5),lastName:A(5),age:Math.floor(Math.random()*40),visits:Math.floor(Math.random()*1e3),progress:Math.floor(Math.random()*100),createdAt:Qe(new Date(2020,0,1),new Date(2029,11,31)),status:["relationship","complicated","single"][Math.floor(Math.random()*["relationship","complicated","single"].length)]});function et(...e){const r=(n=0)=>{const l=e[n];return Je(l).map(a=>({...Ye(),subRows:e[n+1]?r(n+1):null}))};return r()}const mt=()=>{const[e,r]=u.useState(1),[n]=u.useState(()=>et(10)),l={enableSorting:!0,enableMultiSort:!0,columnResizeMode:"onChange",manualSorting:!1,initialSortBy:[{id:"firstName",desc:!0},{id:"lastName",desc:!1}]},a=o=>{console.log("stateSorting",o)},h=o=>{console.log("stateSelectedRows",o)},d=g.useMemo(()=>[{id:"select",header:({table:o})=>t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t(c.CheckboxCell,{checked:o.getIsAllRowsSelected(),indeterminate:o.getIsSomeRowsSelected(),onChange:o.getToggleAllRowsSelectedHandler()})}),enableGrouping:!1,cell:({row:o})=>t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t(c.CheckboxCell,{checked:o.getIsSelected(),indeterminate:o.getIsSomeSelected(),onChange:o.getToggleSelectedHandler()})})},{id:"name",header:()=>t("div",{style:{textAlign:"center"},children:"Name"}),footer:o=>o.column.id,enableGrouping:!1,columns:[{accessorKey:"firstName",cell:o=>o.getValue(),footer:o=>o.column.id,enableResizing:!1,sortDescriptor:"asc"},{accessorFn:o=>o.lastName,id:"lastName",cell:o=>o.getValue(),header:()=>t("span",{children:"Last Name"}),footer:o=>o.column.id,enableResizing:!0}]},{id:"otherInfo",header:()=>t("div",{style:{textAlign:"center"},children:"Other info"}),footer:o=>o.column.id,enableGrouping:!1,columns:[{accessorKey:"age",header:()=>"Age",footer:o=>o.column.id},{accessorKey:"visits",header:()=>t("span",{children:"Visits"}),footer:o=>o.column.id},{accessorKey:"status",header:"Status",cell:o=>t(_e,{status:o.getValue()}),footer:o=>o.column.id},{accessorKey:"progress",header:"Profile Progress",cell:o=>t(K,{progress:Number(o.getValue())}),footer:o=>o.column.id}]}],[]);return t("div",{children:i(c,{data:n,columns:d,options:l,onManualSorting:a,onChangeRowSelection:h,className:"yagin",children:[i(c.Toolbar,{css:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[t(ue,{placeholder:"Search"}),i("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"0.5rem"},children:[t(D,{variant:"primary",children:"Button"}),t(D,{variant:"secondary",children:"Button"}),t(D,{variant:"ghost",children:t(L,{icon:J})}),t(D,{variant:"ghost",children:t(L,{icon:Q})}),t(D,{variant:"ghost",children:t(L,{icon:Y})})]})]}),i(c.Footer,{css:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[t("div",{}),i("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"0.5rem"},children:[i("div",{style:{fontWeight:"600"},children:[(e-1)*10+1," - ",(e-1)*10+10," of 100"]}),t(ce,{page:e,onChange:o=>r(o),total:10})]})]})]})})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{mt as DataGridStory};
