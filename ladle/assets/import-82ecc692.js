import{R as D,r as h}from"./index-c4b12c2d.js";import{a8 as O,af as pe,ag as oe,ah as $e,ai as V,R as ve,aj as Ke,j as me,ak as Se,al as J,am as we,a0 as ae,ad as xe,a3 as Fe,an as Z,ao as Te,ap as Ee}from"./import-2eb6a65c.js";import{a as Me}from"./import-4b194837.js";function ce(l){return null}ce.getCollectionNode=function*(e,t){let{childItems:i,title:s,children:n}=e,r=e.title||e.children,u=e.textValue||(typeof r=="string"?r:"")||e["aria-label"]||"";!u&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:r,textValue:u,"aria-label":e["aria-label"],hasChildNodes:Ie(e),*childNodes(){if(i)for(let c of i)yield{type:"item",value:c};else if(s){let c=[];D.Children.forEach(n,y=>{c.push({type:"item",element:y})}),yield*c}}}};function Ie(l){return l.hasChildItems!=null?l.hasChildItems:!!(l.childItems||l.title&&D.Children.count(l.children)>0)}let et=ce;class Re{build(e,t){return this.context=t,Q(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:i}=e;if(typeof t=="function"){if(!i)throw new Error("props.children was a function but props.items is missing");for(let s of e.items)yield*this.getFullNode({value:s},{renderer:t})}else{let s=[];D.Children.forEach(t,r=>{s.push(r)});let n=0;for(let r of s){let u=this.getFullNode({element:r,index:n},{});for(let c of u)n++,yield c}}}getKey(e,t,i,s){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${s}${t.key}`;let n=t.value;if(n!=null){var r;let u=(r=n.key)!==null&&r!==void 0?r:n.id;if(u==null)throw new Error("No key found for item");return u}return s?`${s}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,i,s){let n=e.element;if(!n&&e.value&&t&&t.renderer){let c=this.cache.get(e.value);if(c&&(!c.shouldInvalidate||!c.shouldInvalidate(this.context))){c.index=e.index,c.parentKey=s?s.key:null,yield c;return}n=t.renderer(e.value)}if(D.isValidElement(n)){let c=n.type;if(typeof c!="function"&&typeof c.getCollectionNode!="function"){let b=typeof n.type=="function"?n.type.name:n.type;throw new Error(`Unknown element <${b}> in collection.`)}let y=c.getCollectionNode(n.props,this.context),m=e.index,p=y.next();for(;!p.done&&p.value;){let b=p.value;e.index=m;let f=b.key;f||(f=b.element?null:this.getKey(n,e,t,i));let v=[...this.getFullNode({...b,key:f,index:m,wrapper:Ae(e.wrapper,b.wrapper)},this.getChildState(t,b),i?`${i}${n.key}`:n.key,s)];for(let g of v){if(g.value=b.value||e.value,g.value&&this.cache.set(g.value,g),e.type&&g.type!==e.type)throw new Error(`Unsupported type <${k(g.type)}> in <${k(s.type)}>. Only <${k(e.type)}> is supported.`);m++,yield g}p=y.next(v)}return}if(e.key==null)return;let r=this,u={type:e.type,props:e.props,key:e.key,parentKey:s?s.key:null,value:e.value,level:s?s.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:Q(function*(){if(!e.hasChildNodes)return;let c=0;for(let y of e.childNodes()){y.key!=null&&(y.key=`${u.key}${y.key}`),y.index=c;let m=r.getFullNode(y,r.getChildState(t,y),u.key,u);for(let p of m)c++,yield p}})};yield u}constructor(){O(this,"cache",new WeakMap)}}function Q(l){let e=[],t=null;return{*[Symbol.iterator](){for(let i of e)yield i;t||(t=l());for(let i of t)e.push(i),yield i}}}function Ae(l,e){if(l&&e)return t=>l(e(t));if(l)return l;if(e)return e}function k(l){return l[0].toUpperCase()+l.slice(1)}function tt(l,e,t,i=[]){let s=h.useMemo(()=>new Re,[]),n=h.useRef(null);return h.useMemo(()=>{if(l.collection)return l.collection;let r=s.build(l,t);return n.current=e(r,n.current),n.current},[s,l.children,l.items,l.collection,t,...i])}function ue(l,e){return typeof e.getChildren=="function"?e.getChildren(l.key):l.childNodes}function Ce(l){return Pe(l,0)}function Pe(l,e){if(e<0)return;let t=0;for(let i of l){if(t===e)return i;t++}}function lt(l){let e;for(let t of l)e=t;return e}function j(l,e,t){if(e.parentKey===t.parentKey)return e.index-t.index;let i=_(l,e),s=_(l,t),n=i.slice(0,s.length).findIndex((r,u)=>r!==s[u]);return n!==-1?(e=i[n],t=s[n],e.index-t.index):-1}function _(l,e){let t=[];for(;(e==null?void 0:e.parentKey)!=null;)e=l.getItem(e.parentKey),t.unshift(e);return t}const ee=new WeakMap;function it(l){let e=ee.get(l);if(e!=null)return e;e=0;let t=i=>{for(let s of i)s.type==="section"?t(ue(s,l)):e++};return t(l),ee.set(l,e),e}function de(l){if(oe()==="virtual"){let e=document.activeElement;$e(()=>{document.activeElement===e&&document.contains(l)&&V(l)})}else V(l)}function De(l){if(!(l instanceof HTMLElement)&&!(l instanceof SVGElement))return!1;let{display:e,visibility:t}=l.style,i=e!=="none"&&t!=="hidden"&&t!=="collapse";if(i){const{getComputedStyle:s}=l.ownerDocument.defaultView;let{display:n,visibility:r}=s(l);i=n!=="none"&&r!=="hidden"&&r!=="collapse"}return i}function Be(l,e){return!l.hasAttribute("hidden")&&(l.nodeName==="DETAILS"&&e&&e.nodeName!=="SUMMARY"?l.hasAttribute("open"):!0)}function fe(l,e){return l.nodeName!=="#comment"&&De(l)&&Be(l,e)&&(!l.parentElement||fe(l.parentElement,l))}const Y=["input:not([disabled]):not([type=hidden])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","a[href]","area[href]","summary","iframe","object","embed","audio[controls]","video[controls]","[contenteditable]"],Le=Y.join(":not([hidden]),")+",[tabindex]:not([disabled]):not([hidden])";Y.push('[tabindex]:not([tabindex="-1"]):not([disabled])');const Oe=Y.join(':not([hidden]):not([tabindex="-1"]),');function he(l,e){return e.some(t=>t.contains(l))}function ye(l,e,t){let i=e!=null&&e.tabbable?Oe:Le,s=document.createTreeWalker(l,NodeFilter.SHOW_ELEMENT,{acceptNode(n){var r;return!(e==null||(r=e.from)===null||r===void 0)&&r.contains(n)?NodeFilter.FILTER_REJECT:n.matches(i)&&fe(n)&&(!t||he(n,t))&&(!(e!=null&&e.accept)||e.accept(n))?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});return e!=null&&e.from&&(s.currentNode=e.from),s}class X{get size(){return this.fastMap.size}getTreeNode(e){return this.fastMap.get(e)}addTreeNode(e,t,i){let s=this.fastMap.get(t??null),n=new te({scopeRef:e});s.addChild(n),n.parent=s,this.fastMap.set(e,n),i&&(n.nodeToRestore=i)}addNode(e){this.fastMap.set(e.scopeRef,e)}removeTreeNode(e){if(e===null)return;let t=this.fastMap.get(e),i=t.parent;for(let n of this.traverse())n!==t&&t.nodeToRestore&&n.nodeToRestore&&t.scopeRef.current&&he(n.nodeToRestore,t.scopeRef.current)&&(n.nodeToRestore=t.nodeToRestore);let s=t.children;i.removeChild(t),s.size>0&&s.forEach(n=>i.addChild(n)),this.fastMap.delete(t.scopeRef)}*traverse(e=this.root){if(e.scopeRef!=null&&(yield e),e.children.size>0)for(let t of e.children)yield*this.traverse(t)}clone(){let e=new X;for(let t of this.traverse())e.addTreeNode(t.scopeRef,t.parent.scopeRef,t.nodeToRestore);return e}constructor(){O(this,"fastMap",new Map),this.root=new te({scopeRef:null}),this.fastMap.set(null,this.root)}}class te{addChild(e){this.children.add(e),e.parent=this}removeChild(e){this.children.delete(e),e.parent=void 0}constructor(e){O(this,"children",new Set),O(this,"contain",!1),this.scopeRef=e.scopeRef}}new X;function st(l,e){let t=e==null?void 0:e.isDisabled,[i,s]=h.useState(!1);return pe(()=>{if(l!=null&&l.current&&!t){let n=()=>{if(l.current){let u=ye(l.current,{tabbable:!0});s(!!u.nextNode())}};n();let r=new MutationObserver(n);return r.observe(l.current,{subtree:!0,childList:!0,attributes:!0,attributeFilter:["tabIndex","disabled"]}),()=>{r.disconnect()}}}),t?!1:i}const Ve=new Set(["Arab","Syrc","Samr","Mand","Thaa","Mend","Nkoo","Adlm","Rohg","Hebr"]),ze=new Set(["ae","ar","arc","bcc","bqi","ckb","dv","fa","glk","he","ku","mzn","nqo","pnb","ps","sd","ug","ur","yi"]);function Ue(l){if(Intl.Locale){let t=new Intl.Locale(l).maximize().script;return Ve.has(t)}let e=l.split("-")[0];return ze.has(e)}function be(){let l=typeof navigator<"u"&&(navigator.language||navigator.userLanguage)||"en-US";try{Intl.DateTimeFormat.supportedLocalesOf([l])}catch{l="en-US"}return{locale:l,direction:Ue(l)?"rtl":"ltr"}}let H=be(),P=new Set;function le(){H=be();for(let l of P)l(H)}function Ne(){let l=ve(),[e,t]=h.useState(H);return h.useEffect(()=>(P.size===0&&window.addEventListener("languagechange",le),P.add(t),()=>{P.delete(t),P.size===0&&window.removeEventListener("languagechange",le)}),[]),l?{locale:"en-US",direction:"ltr"}:e}const We=D.createContext(null);function G(){let l=Ne();return h.useContext(We)||l}const ie=new WeakMap;function ke(l){let e=ie.get(l);return e||(e=new me(l),ie.set(l,e)),e}function nt(l){let{locale:e}=G(),t=h.useMemo(()=>ke(l),[l]);return h.useMemo(()=>new Ke(e,t),[e,t])}let q=new Map;function je(l){let{locale:e}=G(),t=e+(l?Object.entries(l).sort((s,n)=>s[0]<n[0]?-1:1).join():"");if(q.has(t))return q.get(t);let i=new Intl.Collator(e,l);return q.set(t,i),i}function ge(l){return Te()?l.altKey:l.ctrlKey}function C(l){return Ee()?l.metaKey:l.ctrlKey}const qe=1e3;function He(l){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:i}=l,s=h.useRef({search:"",timeout:null}).current,n=r=>{let u=Ye(r.key);if(!u||r.ctrlKey||r.metaKey||!r.currentTarget.contains(r.target))return;u===" "&&s.search.trim().length>0&&(r.preventDefault(),"continuePropagation"in r||r.stopPropagation()),s.search+=u;let c=e.getKeyForSearch(s.search,t.focusedKey);c==null&&(c=e.getKeyForSearch(s.search)),c!=null&&(t.setFocusedKey(c),i&&i(c)),clearTimeout(s.timeout),s.timeout=setTimeout(()=>{s.search=""},qe)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?n:null}}}function Ye(l){return l.length===1||!/^[A-Z]/i.test(l)?l:""}function Xe(l){let{selectionManager:e,keyboardDelegate:t,ref:i,autoFocus:s=!1,shouldFocusWrap:n=!1,disallowEmptySelection:r=!1,disallowSelectAll:u=!1,selectOnFocus:c=e.selectionBehavior==="replace",disallowTypeAhead:y=!1,shouldUseVirtualFocus:m,allowsTabNavigation:p=!1,isVirtualized:b,scrollRef:f=i}=l,{direction:S}=G(),v=a=>{if(a.altKey&&a.key==="Tab"&&a.preventDefault(),!i.current.contains(a.target))return;const $=(d,A)=>{d!=null&&(e.setFocusedKey(d,A),a.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(d):c&&!ge(a)&&e.replaceSelection(d))};switch(a.key){case"ArrowDown":if(t.getKeyBelow){var I,x;a.preventDefault();let d=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(I=t.getFirstKey)===null||I===void 0?void 0:I.call(t);d==null&&n&&(d=(x=t.getFirstKey)===null||x===void 0?void 0:x.call(t,e.focusedKey)),$(d)}break;case"ArrowUp":if(t.getKeyAbove){var R,o;a.preventDefault();let d=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(R=t.getLastKey)===null||R===void 0?void 0:R.call(t);d==null&&n&&(d=(o=t.getLastKey)===null||o===void 0?void 0:o.call(t,e.focusedKey)),$(d)}break;case"ArrowLeft":if(t.getKeyLeftOf){var z,U;a.preventDefault();let d=t.getKeyLeftOf(e.focusedKey);d==null&&n&&(d=S==="rtl"?(z=t.getFirstKey)===null||z===void 0?void 0:z.call(t,e.focusedKey):(U=t.getLastKey)===null||U===void 0?void 0:U.call(t,e.focusedKey)),$(d,S==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){var N,W;a.preventDefault();let d=t.getKeyRightOf(e.focusedKey);d==null&&n&&(d=S==="rtl"?(N=t.getLastKey)===null||N===void 0?void 0:N.call(t,e.focusedKey):(W=t.getFirstKey)===null||W===void 0?void 0:W.call(t,e.focusedKey)),$(d,S==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){a.preventDefault();let d=t.getFirstKey(e.focusedKey,C(a));e.setFocusedKey(d),C(a)&&a.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(d):c&&e.replaceSelection(d)}break;case"End":if(t.getLastKey){a.preventDefault();let d=t.getLastKey(e.focusedKey,C(a));e.setFocusedKey(d),C(a)&&a.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(d):c&&e.replaceSelection(d)}break;case"PageDown":if(t.getKeyPageBelow){a.preventDefault();let d=t.getKeyPageBelow(e.focusedKey);$(d)}break;case"PageUp":if(t.getKeyPageAbove){a.preventDefault();let d=t.getKeyPageAbove(e.focusedKey);$(d)}break;case"a":C(a)&&e.selectionMode==="multiple"&&u!==!0&&(a.preventDefault(),e.selectAll());break;case"Escape":a.preventDefault(),r||e.clearSelection();break;case"Tab":if(!p){if(a.shiftKey)i.current.focus();else{let d=ye(i.current,{tabbable:!0}),A,L;do L=d.lastChild(),L&&(A=L);while(L);A&&!A.contains(document.activeElement)&&V(A)}break}}},g=h.useRef({top:0,left:0});Se(f,"scroll",b?null:()=>{g.current={top:f.current.scrollTop,left:f.current.scrollLeft}});let w=a=>{if(e.isFocused){a.currentTarget.contains(a.target)||e.setFocused(!1);return}if(a.currentTarget.contains(a.target)){if(e.setFocused(!0),e.focusedKey==null){let x=o=>{o!=null&&(e.setFocusedKey(o),c&&e.replaceSelection(o))},R=a.relatedTarget;var $,I;R&&a.currentTarget.compareDocumentPosition(R)&Node.DOCUMENT_POSITION_FOLLOWING?x(($=e.lastSelectedKey)!==null&&$!==void 0?$:t.getLastKey()):x((I=e.firstSelectedKey)!==null&&I!==void 0?I:t.getFirstKey())}else b||(f.current.scrollTop=g.current.top,f.current.scrollLeft=g.current.left);if(!b&&e.focusedKey!=null){let x=f.current.querySelector(`[data-key="${e.focusedKey}"]`);x&&(V(x),J(f.current,x))}}},E=a=>{a.currentTarget.contains(a.relatedTarget)||e.setFocused(!1)};const K=h.useRef(s);h.useEffect(()=>{if(K.current){let a=null;s==="first"&&(a=t.getFirstKey()),s==="last"&&(a=t.getLastKey());let $=e.selectedKeys;$.size&&(a=$.values().next().value),e.setFocused(!0),e.setFocusedKey(a),a==null&&!m&&de(i.current)}K.current=!1},[]),h.useEffect(()=>{let a=oe();if(!b&&e.isFocused&&e.focusedKey!=null&&(f!=null&&f.current)){let $=f.current.querySelector(`[data-key="${e.focusedKey}"]`);$&&(J(f.current,$),a==="keyboard"&&we($,{containingElement:i.current}))}},[b,f,e.focusedKey,e.isFocused,i]);let M={onKeyDown:v,onFocus:w,onBlur:E,onMouseDown(a){f.current===a.target&&a.preventDefault()}},{typeSelectProps:B}=He({keyboardDelegate:t,selectionManager:e});y||(M=ae(B,M));let F;return m||(F=e.focusedKey==null?0:-1),{collectionProps:{...M,tabIndex:F}}}function rt(l){let{selectionManager:e,key:t,ref:i,shouldSelectOnPressUp:s,isVirtualized:n,shouldUseVirtualFocus:r,focus:u,isDisabled:c,onAction:y,allowsDifferentPressOrigin:m}=l,p=o=>{if(o.pointerType==="keyboard"&&ge(o))e.toggleSelection(t);else{if(e.selectionMode==="none")return;e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):o&&o.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||o&&(C(o)||o.pointerType==="touch"||o.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};h.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!r&&(u?u():document.activeElement!==i.current&&de(i.current))},[i,t,e.focusedKey,e.childFocusStrategy,e.isFocused,r]),c=c||e.isDisabled(t);let b={};!r&&!c?b={tabIndex:t===e.focusedKey?0:-1,onFocus(o){o.target===i.current&&e.setFocusedKey(t)}}:c&&(b.onMouseDown=o=>{o.preventDefault()});let f=!c&&e.canSelectItem(t),S=y&&!c,v=S&&(e.selectionBehavior==="replace"?!f:e.isEmpty),g=S&&f&&e.selectionBehavior==="replace",w=v||g,E=h.useRef(null),K=w&&f,M=h.useRef(!1),B=h.useRef(!1),F={};s?(F.onPressStart=o=>{E.current=o.pointerType,M.current=K,o.pointerType==="keyboard"&&(!w||ne())&&p(o)},m?(F.onPressUp=o=>{o.pointerType!=="keyboard"&&p(o)},F.onPress=v?()=>y():null):F.onPress=o=>{if(v||g&&o.pointerType!=="mouse"){if(o.pointerType==="keyboard"&&!se())return;y()}else o.pointerType!=="keyboard"&&p(o)}):(F.onPressStart=o=>{E.current=o.pointerType,M.current=K,B.current=v,(o.pointerType==="mouse"&&!v||o.pointerType==="keyboard"&&(!y||ne()))&&p(o)},F.onPress=o=>{(o.pointerType==="touch"||o.pointerType==="pen"||o.pointerType==="virtual"||o.pointerType==="keyboard"&&w&&se()||o.pointerType==="mouse"&&B.current)&&(w?y():p(o))}),n||(b["data-key"]=t),F.preventFocusOnPress=r;let{pressProps:a,isPressed:$}=xe(F),I=g?o=>{E.current==="mouse"&&(o.stopPropagation(),o.preventDefault(),y())}:void 0,{longPressProps:x}=Fe({isDisabled:!K,onLongPress(o){o.pointerType==="touch"&&(p(o),e.setSelectionBehavior("toggle"))}});return{itemProps:ae(b,f||v?a:{},K?x:{},{onDoubleClick:I,onDragStartCapture:o=>{E.current==="touch"&&M.current&&o.preventDefault()}}),isPressed:$,isSelected:e.isSelected(t),isFocused:e.isFocused&&e.focusedKey===t,isDisabled:c,allowsSelection:f,hasAction:w}}function se(){let l=window.event;return(l==null?void 0:l.key)==="Enter"}function ne(){let l=window.event;return(l==null?void 0:l.key)===" "||(l==null?void 0:l.code)==="Space"}class Ge{getKeyBelow(e){for(e=this.collection.getKeyAfter(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}return null}getKeyAbove(e){for(e=this.collection.getKeyBefore(e);e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}return null}getKeyRightOf(e){return this.orientation==="horizontal"?this.direction==="rtl"?this.getKeyAbove(e):this.getKeyBelow(e):null}getKeyLeftOf(e){return this.orientation==="horizontal"?this.direction==="rtl"?this.getKeyBelow(e):this.getKeyAbove(e):null}getFirstKey(){let e=this.collection.getFirstKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyAfter(e)}return null}getLastKey(){let e=this.collection.getLastKey();for(;e!=null;){if(this.collection.getItem(e).type==="item"&&!this.disabledKeys.has(e))return e;e=this.collection.getKeyBefore(e)}return null}getItem(e){return this.ref.current.querySelector(`[data-key="${e}"]`)}getKeyPageAbove(e){let t=this.ref.current,i=this.getItem(e);if(!i)return null;if(!Z(t))return this.getFirstKey();let s=t.getBoundingClientRect(),n=i.getBoundingClientRect();if(this.orientation==="horizontal"){let r=s.x-t.scrollLeft,u=Math.max(0,n.x-r+n.width-s.width);for(;i&&n.x-r>u;)e=this.getKeyAbove(e),i=e==null?null:this.getItem(e),n=i==null?void 0:i.getBoundingClientRect()}else{let r=s.y-t.scrollTop,u=Math.max(0,n.y-r+n.height-s.height);for(;i&&n.y-r>u;)e=this.getKeyAbove(e),i=e==null?null:this.getItem(e),n=i==null?void 0:i.getBoundingClientRect()}return e??this.getFirstKey()}getKeyPageBelow(e){let t=this.ref.current,i=this.getItem(e);if(!i)return null;if(!Z(t))return this.getLastKey();let s=t.getBoundingClientRect(),n=i.getBoundingClientRect();if(this.orientation==="horizontal"){let r=s.x-t.scrollLeft,u=Math.min(t.scrollWidth,n.x-r-n.width+s.width);for(;i&&n.x-r<u;)e=this.getKeyBelow(e),i=e==null?null:this.getItem(e),n=i==null?void 0:i.getBoundingClientRect()}else{let r=s.y-t.scrollTop,u=Math.min(t.scrollHeight,n.y-r-n.height+s.height);for(;i&&n.y-r<u;)e=this.getKeyBelow(e),i=e==null?null:this.getItem(e),n=i==null?void 0:i.getBoundingClientRect()}return e??this.getLastKey()}getKeyForSearch(e,t){if(!this.collator)return null;let i=this.collection,s=t||this.getFirstKey();for(;s!=null;){let n=i.getItem(s),r=n.textValue.slice(0,e.length);if(n.textValue&&this.collator.compare(r,e)===0)return s;s=this.getKeyBelow(s)}return null}constructor(...e){if(e.length===1){let t=e[0];this.collection=t.collection,this.ref=t.ref,this.disabledKeys=t.disabledKeys||new Set,this.orientation=t.orientation,this.direction=t.direction}else this.collection=e[0],this.disabledKeys=e[1],this.ref=e[2],this.collator=e[3]}}function ot(l){let{selectionManager:e,collection:t,disabledKeys:i,ref:s,keyboardDelegate:n,autoFocus:r,shouldFocusWrap:u,isVirtualized:c,disallowEmptySelection:y,selectOnFocus:m=e.selectionBehavior==="replace",disallowTypeAhead:p,shouldUseVirtualFocus:b,allowsTabNavigation:f}=l,S=je({usage:"search",sensitivity:"base"}),v=e.disabledBehavior,g=h.useMemo(()=>n||new Ge(t,v==="selection"?new Set:i,s,S),[n,t,i,s,S,v]),{collectionProps:w}=Xe({ref:s,selectionManager:e,keyboardDelegate:g,autoFocus:r,shouldFocusWrap:u,disallowEmptySelection:y,selectOnFocus:m,disallowTypeAhead:p,shouldUseVirtualFocus:b,allowsTabNavigation:f,isVirtualized:c,scrollRef:s});return{listProps:w}}class T extends Set{constructor(e,t,i){super(e),e instanceof T?(this.anchorKey=t||e.anchorKey,this.currentKey=i||e.currentKey):(this.anchorKey=t,this.currentKey=i)}}function Je(l,e){if(l.size!==e.size)return!1;for(let t of l)if(!e.has(t))return!1;return!0}function at(l){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:i,selectionBehavior:s="toggle",disabledBehavior:n="all"}=l,r=h.useRef(!1),[,u]=h.useState(!1),c=h.useRef(null),y=h.useRef(null),[,m]=h.useState(null),p=h.useMemo(()=>re(l.selectedKeys),[l.selectedKeys]),b=h.useMemo(()=>re(l.defaultSelectedKeys,new T),[l.defaultSelectedKeys]),[f,S]=Me(p,b,l.onSelectionChange),v=h.useMemo(()=>l.disabledKeys?new Set(l.disabledKeys):new Set,[l.disabledKeys]),[g,w]=h.useState(s);s==="replace"&&g==="toggle"&&typeof f=="object"&&f.size===0&&w("replace");let E=h.useRef(s);return h.useEffect(()=>{s!==E.current&&(w(s),E.current=s)},[s]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:g,setSelectionBehavior:w,get isFocused(){return r.current},setFocused(K){r.current=K,u(K)},get focusedKey(){return c.current},get childFocusStrategy(){return y.current},setFocusedKey(K,M="first"){c.current=K,y.current=M,m(K)},selectedKeys:f,setSelectedKeys(K){(i||!Je(K,f))&&S(K)},disabledKeys:v,disabledBehavior:n}}function re(l,e){return l?l==="all"?"all":new T(l):e}class ct{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(i=>t.has(i)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let i=this.collection.getItem(t);(!e||i&&j(this.collection,i,e)<0)&&(e=i)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let i=this.collection.getItem(t);(!e||i&&j(this.collection,i,e)>0)&&(e=i)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new T([e],e,e);else{let i=this.state.selectedKeys,s=i.anchorKey||e;t=new T(i,s,e);for(let n of this.getKeyRange(s,i.currentKey||e))t.delete(n);for(let n of this.getKeyRange(e,s))this.canSelectItem(n)&&t.add(n)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let i=this.collection.getItem(e),s=this.collection.getItem(t);return i&&s?j(this.collection,i,s)<=0?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let i=[],s=e;for(;s;){let n=this.collection.getItem(s);if((n&&n.type==="item"||n.type==="cell"&&this.allowsCellSelection)&&i.push(s),s===t)return i;s=this.collection.getKeyAfter(s)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new T(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new T([e],e,e):new T;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new T;for(let i of e)if(i=this.getKey(i),i!=null&&(t.add(i),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=i=>{for(;i;){if(this.canSelectItem(i)){let s=this.collection.getItem(i);s.type==="item"&&e.push(i),s.hasChildNodes&&(this.allowsCellSelection||s.type!=="item")&&t(Ce(ue(s,this.collection)).key)}i=this.collection.getKeyAfter(i)}};return t(this.collection.getFirstKey()),e}selectAll(){this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new T)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let i of e)if(!t.has(i))return!1;for(let i of t)if(!e.has(i))return!1;return!0}canSelectItem(e){if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let t=this.collection.getItem(e);return!(!t||t.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){return this.state.disabledKeys.has(e)&&this.state.disabledBehavior==="all"}constructor(e,t,i){this.collection=e,this.state=t;var s;this.allowsCellSelection=(s=i==null?void 0:i.allowsCellSelection)!==null&&s!==void 0?s:!1,this._isSelectAll=null}}export{nt as $,Ge as a,He as b,at as c,tt as d,ct as e,ot as f,it as g,rt as h,et as i,je as j,G as k,Xe as l,st as m,ye as n,de as o,Ce as p,ue as q,Pe as r,lt as s};
