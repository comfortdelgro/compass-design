import{j as e}from"./jsx-runtime-ea7736fc.js";import{R as o,r as se}from"./index-6c164b11.js";import{C as U}from"./objectToCSS-aff350d4.js";import{p as ne}from"./pick-child-c116e6b4.js";import{u as T}from"./use-dom-ref-7c72e1a5.js";const re="_item_sklsl_6",ie="_itemHover_sklsl_20",le="_itemButton_sklsl_25",ae="_itemSvg_sklsl_29",ce="_itemInput_sklsl_34",de="_itemIsDisabled_sklsl_60",pe="_itemIsErrored_sklsl_66",y={item:re,itemHover:ie,itemButton:le,itemSvg:ae,itemInput:ce,itemIsDisabled:de,itemIsErrored:pe},ue="_tagBox_hopvs_6",fe="_wrapper_hopvs_10",he="_label_hopvs_15",be="_asterix_hopvs_23",me="_bodyWrapper_hopvs_28",xe="_body_hopvs_28",ge="_bodyContent_hopvs_50",ye="_bodyContentInput_hopvs_59",_e="_icon_hopvs_69",ve="_iconCollapse_hopvs_86",Ce="_count_hopvs_90",we="_helperText_hopvs_94",Ie="_action_hopvs_102",je="_wrapperLabelPositionLeft_hopvs_118",Ee="_wrapperLabelPositionTop_hopvs_129",Be="_bodyCollaspableFalse_hopvs_134",Le="_bodyIsErrored_hopvs_138",Re="_helperTextIsErrored_hopvs_144",i={tagBox:ue,wrapper:fe,label:he,asterix:be,bodyWrapper:me,body:xe,bodyContent:ge,bodyContentInput:ye,icon:_e,iconCollapse:ve,count:Ce,helperText:we,action:Ie,wrapperLabelPositionLeft:je,wrapperLabelPositionTop:Ee,bodyCollaspableFalse:Be,bodyIsErrored:Le,helperTextIsErrored:Re},z=o.forwardRef((d,_)=>{const{css:c={},children:m,...g}=d,l=T(_);return e.jsx(U,{css:c,children:e.jsx("div",{ref:l,...g,children:m})})});z.__docgenInfo={description:"",methods:[],displayName:"TagBoxAction"};const q=o.forwardRef((d,_)=>{const{wrapperRef:c,onEnter:m=()=>{},...g}=d,l=T(_),C=f=>{if(c.current){const p=f.target.value;if(p!==""){const s=document.createElement("div");s.style.position="absolute",s.style.top="0",s.style.left="-9999px",s.style.overflow="hidden",s.style.visibility="hidden",s.style.whiteSpace="nowrap",s.style.fontSize="0.875rem",s.style.fontWeight="400",s.style.lineHeight="1.15",s.style.height="0",s.style.width="fit-content",s.style.maxWidth=`${c.current.clientWidth-62}px`,s.innerHTML=p.replace(/\s/g,"&nbsp;"),document.body.appendChild(s),f.target.focus(),f.target.style.width=`${s.clientWidth+4}px`,s.remove()}else f.target.style.width="4px"}};return e.jsx("input",{...g,type:"text",ref:l,className:`${i.bodyContentInput} cdg-tag-box-input`,onChange:C,onKeyDown:f=>{const p=f.target.value;p!==""&&f.key==="Enter"&&(m(p),l.current&&(l.current.value="",l.current.style.width="4px"))}})});q.__docgenInfo={description:"",methods:[],displayName:"TagBoxInput"};const G=o.forwardRef((d,_)=>{const{isDisabled:c=!1,isError:m,icon:g,value:l,id:C,wrapperRef:f,addInputRef:p,onRemove:s,onEdit:w,calculateRemainingItems:N,...k}=d,[I,h]=o.useState(!1),[E,B]=o.useState(l),u=o.useRef(null),A=T(_),$=()=>{c||(p.current&&(p.current.disabled=!0),h(!0),setTimeout(()=>{var r;(r=u==null?void 0:u.current)==null||r.focus()}))},x=o.useCallback((r,a)=>{const n=document.createElement("div");n.style.position="absolute",n.style.top="0",n.style.left="-9999px",n.style.overflow="hidden",n.style.visibility="hidden",n.style.whiteSpace="nowrap",n.style.height="0",n.style.width="fit-content",n.style.fontSize="12px",n.style.fontWeight="600",n.style.maxWidth=`${f.current.clientWidth-62}px`,n.innerHTML=r.replace(/\s/g,"&nbsp;"),document.body.appendChild(n),a(n.clientWidth),n.remove()},[f]),H=r=>{const a=r.target.value;B(a),N(),a!==""?x(a,n=>{r.target.focus(),r.target.style.width=`${n+4}px`}):r.target.style.width="4px"},W=()=>{c||s==null||s(C)},P=r=>{var n;const a=r.target.value;a!==""&&r.key==="Enter"&&(w==null||w(C,a),p.current&&(p.current.disabled=!1),(n=u==null?void 0:u.current)==null||n.blur()),(r.key=="Escape"||r.keyCode==27)&&L()};o.useEffect(()=>{const r=l;r!==""&&x(r,a=>{u.current&&(u.current.focus(),u.current.style.width=`${a+4}px`,u.current.style.maxWidth=`${f.current.clientWidth-62}px`)}),B(l)},[x,l,f]);const L=()=>{B(l),h(!1),p.current&&(p.current.disabled=!1),x(l,r=>{u.current&&(u.current.style.width=`${r+4}px`)})},v=o.useMemo(()=>[y.item,!c&&y.itemHover,c&&y.itemIsDisabled,m&&y.itemIsErrored,"cdg-tag-box-item"].filter(Boolean).join(" "),[c,m]);return e.jsxs("div",{...k,ref:A,className:v,children:[g,e.jsx("input",{ref:u,value:E,style:{display:I?"block":"none"},className:`${y.itemInput} cdg-tag-box-item-input`,onBlur:L,onKeyDown:P,onClick:$,onChange:H}),e.jsx("span",{style:{display:I?"none":"block",cursor:c?"not-allowed":"text"},onClick:$,children:l}),e.jsx("button",{tabIndex:c?-1:0,style:{cursor:c?"not-allowed":"pointer"},className:`${y.itemButton} cdg-tag-box-item-button`,onClick:W,children:e.jsx("svg",{width:"12",height:"12",fill:"none",viewBox:"0 0 12 12",className:`${y.itemSvg} cdg-tag-box-item-icon`,children:e.jsx("path",{d:"M10.9408 9.45858C11.3509 9.8687 11.3509 10.5331 10.9408 10.9432C10.7373 11.1483 10.4683 11.25 10.1993 11.25C9.93022 11.25 9.66183 11.1475 9.4571 10.9424L5.99959 7.4867L2.54241 10.9416C2.33734 11.1483 2.06863 11.25 1.79992 11.25C1.5312 11.25 1.26282 11.1483 1.05759 10.9416C0.647469 10.5315 0.647469 9.86706 1.05759 9.45694L4.51576 5.99877L1.05759 2.54224C0.647469 2.13212 0.647469 1.46772 1.05759 1.05759C1.46772 0.647469 2.13212 0.647469 2.54224 1.05759L5.99959 4.5174L9.45776 1.05923C9.86788 0.64911 10.5323 0.64911 10.9424 1.05923C11.3525 1.46936 11.3525 2.13376 10.9424 2.54388L7.48424 6.00205L10.9408 9.45858Z",fill:"currentColor"})})})]})});G.__docgenInfo={description:"",methods:[],displayName:"TagBoxItem"};const J=({...d})=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...d,children:e.jsx("path",{d:"M11.9991 18C11.5301 18 11.0608 17.8186 10.7033 17.4559L1.53708 8.1702C0.820973 7.44475 0.820973 6.26953 1.53708 5.54408C2.25319 4.81864 3.41329 4.81864 4.12939 5.54408L11.9991 13.5196L19.8706 5.54554C20.5867 4.82009 21.7468 4.82009 22.4629 5.54554C23.179 6.27098 23.179 7.44621 22.4629 8.17165L13.2967 17.4574C12.9387 17.8201 12.4689 18 11.9991 18Z",fill:"currentColor"})}),Q=({...d})=>e.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...d,children:e.jsx("path",{d:"M12.0009 5C12.4699 5 12.9392 5.18136 13.2967 5.54409L22.4629 14.8298C23.179 15.5552 23.179 16.7305 22.4629 17.4559C21.7468 18.1814 20.5867 18.1814 19.8706 17.4559L12.0009 9.48036L4.12939 17.4545C3.41329 18.1799 2.25319 18.1799 1.53708 17.4545C0.820973 16.729 0.820973 15.5538 1.53708 14.8284L10.7033 5.54264C11.0613 5.17991 11.5311 5 12.0009 5Z",fill:"currentColor"})});J.__docgenInfo={description:"",methods:[],displayName:"ChevronDown"};Q.__docgenInfo={description:"",methods:[],displayName:"ChevronUp"};const M=o.forwardRef((d,_)=>{const{id:c,icon:m,label:g,items:l,css:C={},children:f,className:p,isRequired:s,helperText:w,errorMessage:N,typeable:k=!1,isErrored:I=!1,collaspable:h=!1,labelPosition:E="top",onRemove:B,onAdd:u,onEdit:A,...$}=d,x=T(null),H=T(_),{child:W}=ne(f,z),[P,L]=o.useState(0),v=o.useRef(null),r=o.useRef(null),[a,n]=o.useState([]),[j,X]=o.useState(!1);o.useEffect(()=>{n(t=>Array(l.length).fill(0).map((b,D)=>t[D]||se.createRef()))},[l]);const F=o.useCallback(()=>{var t,b;if(!j){let D=((t=v.current)==null?void 0:t.clientWidth)??0,V=0;for(const R of a)R.current&&R.current.removeAttribute("style");for(const R of a){const Z=(b=R.current)==null?void 0:b.clientWidth;if(Z){const K=D-Z-16;K>37?D=K:(R.current.style.display="none",V++)}}L(Math.min(V,99))}},[a,j]),O=()=>{var t;(t=x.current)==null||t.focus()},Y=()=>{var t;X(b=>!b),(t=x.current)==null||t.focus()},S=o.useCallback(()=>{if(h&&!j)F();else{for(const t of a)t.current&&t.current.removeAttribute("style");L(0)}},[a,j,h,F]);o.useEffect(()=>{S()},[S]),o.useEffect(()=>{const t=v.current;if(!t)return;const b=new ResizeObserver(()=>{S()});return b.observe(t),()=>{b.disconnect()}},[S]);const ee=o.useMemo(()=>[i.tabBox,"cdg-tag-box",p].filter(Boolean).join(" "),[p]),te=o.useMemo(()=>[i.wrapper,E==="top"&&i.wrapperLabelPositionTop,E==="left"&&i.wrapperLabelPositionLeft,"cdg-tab-box-wrapper"].filter(Boolean).join(" "),[E]),oe=o.useMemo(()=>[i.body,h===!1&&i.bodyCollaspableFalse,I&&i.bodyIsErrored,"cdg-tag-box-body"].filter(Boolean).join(" "),[h,I]);return e.jsx(U,{css:C,children:e.jsxs("div",{...$,ref:H,className:ee,children:[e.jsxs("div",{className:te,onClick:O,children:[g&&e.jsxs("label",{htmlFor:c,className:`${i.label} cdg-tag-box-label`,children:[g,s&&e.jsx("span",{className:`${i.asterix} cdg-tag-box-asterix`,children:"*"})]}),e.jsxs("div",{className:`${i.bodyWrapper} cdg-tag-box-body-wrapper`,children:[e.jsxs("div",{id:c,tabIndex:0,ref:r,className:oe,"aria-label":d["aria-label"],"aria-details":d["aria-details"],"aria-labelledby":d["aria-labelledby"],"aria-describedby":d["aria-describedby"],onFocus:O,children:[m&&e.jsx("div",{className:`${i.icon} cdg-tag-box-body-icon`,children:m}),e.jsxs("div",{className:`${i.bodyContent} cdg-tag-box-body-content`,ref:v,children:[l.map((t,b)=>e.jsx(G,{id:t.id,icon:t.icon,value:t.value,ref:a[b],addInputRef:x,isError:!!t.isError,wrapperRef:v,isDisabled:!!t.isDisabled,onEdit:A,onRemove:B,calculateRemainingItems:F},t.id)),P>0&&e.jsx("div",{className:`${y.item} ${i.count} cdg-tag-box-count`,children:e.jsxs("span",{children:["+",P]})},"remainingCount"),(!h&&k||h&&k&&j)&&e.jsx(q,{ref:x,wrapperRef:v,onEnter:u})]}),h&&e.jsx("div",{className:`${i.icon} ${i.iconCollapse} cdg-tag-box-collapse-icon`,onClick:Y,children:j?e.jsx(Q,{}):e.jsx(J,{})})]}),I&&N&&e.jsx("div",{className:`${i.helperText} ${i.helperTextIsErrored} cdg-tag-box-error-message`,children:N})]})]}),(w||W)&&e.jsxs("div",{className:`${i.action} cdg-tag-box-action`,children:[e.jsx("span",{className:`${i.helperText} cdg-tag-box-helper-text`,children:w}),W]})]})})});M.__docgenInfo={description:"",methods:[],displayName:"TagBox"};M.Action=z;M.displayName="TagBox";M.Action.displayName="TagBox.Action";export{M as T};
