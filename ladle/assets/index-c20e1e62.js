import{r as x,k as ze,s as b,R as t,j as n,a as k,F as Ce}from"./index-97de903f.js";import{C as Pe}from"./index-0aad858b.js";import{P as Ze}from"./index-f6fb29f2.js";import{u as V}from"./use-dom-ref-cda3c3e9.js";import{p as ve}from"./pick-child-3830b345.js";const ne=x.createContext({open:!1,searchValue:"",selectedItems:[],disabledKeys:[],selectedKeys:[],defaultSelectedKeys:[],selectedSectionIds:[],setSelectedSectionIds:()=>{},setSelectedItems:()=>{},onItemClick:()=>{},onSectionClick:()=>{}}),Ke=ze({"0%":{transform:"rotate(0deg)"},"100%":{transform:"rotate(360deg)"}}),Se=b("div",{maxWidth:"100%",minHeight:"$11",borderRadius:"$md",cursor:"text",display:"flex",justifyContent:"space-between",alignItems:"center",padding:"$1_5 $4",gap:"$1",backgroundColor:"$background",transition:"$default",borderWidth:"1px",borderStyle:"solid",borderColor:"#E6E6E6",".dropdown-icon":{cursor:"pointer",flexShrink:0,display:"flex",justifyContent:"center",alignItems:"center",padding:0,border:"none",background:"transparent",svg:{width:"$4",height:"$4",color:"$primaryText"}},"&:focus-within":{borderColor:"$cdgBlue"},input:{height:"$6_5",width:4,padding:0,margin:0,border:"none",backgroundColor:"$background",color:"$primaryText","&:focus":{outline:"none"},"&:focus-visible":{outline:"none"}},"& .dropdown-icon":{transition:"transform 0.3s linear"},variants:{isEmpty:{true:{button:{p:{color:"#B4B4B4"}}}},isDisabled:{true:{backgroundColor:"$gray20","*":{color:"$disabledText",cursor:"not-allowed !important"},button:{span:{color:"$disabledText"}}}},isErrored:{true:{borderColor:"$danger","&:focus-within":{borderColor:"$danger"}}},isOpen:{true:{".dropdown-icon":{transform:"rotate(180deg)",transition:"transform 0.3s linear"}}}}}),ye=b("div",{flexGrow:1,alignItems:"center",minHeight:"$7",display:"flex",gap:"$2_5",flexWrap:"wrap",".placeholder":{color:"#B4B4B4",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:"$label1",fontWeight:"$semibold",maxWidth:"100%",height:"fit-content",lineHeight:"1em",border:"none",textAlign:"left",padding:0,margin:0},".multiple-dropdown-chip-icon":{svg:{color:"$primaryText"}}});b("div",{border:"1px solid #E6E6E6",borderRadius:"$full",padding:"$1 $3",fontSize:"$label1",cursor:"default",fontWeight:"$semibold",display:"flex",justifyContent:"center",alignItems:"center",gap:"$2",color:"$primaryText",div:{width:"fit-content",height:"fit-content"}});const _e=b("div",{width:"100%",label:{fontSize:"$label1",fontWeight:"$semibold",marginBottom:"$2",display:"inline-block",width:"100%",span:{marginLeft:"$1",color:"$danger"}},variants:{displayedValue:{chip:{},string:{[`${ye}`]:{flexWrap:"nowrap",justifyContent:"flex-start",maxWidth:"calc(100% - 1rem - 1rem)",".itemListString":{maxWidth:"100%",height:"100%",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",color:"$primaryText"}}}},variant:{combobox:{},select:{[`${Se}`]:{cursor:"pointer"}}}}}),Ge=b("svg",{color:"$primaryText"}),Ue=b("div",{margin:0,padding:"$2 0",borderRadius:"$md",width:"fit-content",height:"fit-content",minWidth:"100%",background:"$background",boxShadow:"0px 0.6px 1.8px rgba(0, 0, 0, 0.1), 0px 3.2px 7.2px rgba(0, 0, 0, 0.13)",ul:{overscrollBehavior:"contain",overflowY:"auto",listStyle:"none",marginBlockStart:0,marginBlockEnd:0,marginInlineStart:0,marginInlineEnd:0,paddingInlineStart:0,"&:focus":{outline:"none"}}}),qe=b("ul",{}),xe=b("div",{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:"$6",height:"$6",variants:{isSelected:{true:{div:{border:0,background:"$cdgBlue100 !important",svg:{display:"block"}}},false:{svg:{display:"none"}}},checkmark:{checkbox:{div:{border:"1px solid $black",borderRadius:"3px",width:"$4",height:"$4",display:"flex",alignItems:"center",justifyContent:"center",background:"$background"},svg:{color:"$whiteText"}},none:{},tick:{svg:{color:"$cdgBlue"}}}}}),Ye=b("li",{fontSize:"$label1",fontWeight:"$medium",padding:"$2 $4",outline:"none",cursor:"pointer",display:"flex",alignItems:"center",gap:"$2",color:"$primaryText","&:hover":{backgroundColor:"$gray20"},variants:{isFocused:{true:{backgroundColor:"$cdgBlue20"}},isSelected:{true:{backgroundColor:"$gray20"}},isDisabled:{true:{opacity:.4,cursor:"not-allowed"},button:{span:{color:"$disabledText"}}}}}),Je=b("div",{display:"flex",alignItems:"center",flexGrow:1,lineHeight:"$normal"}),Qe=b("div",{display:"flex",justifyContent:"center",margin:"$4 auto",".spinner":{display:"inline-block",position:"relative",width:"$4",height:"$4",div:{boxSizing:"border-box",display:"block",position:"absolute",width:"$4",height:"$4",border:"2px solid $divider",borderRadius:"50%",animation:`${Ke} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite`,borderColor:"$divider transparent transparent transparent"},".spinner-1":{animationDelay:"-0.45s"},".spinner-2":{animationDelay:"-0.3s"},".spinner-3":{animationDelay:"-0.15s"}}}),Xe=b("div",{fontSize:"$label1",fontWeight:"$medium",color:"$disabledText",padding:"$2 $4",lineHeight:"$normal"}),me=b("div",{fontSize:"$label2",fontWeight:"$medium",transition:"$default",marginTop:"$1",color:"$gray70",variants:{error:{true:{color:"$danger"},false:{color:"$gray70"}}}}),et=b("div",{appearance:"none",border:"none",backgroundColor:"transparent",boxSizing:"border-box",margin:"0px",padding:"0px"}),tt=b("div",{backgroundColor:"$cdgBlue10",padding:"$2 $4",fontSize:"$label2",fontWeight:"$semibold",color:"$gray100",display:"flex",alignItems:"center",justifyContent:"space-between",lineHeight:"$normal",variants:{isClickable:{true:{cursor:"pointer","&:hover":{backgroundColor:"$cdgBlue20"}},false:{".cdg-multiple-dropdown-section":{display:"none"}}}}}),nt=b("div",{}),be=b("div",{height:"$0_25"}),ot=t.forwardRef((r,s)=>{const{children:o,css:e={},...i}=r,u=V(s);return n(nt,{ref:u,css:e,...i,children:o})}),ce=ot;function H(r){var o,e;if(!r)return"";if(typeof r=="string")return r;if((o=r.props)!=null&&o.textValue)return r.props.textValue;if(r instanceof Array)return r.map(H).join(" ");const s=(e=r.props)==null?void 0:e.children;return s instanceof Array?s.map(H).join(" "):H(s)}const we=(r,s,o=[])=>{var e;for(const i of r)if(i.props){if(((e=i.props.value)==null?void 0:e.toString())===s.toString()&&!o.includes(i.props.value))return i;if(i.props.children){const u=we(t.Children.toArray(i.props.children),s);if(u)return u}}return null},rt=(r,s,o=[])=>{if(!o.length)return null;const e=o.filter(u=>u.visibility);if(e.length){const u=e.findIndex(p=>p.value.toString()===r.toString());if(u!==-1){const p=e[u-1]??e[e.length-1];if(p)return K(p.value,s)}}return ke(s,o)},it=(r,s,o=[])=>{if(!o.length)return null;const e=o.filter(u=>u.visibility);if(e.length){const u=e.findIndex(p=>p.value.toString()===r.toString());if(u!==-1){const p=e[u+1]??e[0];if(p)return K(p.value,s)}}return $e(s,o)},$e=(r,s=[])=>{if(!s.length)return null;let o=null;for(const e of s)if(e.visibility){o=K(e.value,r);break}return o},ke=(r,s=[])=>{if(!s.length)return null;let o=null;for(let e=s.length-1;e>=0;e--){const i=s[e];if(i!=null&&i.visibility){o=K(i.value,r);break}}return o},K=(r,s)=>{const{rest:o}=ve(s,ce);return t.Children.toArray(o).length?we(t.Children.toArray(s),r)??null:null},lt=(r,s)=>{const o=u=>{const{top:p}=u.getBoundingClientRect();return p},e=o(r),i=o(s);return Math.hypot(e-i)},st=t.forwardRef((r,s)=>{const{children:o,value:e="",checkmark:i="checkbox",css:u={},...p}=r,{textValue:C,...M}=p,{disabledKeys:v=[],searchValue:w,focusKey:m,selectedItems:$,setDropdownItemKeys:f,onItemClick:B}=t.useContext(ne),I=V(s),j=t.useMemo(()=>($==null?void 0:$.findIndex(a=>a.value.toString()===e.toString()))!==-1,[$,e]),R=t.useMemo(()=>(m==null?void 0:m.toString())===e.toString(),[m,e]),T=t.useMemo(()=>v.findIndex(a=>a.toString()===e.toString())!==-1,[v,e]),D=t.useMemo(()=>!w||H(o).toLocaleLowerCase().includes(w.toLocaleLowerCase()),[w,o]);return t.useEffect(()=>{T||f==null||f(a=>{const L=a.findIndex(re=>re.value.toString()===e.toString());return L===-1?a.push({value:e,visibility:!0}):a[L]={value:e,visibility:D},a})},[e,T,D]),t.useEffect(()=>{m&&m.toString()===e.toString()&&I.current&&I.current.scrollIntoView({block:"nearest"})},[m,e]),D?k(Ye,{ref:I,isFocused:R,isSelected:j&&!R,onClick:()=>{T||B({value:e.toString(),displayValue:C||o})},isDisabled:T,css:u,...M,children:[n(Je,{children:o}),n(xe,{isSelected:j,checkmark:i,children:i==="checkbox"?n("div",{children:n(at,{})}):i==="tick"?n(dt,{}):null})]}):null}),ct=st,at=()=>n("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:n("path",{d:"M9.39158 1.86239C9.64736 2.12284 9.64736 2.54372 9.39158 2.80416L4.15319 8.13808C3.89741 8.39853 3.48407 8.39853 3.22829 8.13808L0.608522 5.47112C0.352823 5.21068 0.352823 4.7898 0.608522 4.52935C0.864262 4.26891 1.27883 4.26891 1.53461 4.52935L3.67232 6.72334L8.46668 1.86239C8.72246 1.60153 9.1358 1.60153 9.39158 1.86239Z",fill:"currentColor"})}),dt=()=>n("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",children:n("path",{d:"M15.0265 3.47966C15.4357 3.89637 15.4357 4.56978 15.0265 4.98649L6.64506 13.5208C6.23581 13.9375 5.57446 13.9375 5.16521 13.5208L0.973587 9.25363C0.564469 8.83691 0.564469 8.16351 0.973587 7.74679C1.38277 7.33008 2.04608 7.33008 2.45533 7.74679L5.87567 11.2572L13.5466 3.47966C13.9559 3.06228 14.6172 3.06228 15.0265 3.47966Z",fill:"currentColor"})});function ut(r){const[s,o]=x.useState(!1),e=x.useMemo(()=>new IntersectionObserver(([i])=>o(!!(i!=null&&i.isIntersecting))),[r.current]);return x.useEffect(()=>(r.current&&e.observe(r.current),()=>{e.disconnect()}),[r,e]),s}function pt(){return n(Qe,{children:k("div",{className:"spinner",children:[n("div",{className:"spinner-1"}),n("div",{className:"spinner-2"}),n("div",{className:"spinner-3"}),n("div",{})]})})}const ft=r=>{const{children:s,isLoading:o,css:e={},noDataMessage:i,onLoadMore:u}=r,p=V(null),C=V(null),M=ut(p),{searchValue:v}=t.useContext(ne),{child:w,rest:m}=ve(s,ce),$=x.useMemo(()=>{let f=0;return t.Children.map(m,B=>{H(B).toLocaleLowerCase().includes(v.toLocaleLowerCase())&&f++}),f},[m,v]);return t.useEffect(()=>{if(p.current&&C.current){const f=lt(p.current,C.current);M&&f>=0&&f<4&&(u==null||u())}},[M]),x.useMemo(()=>k(Ce,{children:[w&&w,k(qe,{css:e,children:[o?n(pt,{}):$===0?n(Xe,{children:i||"No data"}):m,t.Children.toArray(m).length>0&&n(be,{ref:p}),n(be,{ref:C})]})]}),[e,o,m])},ht=ft,gt=t.forwardRef((r,s)=>{const{id:o=`cdg-element-${Math.random().toString(36).substring(2)}`,children:e,title:i,isClickable:u,css:p={},checkmark:C="checkbox",isChecked:M,onClick:v,...w}=r,{onSectionClick:m,selectedSectionIds:$}=x.useContext(ne),[f,B]=t.useState(M??$.includes(o)),[I,j]=x.useState(null),R=V(s);return x.useEffect(()=>{const D=t.Children.map(e,N=>{var L;const a=t.cloneElement(N);return(L=a==null?void 0:a.props)!=null&&L.value?a:t.cloneElement(a,{value:a.key||""})});j(D)},[e]),k(et,{css:p,ref:R,...w,children:[i&&k(tt,{isClickable:!!u,onClick:()=>{if(!u)return;v==null||v(i);const D=t.Children.toArray(I).map(N=>{var L;const a=N;return{value:((L=a.props.value)==null?void 0:L.toString())??"",displayValue:a.props.textValue??a.props.children}});m(D,!f,o),B(!f)},children:[i,n(xe,{isSelected:f,checkmark:C,className:"cdg-multiple-dropdown-section",children:C==="checkbox"?n("div",{children:n(bt,{})}):C==="tick"?n(Ct,{}):null})]}),I]})}),mt=gt,bt=()=>n("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:n("path",{d:"M9.39158 1.86239C9.64736 2.12284 9.64736 2.54372 9.39158 2.80416L4.15319 8.13808C3.89741 8.39853 3.48407 8.39853 3.22829 8.13808L0.608522 5.47112C0.352823 5.21068 0.352823 4.7898 0.608522 4.52935C0.864262 4.26891 1.27883 4.26891 1.53461 4.52935L3.67232 6.72334L8.46668 1.86239C8.72246 1.60153 9.1358 1.60153 9.39158 1.86239Z",fill:"currentColor"})}),Ct=()=>n("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",children:n("path",{d:"M15.0265 3.47966C15.4357 3.89637 15.4357 4.56978 15.0265 4.98649L6.64506 13.5208C6.23581 13.9375 5.57446 13.9375 5.16521 13.5208L0.973587 9.25363C0.564469 8.83691 0.564469 8.16351 0.973587 7.74679C1.38277 7.33008 2.04608 7.33008 2.45533 7.74679L5.87567 11.2572L13.5466 3.47966C13.9559 3.06228 14.6172 3.06228 15.0265 3.47966Z",fill:"currentColor"})}),vt=()=>n(Ge,{width:"16",height:"16",viewBox:"0 0 16 16",children:n("path",{d:"M8.33276 12.3334C8.02004 12.3334 7.70717 12.2125 7.46885 11.9707L1.35805 5.78022C0.880649 5.29658 0.880649 4.5131 1.35805 4.02947C1.83546 3.54584 2.60886 3.54584 3.08626 4.02947L8.33276 9.34651L13.5804 4.03044C14.0578 3.54681 14.8312 3.54681 15.3086 4.03044C15.786 4.51407 15.786 5.29755 15.3086 5.78118L9.19782 11.9717C8.95912 12.2135 8.64594 12.3334 8.33276 12.3334Z",fill:"currentColor"})}),St=t.forwardRef((r,s)=>{var he;const{id:o=`cdg-element-${Math.random().toString(36).substring(2)}`,css:e={},isOpen:i,children:u,isErrored:p,isDisabled:C,isRequired:M,isReadOnly:v,helperText:w,defaultOpen:m,errorMessage:$,selectedKeys:f,numberOfRows:B,displayedValue:I="chip",icon:j=n(vt,{}),disabledKeys:R=[],isLoading:T=!1,variant:D="combobox",customDisplayValue:N,defaultSelectedKeys:a,label:L,placeholder:re,erroredKeys:J,noDataMessage:Ie="",onLoadMore:De=()=>{},onBlur:Le=()=>{},onFocus:Ee=()=>{},onSelectionChange:F=()=>{},onOpenChange:ie=()=>{},...Me}=r,[W,z]=t.useState(i??m??!1),[Be,ae]=t.useState(!1),[le,Ve]=t.useState(""),[Q,O]=t.useState(),[de,ue]=t.useState([]),[y,_]=t.useState([]),[P,Re]=t.useState([]),[E,Te]=t.useState(null),pe=t.useRef(!1),We=V(s),Z=V(null),X=V(null),se=t.useMemo(()=>a&&(a==null?void 0:a.length)>0||!a&&!f,[a,f]);t.useEffect(()=>{const l=t.Children.map(u,d=>{var h;const c=t.cloneElement(d);return(h=c==null?void 0:c.props)!=null&&h.value?c:t.cloneElement(c,{value:c.key||""})});Te(l)},[u]),t.useEffect(()=>{if(!pe.current){pe.current=!0;return}z(!!i),i||O("")},[i]),t.useEffect(()=>{i||O("")},[W]),t.useEffect(()=>{if(!E||!(f&&(f==null?void 0:f.length)>0||a&&a.length>0)){_([]);return}const l=a??f??[];let d="";const c=[];for(const h of l){const S=K(h,E);S&&(c.push({value:h.toString(),displayValue:S}),d=h.toString())}_(c),O(d)},[E,f,a]);const G=t.useCallback(l=>{var d;if(!v){const c=[...y],h=c.findIndex(S=>S.value.toString()===l.value.toString());h===-1?c.push(l):c.splice(h,1),se&&_([...c]),F==null||F(c.map(S=>S.value)),(d=X.current)==null||d.focus()}},[v,y,se]),ee=t.useCallback(l=>{var c,h,S,U,A,q,te,ge;const d=(Q||(y.length?(c=y[0])==null?void 0:c.value:""))??"";switch(l.key){case"ArrowUp":case"ArrowLeft":if(l.preventDefault(),d){const g=rt(d,E,P),Y=(g==null?void 0:g.props.value)??((h=g==null?void 0:g.key)==null?void 0:h.toString().replace(".$",""))??"";Y&&O(Y)}else O(((U=(S=ke(E,P))==null?void 0:S.props.value)==null?void 0:U.toString())??"");break;case"ArrowDown":case"ArrowRight":if(l.preventDefault(),d){const g=it(d,E,P),Y=(g==null?void 0:g.props.value)??((A=g==null?void 0:g.key)==null?void 0:A.toString().replace(".$",""))??"";Y&&O(Y)}else O(((te=(q=$e(E,P))==null?void 0:q.props.value)==null?void 0:te.toString())??"");break;case"Enter":if(l.preventDefault(),z(!0),d){const g=K(d,E);g&&G({value:((ge=g.props.value)==null?void 0:ge.toString())||"",displayValue:g.props.textValue||g.props.children})}break;case"Escape":case"Tab":l.preventDefault(),z(!1),ie(!1);break}},[Q,E,y,P,G]);t.useEffect(()=>(W?document.addEventListener("keydown",ee):document.removeEventListener("keydown",ee),()=>{document.removeEventListener("keydown",ee)}),[W,ee]);const fe=()=>{var l;C||(z(!0),ie(!0),(l=X.current)==null||l.focus())},Oe=l=>{if(Z.current){const d=l.target.value;if(Ve(d),z(!0),ie(!0),d!==""){const c=document.createElement("div");c.style.position="absolute",c.style.top="0",c.style.left="-9999px",c.style.overflow="hidden",c.style.visibility="hidden",c.style.whiteSpace="nowrap",c.style.height="0",c.style.width="fit-content",c.style.maxWidth=`${Z.current.clientWidth-62}px`,c.innerHTML=d.replace(/\s/g,"&nbsp;"),document.body.appendChild(c),l.target.focus(),l.target.style.width=`${c.clientWidth+4}px`,c.remove()}else l.target.style.width="4px"}},Ae=()=>{const l=y.map(d=>H(d.displayValue));return l.length>0?n(Ce,{children:l.join(", ")}):""},He=x.useCallback(l=>d=>{d.stopPropagation(),d.preventDefault(),G(l)},[G]),je=x.useCallback(l=>!!(J!=null&&J.some(d=>d.toString()===l)),[J]),Ne=(l,d,c)=>{var U;const h=[...y];l.forEach(A=>{if(!v){const q=h.findIndex(te=>te.value.toString()===A.value.toString());q===-1?d&&h.push(A):d||h.splice(q,1)}});const S=new Set(de);d?S.add(c):S.delete(c),ue([...S]),se&&_([...h]),F==null||F(h.map(A=>A.value)),(U=X.current)==null||U.focus()},Fe=x.useCallback(()=>{z(!1)},[]);return k(_e,{css:e,ref:We,...Me,displayedValue:I,variant:D,children:[k(ne.Provider,{value:{open:W,focusKey:Q??"",selectedKeys:f??[],defaultSelectedKeys:a??[],disabledKeys:R,searchValue:le,selectedItems:y,setSelectedItems:_,dropdownItemKeys:P,setDropdownItemKeys:Re,selectedSectionIds:de,setSelectedSectionIds:ue,onItemClick:G,onSectionClick:Ne},children:[L&&k("label",{onClick:fe,htmlFor:o,children:[r.label,M&&n("span",{children:"*"})]}),n(Ze,{isOpen:W,anchor:k(Se,{className:"dropdownContainer",isOpen:W,ref:Z,isErrored:!!p,isDisabled:!!C,onClick:fe,onBlur:Le,onFocus:Ee,children:[k(ye,{className:"selectedItemWrapper",children:[y.length===0&&le===""&&!W&&!Be&&n("p",{className:"placeholder",children:re}),I==="chip"&&y.length>0&&y.map(l=>n(Pe,{hasCloseButton:R.findIndex(d=>d.toString()===l.value.toString())===-1,onCloseClick:He(l),isErrored:je(l.value.toString()),children:l.displayValue instanceof Array?l.displayValue:H(l.displayValue)},l.value)),I==="string"&&y.length>0?n("div",{className:"itemListString",children:N??Ae()}):null,!C&&D==="combobox"&&n("input",{id:o,type:"text",ref:X,value:le,onChange:Oe,onBlur:()=>ae(!1),onFocus:()=>ae(!0)})]}),n("div",{className:"dropdown-icon",children:j})]}),css:{width:"100%"},direction:"bottom",onClose:Fe,children:n(Ue,{style:{width:((he=Z==null?void 0:Z.current)==null?void 0:he.clientWidth)??"100%"},children:n(ht,{searchValue:"",isLoading:T,css:{maxHeight:B?`${B*40}px`:"16rem"},onLoadMore:De,noDataMessage:Ie,children:E})})})]}),p&&$&&n(me,{error:!!p,children:$}),w&&n(me,{children:w})]})}),oe=St;oe.Item=ct;oe.Header=ce;oe.Section=mt;oe.displayName="MultipleDropdown";export{oe as M};
