import{r as h,R as k}from"./index.e3899799.js";import{d as q,c as G}from"./module.db58b5a1.js";import{m as Y,q as O,$ as _,c as V,j as Z,w as J}from"./module.b1a9d0e8.js";import{$ as Q,l as X}from"./module.28cfaed6.js";import{e as N}from"./real-module.7a6cb59a.js";import{$ as ee}from"./module.cf5939ca.js";function j(s){return J()?s.altKey:s.ctrlKey}function M(s){return Z()?s.metaKey:s.ctrlKey}const te=1e3;function le(s){let{keyboardDelegate:e,selectionManager:t,onTypeSelect:l}=s,i=h.exports.useRef({search:"",timeout:null}).current,o=a=>{let f=se(a.key);if(!f||a.ctrlKey||a.metaKey)return;f===" "&&i.search.trim().length>0&&(a.preventDefault(),"continuePropagation"in a||a.stopPropagation()),i.search+=f;let c=e.getKeyForSearch(i.search,t.focusedKey);c==null&&(c=e.getKeyForSearch(i.search)),c!=null&&(t.setFocusedKey(c),l&&l(c)),clearTimeout(i.timeout),i.timeout=setTimeout(()=>{i.search=""},te)};return{typeSelectProps:{onKeyDownCapture:e.getKeyForSearch?o:null}}}function se(s){return s.length===1||!/^[A-Z]/i.test(s)?s:""}function he(s){let{selectionManager:e,keyboardDelegate:t,ref:l,autoFocus:i=!1,shouldFocusWrap:o=!1,disallowEmptySelection:a=!1,disallowSelectAll:f=!1,selectOnFocus:c=e.selectionBehavior==="replace",disallowTypeAhead:y=!1,shouldUseVirtualFocus:m,allowsTabNavigation:K=!1,isVirtualized:p,scrollRef:d=l}=s,{direction:A}=N(),v=n=>{if(n.altKey&&n.key==="Tab"&&n.preventDefault(),!l.current.contains(n.target))return;const b=(u,E)=>{u!=null&&(e.setFocusedKey(u,E),n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):c&&!j(n)&&e.replaceSelection(u))};switch(n.key){case"ArrowDown":if(t.getKeyBelow){var T,$;n.preventDefault();let u=e.focusedKey!=null?t.getKeyBelow(e.focusedKey):(T=t.getFirstKey)===null||T===void 0?void 0:T.call(t);u==null&&o&&(u=($=t.getFirstKey)===null||$===void 0?void 0:$.call(t,e.focusedKey)),b(u)}break;case"ArrowUp":if(t.getKeyAbove){var I,r;n.preventDefault();let u=e.focusedKey!=null?t.getKeyAbove(e.focusedKey):(I=t.getLastKey)===null||I===void 0?void 0:I.call(t);u==null&&o&&(u=(r=t.getLastKey)===null||r===void 0?void 0:r.call(t,e.focusedKey)),b(u)}break;case"ArrowLeft":if(t.getKeyLeftOf){n.preventDefault();let u=t.getKeyLeftOf(e.focusedKey);b(u,A==="rtl"?"first":"last")}break;case"ArrowRight":if(t.getKeyRightOf){n.preventDefault();let u=t.getKeyRightOf(e.focusedKey);b(u,A==="rtl"?"last":"first")}break;case"Home":if(t.getFirstKey){n.preventDefault();let u=t.getFirstKey(e.focusedKey,M(n));e.setFocusedKey(u),M(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):c&&e.replaceSelection(u)}break;case"End":if(t.getLastKey){n.preventDefault();let u=t.getLastKey(e.focusedKey,M(n));e.setFocusedKey(u),M(n)&&n.shiftKey&&e.selectionMode==="multiple"?e.extendSelection(u):c&&e.replaceSelection(u)}break;case"PageDown":if(t.getKeyPageBelow){n.preventDefault();let u=t.getKeyPageBelow(e.focusedKey);b(u)}break;case"PageUp":if(t.getKeyPageAbove){n.preventDefault();let u=t.getKeyPageAbove(e.focusedKey);b(u)}break;case"a":M(n)&&e.selectionMode==="multiple"&&f!==!0&&(n.preventDefault(),e.selectAll());break;case"Escape":n.preventDefault(),a||e.clearSelection();break;case"Tab":if(!K){if(n.shiftKey)l.current.focus();else{let u=G(l.current,{tabbable:!0}),E,B;do B=u.lastChild(),B&&(E=B);while(B);E&&!E.contains(document.activeElement)&&V(E)}break}}},g=h.exports.useRef({top:0,left:0});Y(d,"scroll",p?null:()=>{g.current={top:d.current.scrollTop,left:d.current.scrollLeft}});let x=n=>{if(e.isFocused){n.currentTarget.contains(n.target)||e.setFocused(!1);return}if(!!n.currentTarget.contains(n.target)){if(e.setFocused(!0),e.focusedKey==null){let $=r=>{r!=null&&(e.setFocusedKey(r),c&&e.replaceSelection(r))},I=n.relatedTarget;var b,T;I&&n.currentTarget.compareDocumentPosition(I)&Node.DOCUMENT_POSITION_FOLLOWING?$((b=e.lastSelectedKey)!==null&&b!==void 0?b:t.getLastKey()):$((T=e.firstSelectedKey)!==null&&T!==void 0?T:t.getFirstKey())}else if(!p){d.current.scrollTop=g.current.top,d.current.scrollLeft=g.current.left;let $=d.current.querySelector(`[data-key="${e.focusedKey}"]`);$&&(V($),O(d.current,$))}}},P=n=>{n.currentTarget.contains(n.relatedTarget)||e.setFocused(!1)};const S=h.exports.useRef(i);h.exports.useEffect(()=>{if(S.current){let n=null;i==="first"&&(n=t.getFirstKey()),i==="last"&&(n=t.getLastKey());let b=e.selectedKeys;b.size&&(n=b.values().next().value),e.setFocused(!0),e.setFocusedKey(n),n==null&&!m&&q(l.current)}S.current=!1},[]),h.exports.useEffect(()=>{if(!p&&e.focusedKey&&(d==null?void 0:d.current)){let n=d.current.querySelector(`[data-key="${e.focusedKey}"]`);n&&O(d.current,n)}},[p,d,e.focusedKey]);let D={onKeyDown:v,onFocus:x,onBlur:P,onMouseDown(n){d.current===n.target&&n.preventDefault()}},{typeSelectProps:C}=le({keyboardDelegate:t,selectionManager:e});y||(D=_(C,D));let w;return m||(w=e.focusedKey==null?0:-1),{collectionProps:{...D,tabIndex:w}}}function pe(s){let{selectionManager:e,key:t,ref:l,shouldSelectOnPressUp:i,isVirtualized:o,shouldUseVirtualFocus:a,focus:f,isDisabled:c,onAction:y,allowsDifferentPressOrigin:m}=s,K=r=>{if(r.pointerType==="keyboard"&&j(r))e.toggleSelection(t);else{if(e.selectionMode==="none")return;e.selectionMode==="single"?e.isSelected(t)&&!e.disallowEmptySelection?e.toggleSelection(t):e.replaceSelection(t):r&&r.shiftKey?e.extendSelection(t):e.selectionBehavior==="toggle"||r&&(M(r)||r.pointerType==="touch"||r.pointerType==="virtual")?e.toggleSelection(t):e.replaceSelection(t)}};h.exports.useEffect(()=>{t===e.focusedKey&&e.isFocused&&!a&&document.activeElement!==l.current&&(f?f():q(l.current))},[l,t,e.focusedKey,e.childFocusStrategy,e.isFocused,a]),c=c||e.isDisabled(t);let p={};!a&&!c?p={tabIndex:t===e.focusedKey?0:-1,onFocus(r){r.target===l.current&&e.setFocusedKey(t)}}:c&&(p.onMouseDown=r=>{r.preventDefault()});let d=!c&&e.canSelectItem(t),A=y&&!c,v=A&&(e.selectionBehavior==="replace"?!d:e.isEmpty),g=A&&d&&e.selectionBehavior==="replace",x=v||g,P=h.exports.useRef(null),S=x&&d,D=h.exports.useRef(!1),C=h.exports.useRef(!1),w={};i?(w.onPressStart=r=>{P.current=r.pointerType,D.current=S,r.pointerType==="keyboard"&&(!x||L())&&K(r)},m?(w.onPressUp=r=>{r.pointerType!=="keyboard"&&K(r)},w.onPress=v?()=>y():null):w.onPress=r=>{if(v||g&&r.pointerType!=="mouse"){if(r.pointerType==="keyboard"&&!z())return;y()}else r.pointerType!=="keyboard"&&K(r)}):(w.onPressStart=r=>{P.current=r.pointerType,D.current=S,C.current=v,(r.pointerType==="mouse"&&!v||r.pointerType==="keyboard"&&(!y||L()))&&K(r)},w.onPress=r=>{(r.pointerType==="touch"||r.pointerType==="pen"||r.pointerType==="virtual"||r.pointerType==="keyboard"&&x&&z()||r.pointerType==="mouse"&&C.current)&&(x?y():K(r))}),o||(p["data-key"]=t),w.preventFocusOnPress=a;let{pressProps:n,isPressed:b}=Q(w),T=g?r=>{P.current==="mouse"&&(r.stopPropagation(),r.preventDefault(),y())}:void 0,{longPressProps:$}=X({isDisabled:!S,onLongPress(r){r.pointerType==="touch"&&(K(r),e.setSelectionBehavior("toggle"))}});return{itemProps:_(p,d||v?n:{},S?$:{},{onDoubleClick:T,onDragStartCapture:r=>{P.current==="touch"&&D.current&&r.preventDefault()}}),isPressed:b,isSelected:e.isSelected(t),isDisabled:c,allowsSelection:d,hasAction:x}}function z(){let s=window.event;return(s==null?void 0:s.key)==="Enter"}function L(){let s=window.event;return(s==null?void 0:s.key)===" "||(s==null?void 0:s.code)==="Space"}function H(s){return null}H.getCollectionNode=function*(e,t){let{childItems:l,title:i,children:o}=e,a=e.title||e.children,f=e.textValue||(typeof a=="string"?a:"")||e["aria-label"]||"";!f&&!(t!=null&&t.suppressTextValueWarning)&&console.warn("<Item> with non-plain text contents is unsupported by type to select for accessibility. Please add a `textValue` prop."),yield{type:"item",props:e,rendered:a,textValue:f,"aria-label":e["aria-label"],hasChildNodes:ie(e),*childNodes(){if(l)for(let c of l)yield{type:"item",value:c};else if(i){let c=[];k.Children.forEach(o,y=>{c.push({type:"item",element:y})}),yield*c}}}};function ie(s){return s.hasChildItems!=null?s.hasChildItems:!!(s.childItems||s.title&&k.Children.count(s.children)>0)}let ge=H;class re{build(e,t){return this.context=t,U(()=>this.iterateCollection(e))}*iterateCollection(e){let{children:t,items:l}=e;if(typeof t=="function"){if(!l)throw new Error("props.children was a function but props.items is missing");for(let i of e.items)yield*this.getFullNode({value:i},{renderer:t})}else{let i=[];k.Children.forEach(t,a=>{i.push(a)});let o=0;for(let a of i){let f=this.getFullNode({element:a,index:o},{});for(let c of f)o++,yield c}}}getKey(e,t,l,i){if(e.key!=null)return e.key;if(t.type==="cell"&&t.key!=null)return`${i}${t.key}`;let o=t.value;if(o!=null){var a;let f=(a=o.key)!==null&&a!==void 0?a:o.id;if(f==null)throw new Error("No key found for item");return f}return i?`${i}.${t.index}`:`$.${t.index}`}getChildState(e,t){return{renderer:t.renderer||e.renderer}}*getFullNode(e,t,l,i){let o=e.element;if(!o&&e.value&&t&&t.renderer){let c=this.cache.get(e.value);if(c&&(!c.shouldInvalidate||!c.shouldInvalidate(this.context))){c.index=e.index,c.parentKey=i?i.key:null,yield c;return}o=t.renderer(e.value)}if(k.isValidElement(o)){let c=o.type;if(typeof c!="function"&&typeof c.getCollectionNode!="function"){let p=typeof o.type=="function"?o.type.name:o.type;throw new Error(`Unknown element <${p}> in collection.`)}let y=c.getCollectionNode(o.props,this.context),m=e.index,K=y.next();for(;!K.done&&K.value;){let p=K.value;e.index=m;let d=p.key;d||(d=p.element?null:this.getKey(o,e,t,l));let v=[...this.getFullNode({...p,key:d,index:m,wrapper:ne(e.wrapper,p.wrapper)},this.getChildState(t,p),l?`${l}${o.key}`:o.key,i)];for(let g of v){if(g.value=p.value||e.value,g.value&&this.cache.set(g.value,g),e.type&&g.type!==e.type)throw new Error(`Unsupported type <${R(g.type)}> in <${R(i.type)}>. Only <${R(e.type)}> is supported.`);m++,yield g}K=y.next(v)}return}if(e.key==null)return;let a=this,f={type:e.type,props:e.props,key:e.key,parentKey:i?i.key:null,value:e.value,level:i?i.level+1:0,index:e.index,rendered:e.rendered,textValue:e.textValue,"aria-label":e["aria-label"],wrapper:e.wrapper,shouldInvalidate:e.shouldInvalidate,hasChildNodes:e.hasChildNodes,childNodes:U(function*(){if(!e.hasChildNodes)return;let c=0;for(let y of e.childNodes()){y.key!=null&&(y.key=`${f.key}${y.key}`),y.index=c;let m=a.getFullNode(y,a.getChildState(t,y),f.key,f);for(let K of m)c++,yield K}})};yield f}constructor(){this.cache=new WeakMap}}function U(s){let e=[],t=null;return{*[Symbol.iterator](){for(let l of e)yield l;t||(t=s());for(let l of t)e.push(l),yield l}}}function ne(s,e){if(s&&e)return t=>s(e(t));if(s)return s;if(e)return e}function R(s){return s[0].toUpperCase()+s.slice(1)}function Ke(s,e,t,l=[]){let i=h.exports.useMemo(()=>new re,[]),o=h.exports.useRef(null);return h.exports.useMemo(()=>{let a=i.build(s,t);return o.current=e(a,o.current),o.current},[i,s.children,s.items,t,...l])}class F extends Set{constructor(e,t,l){super(e),e instanceof F?(this.anchorKey=t||e.anchorKey,this.currentKey=l||e.currentKey):(this.anchorKey=t,this.currentKey=l)}}function oe(s,e){if(s.size!==e.size)return!1;for(let t of s)if(!e.has(t))return!1;return!0}function Se(s){let{selectionMode:e="none",disallowEmptySelection:t,allowDuplicateSelectionEvents:l,selectionBehavior:i="toggle",disabledBehavior:o="all"}=s,a=h.exports.useRef(!1),[,f]=h.exports.useState(!1),c=h.exports.useRef(null),y=h.exports.useRef(null),[,m]=h.exports.useState(null),K=h.exports.useMemo(()=>W(s.selectedKeys),[s.selectedKeys]),p=h.exports.useMemo(()=>W(s.defaultSelectedKeys,new F),[s.defaultSelectedKeys]),[d,A]=ee(K,p,s.onSelectionChange),v=h.exports.useMemo(()=>s.disabledKeys?new Set(s.disabledKeys):new Set,[s.disabledKeys]),[g,x]=h.exports.useState(i);i==="replace"&&g==="toggle"&&typeof d=="object"&&d.size===0&&x("replace");let P=h.exports.useRef(i);return h.exports.useEffect(()=>{i!==P.current&&(x(i),P.current=i)},[i]),{selectionMode:e,disallowEmptySelection:t,selectionBehavior:g,setSelectionBehavior:x,get isFocused(){return a.current},setFocused(S){a.current=S,f(S)},get focusedKey(){return c.current},get childFocusStrategy(){return y.current},setFocusedKey(S,D="first"){c.current=S,y.current=D,m(S)},selectedKeys:d,setSelectedKeys(S){(l||!oe(S,d))&&A(S)},disabledKeys:v,disabledBehavior:o}}function W(s,e){return s?s==="all"?"all":new F(s):e}class be{get selectionMode(){return this.state.selectionMode}get disallowEmptySelection(){return this.state.disallowEmptySelection}get selectionBehavior(){return this.state.selectionBehavior}setSelectionBehavior(e){this.state.setSelectionBehavior(e)}get isFocused(){return this.state.isFocused}setFocused(e){this.state.setFocused(e)}get focusedKey(){return this.state.focusedKey}get childFocusStrategy(){return this.state.childFocusStrategy}setFocusedKey(e,t){(e==null||this.collection.getItem(e))&&this.state.setFocusedKey(e,t)}get selectedKeys(){return this.state.selectedKeys==="all"?new Set(this.getSelectAllKeys()):this.state.selectedKeys}get rawSelection(){return this.state.selectedKeys}isSelected(e){return this.state.selectionMode==="none"?!1:(e=this.getKey(e),this.state.selectedKeys==="all"?this.canSelectItem(e):this.state.selectedKeys.has(e))}get isEmpty(){return this.state.selectedKeys!=="all"&&this.state.selectedKeys.size===0}get isSelectAll(){if(this.isEmpty)return!1;if(this.state.selectedKeys==="all")return!0;if(this._isSelectAll!=null)return this._isSelectAll;let e=this.getSelectAllKeys(),t=this.state.selectedKeys;return this._isSelectAll=e.every(l=>t.has(l)),this._isSelectAll}get firstSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||(l==null?void 0:l.index)<e.index)&&(e=l)}return e==null?void 0:e.key}get lastSelectedKey(){let e=null;for(let t of this.state.selectedKeys){let l=this.collection.getItem(t);(!e||(l==null?void 0:l.index)>e.index)&&(e=l)}return e==null?void 0:e.key}get disabledKeys(){return this.state.disabledKeys}get disabledBehavior(){return this.state.disabledBehavior}extendSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"){this.replaceSelection(e);return}e=this.getKey(e);let t;if(this.state.selectedKeys==="all")t=new F([e],e,e);else{let l=this.state.selectedKeys,i=l.anchorKey||e;t=new F(l,i,e);for(let o of this.getKeyRange(i,l.currentKey||e))t.delete(o);for(let o of this.getKeyRange(e,i))this.canSelectItem(o)&&t.add(o)}this.state.setSelectedKeys(t)}getKeyRange(e,t){let l=this.collection.getItem(e),i=this.collection.getItem(t);return l&&i?l.index<=i.index?this.getKeyRangeInternal(e,t):this.getKeyRangeInternal(t,e):[]}getKeyRangeInternal(e,t){let l=[],i=e;for(;i;){let o=this.collection.getItem(i);if((o&&o.type==="item"||o.type==="cell"&&this.allowsCellSelection)&&l.push(i),i===t)return l;i=this.collection.getKeyAfter(i)}return[]}getKey(e){let t=this.collection.getItem(e);if(!t||t.type==="cell"&&this.allowsCellSelection)return e;for(;t.type!=="item"&&t.parentKey!=null;)t=this.collection.getItem(t.parentKey);return!t||t.type!=="item"?null:t.key}toggleSelection(e){if(this.selectionMode==="none")return;if(this.selectionMode==="single"&&!this.isSelected(e)){this.replaceSelection(e);return}if(e=this.getKey(e),e==null)return;let t=new F(this.state.selectedKeys==="all"?this.getSelectAllKeys():this.state.selectedKeys);t.has(e)?t.delete(e):this.canSelectItem(e)&&(t.add(e),t.anchorKey=e,t.currentKey=e),!(this.disallowEmptySelection&&t.size===0)&&this.state.setSelectedKeys(t)}replaceSelection(e){if(this.selectionMode==="none"||(e=this.getKey(e),e==null))return;let t=this.canSelectItem(e)?new F([e],e,e):new F;this.state.setSelectedKeys(t)}setSelectedKeys(e){if(this.selectionMode==="none")return;let t=new F;for(let l of e)if(l=this.getKey(l),l!=null&&(t.add(l),this.selectionMode==="single"))break;this.state.setSelectedKeys(t)}getSelectAllKeys(){let e=[],t=l=>{for(;l;){if(this.canSelectItem(l)){let i=this.collection.getItem(l);i.type==="item"&&e.push(l),i.hasChildNodes&&(this.allowsCellSelection||i.type!=="item")&&t([...i.childNodes][0].key)}l=this.collection.getKeyAfter(l)}};return t(this.collection.getFirstKey()),e}selectAll(){this.selectionMode==="multiple"&&this.state.setSelectedKeys("all")}clearSelection(){!this.disallowEmptySelection&&(this.state.selectedKeys==="all"||this.state.selectedKeys.size>0)&&this.state.setSelectedKeys(new F)}toggleSelectAll(){this.isSelectAll?this.clearSelection():this.selectAll()}select(e,t){this.selectionMode!=="none"&&(this.selectionMode==="single"?this.isSelected(e)&&!this.disallowEmptySelection?this.toggleSelection(e):this.replaceSelection(e):this.selectionBehavior==="toggle"||t&&(t.pointerType==="touch"||t.pointerType==="virtual")?this.toggleSelection(e):this.replaceSelection(e))}isSelectionEqual(e){if(e===this.state.selectedKeys)return!0;let t=this.selectedKeys;if(e.size!==t.size)return!1;for(let l of e)if(!t.has(l))return!1;for(let l of t)if(!e.has(l))return!1;return!0}canSelectItem(e){if(this.state.selectionMode==="none"||this.state.disabledKeys.has(e))return!1;let t=this.collection.getItem(e);return!(!t||t.type==="cell"&&!this.allowsCellSelection)}isDisabled(e){return this.state.disabledKeys.has(e)&&this.state.disabledBehavior==="all"}constructor(e,t,l){this.collection=e,this.state=t;var i;this.allowsCellSelection=(i=l==null?void 0:l.allowsCellSelection)!==null&&i!==void 0?i:!1,this._isSelectAll=null}}export{he as $,pe as a,Se as b,be as c,Ke as d,ge as e};
