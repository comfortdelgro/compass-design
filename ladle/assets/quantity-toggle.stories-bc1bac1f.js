import{s as J,R as F,r as u,j as m,a as U}from"./index-e285302b.js";import{C as oe}from"./components-6c35209b.js";import{u as ae}from"./use-dom-ref-58648911.js";import{c as se,a as Q,$ as le}from"./clsx.m-30223e4c.js";const ce=J("div",{width:"100%",display:"flex",flexDirection:"column",label:{fontSize:"$label1",fontWeight:"$medium",lineHeight:"$normal",display:"block",marginBottom:"$1",color:"$gray90",span:{marginLeft:"$1",color:"$danger"}},div:{display:"flex",width:"100%",input:{flex:1,color:"#323130",padding:"$3 $4",textAlign:"center",border:"1px solid #EDEBE9",borderRadius:"0",backgroundColor:"$white",fontSize:"$label1",fontWeight:"$semibold"},"input::placeholder":{color:"$gray40"},button:{color:"#323130",aspectRatio:"1",width:"$14",cursor:"pointer",fontWeight:"$bold",border:"1px solid #EDEBE9",backgroundColor:"$gray10"},"button[aria-label='decrease']":{borderRight:"none",borderRadius:"4px 0 0 4px"},"button[aria-label='increase']":{borderLeft:"none",borderRadius:"0 4px 4px 0"}},variants:{isDisabled:{true:{cursor:"not-allowed",div:{input:{backgroundColor:"#EDEBE9",cursor:"not-allowed"},button:{borderColor:"#EDEBE9",cursor:"not-allowed"}}}},isErrored:{true:{div:{input:{borderColor:"$danger"},button:{borderColor:"$danger"}}}}}}),X=J("div",{fontSize:"$label2",fontWeight:"$medium",transition:"$default",marginTop:"$1",color:"$gray70",variants:{error:{true:{color:"$danger"}}}});function ie(...e){return(...t)=>{for(const n of e)typeof n=="function"&&n(...t)}}function B(...e){const t={...e[0]};for(let n=1;n<e.length;n++){const r=e[n];for(const o in r){const s=t[o],l=r[o];typeof s=="function"&&typeof l=="function"&&o.startsWith("o")&&o[1]==="n"&&o.charCodeAt(2)>=65&&o.charCodeAt(2)<=90?t[o]=ie(s,l):(o==="className"||o==="UNSAFE_className")&&typeof s=="string"&&typeof l=="string"?t[o]=se(s,l):t[o]=l!==void 0?l:s}}return t}const Z=typeof window<"u"?F.useLayoutEffect:()=>{};class ue{constructor(t,n){this.nativeEvent=n,this.target=n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget,this.bubbles=n.bubbles,this.cancelable=n.cancelable,this.defaultPrevented=n.defaultPrevented,this.eventPhase=n.eventPhase,this.isTrusted=n.isTrusted,this.timeStamp=n.timeStamp,this.type=t}isDefaultPrevented(){return this.nativeEvent.defaultPrevented}preventDefault(){this.defaultPrevented=!0,this.nativeEvent.preventDefault()}stopPropagation(){this.nativeEvent.stopPropagation(),this.isPropagationStopped=()=>!0}isPropagationStopped(){return!1}persist(){}}function de(e){const t=u.useRef({isFocused:!1,onBlur:e,observer:null});return t.current.onBlur=e,Z(()=>{const n=t.current;return()=>{n.observer&&(n.observer.disconnect(),n.observer=null)}},[]),u.useCallback(n=>{if(n.target instanceof HTMLButtonElement||n.target instanceof HTMLInputElement||n.target instanceof HTMLTextAreaElement||n.target instanceof HTMLSelectElement){t.current.isFocused=!0;const r=n.target,o=s=>{t.current.isFocused=!1,r.disabled&&t.current.onBlur(new ue("blur",s)),t.current.observer&&(t.current.observer.disconnect(),t.current.observer=null)};r.addEventListener("focusout",o,{once:!0}),t.current.observer=new MutationObserver(()=>{var s;t.current.isFocused&&r.disabled&&((s=t.current.observer)==null||s.disconnect(),r.dispatchEvent(new FocusEvent("blur")),r.dispatchEvent(new FocusEvent("focusout",{bubbles:!0})))}),t.current.observer.observe(r,{attributes:!0,attributeFilter:["disabled"]})}},[])}function ee(e){const{isDisabled:t,onFocus:n,onBlur:r,onFocusChange:o}=e,s=u.useCallback(c=>(c.target===c.currentTarget&&(r&&r(c),o&&o(!1)),!0),[r,o]),l=de(s),a=u.useCallback(c=>{c.target===c.currentTarget&&document.activeElement===c.target&&(n&&n(c),o&&o(!0),l(c))},[o,n,l]);return{focusProps:{onFocus:!t&&(n||o||r)?a:void 0,onBlur:!t&&(r||o)?s:void 0}}}function fe(e){if(me())e.focus({preventScroll:!0});else{const t=be(e);e.focus(),pe(t)}}let O=!1;function me(){if(!O){O=!1;try{document.createElement("div").focus({get preventScroll(){return O=!0,!0}})}catch{}}return O}function be(e){let t=e.parentNode;const n=[],r=document.scrollingElement??document.documentElement;for(;t instanceof HTMLElement&&t!==r;)(t.offsetHeight<t.scrollHeight||t.offsetWidth<t.scrollWidth)&&n.push({element:t,scrollTop:t.scrollTop,scrollLeft:t.scrollLeft}),t=t.parentNode;return r instanceof HTMLElement&&n.push({element:r,scrollTop:r.scrollTop,scrollLeft:r.scrollLeft}),n}function pe(e){for(const{element:t,scrollTop:n,scrollLeft:r}of e)t.scrollTop=n,t.scrollLeft=r}function _(e){if(e){let t=!0;return n=>{const r={...n,preventDefault(){n.preventDefault()},isDefaultPrevented(){return n.isDefaultPrevented()},stopPropagation(){console.error("stopPropagation is now the default behavior for events in React Spectrum. You can use continuePropagation() to revert this behavior.")},continuePropagation(){t=!1}};e(r),t&&n.stopPropagation()}}else return()=>{}}function he(e){return{keyboardProps:e.isDisabled?{}:{onKeyDown:_(e.onKeyDown),onKeyUp:_(e.onKeyUp)}}}function ge(e,t){Z(()=>{var n;return(n=e.ref)!=null&&n.current&&(e.ref.current=t.current),()=>{var r;(r=e.ref)!=null&&r.current&&(e.ref.current=null)}},[e,t])}const te=F.createContext(null);function ve(e){const t=u.useContext(te)||{};ge(t,e);let{ref:n,...r}=t;return r}function ye(e,t){const{children:n,...r}=e,o={...r,ref:t};return m(te.Provider,{value:o,children:n})}F.forwardRef(ye);function Se(e,t){const{focusProps:n}=ee(e),{keyboardProps:r}=he(e),o=B(n,r),s=ve(t),l=e.isDisabled?{}:s,a=u.useRef(e.autoFocus);return u.useEffect(()=>{a.current&&t.current&&fe(t.current),a.current=!1},[t]),{focusableProps:B({...o,tabIndex:e.excludeFromTabOrder&&!e.isDisabled?-1:void 0},l)}}function Ee(e,t){const{isDisabled:n=!1,isRequired:r=!1,isReadOnly:o=!1,validationState:s,type:l="text",onChange:a=()=>{}}=e,{focusableProps:c}=Se(e,t);return{inputProps:B(e,{type:l,pattern:e.pattern,disabled:n,readOnly:o,"aria-required":r||void 0,"aria-invalid":s==="invalid"||void 0,"aria-errormessage":e["aria-errormessage"],"aria-activedescendant":e["aria-activedescendant"],"aria-autocomplete":e["aria-autocomplete"],"aria-haspopup":e["aria-haspopup"],value:e.value,defaultValue:e.value?void 0:e.defaultValue,onChange:i=>a(i.target.value),autoComplete:e.autoComplete,maxLength:e.maxLength,minLength:e.minLength,name:e.name,placeholder:e.placeholder,inputMode:e.inputMode,onCopy:e.onCopy,onCut:e.onCut,onPaste:e.onPaste,onCompositionEnd:e.onCompositionEnd,onCompositionStart:e.onCompositionStart,onCompositionUpdate:e.onCompositionUpdate,onSelect:e.onSelect,onBeforeInput:e.onBeforeInput,onInput:e.onInput,...c})}}function G(){return typeof window<"u"&&window.InputEvent&&typeof InputEvent.prototype.getTargetRanges=="function"}function Pe(e,t,n){const r=u.useRef(t);r.current=t,u.useEffect(()=>{if(!G())return;const a=n.current,c=i=>{const g=r.current;let d;switch(i.inputType){case"historyUndo":case"historyRedo":return;case"deleteContent":case"deleteByCut":case"deleteByDrag":d=a.value.slice(0,a.selectionStart)+a.value.slice(a.selectionEnd);break;case"deleteContentForward":d=a.selectionEnd===a.selectionStart?a.value.slice(0,a.selectionStart)+a.value.slice(a.selectionEnd+1):a.value.slice(0,a.selectionStart)+a.value.slice(a.selectionEnd);break;case"deleteContentBackward":d=a.selectionEnd===a.selectionStart?a.value.slice(0,a.selectionStart-1)+a.value.slice(a.selectionStart):a.value.slice(0,a.selectionStart)+a.value.slice(a.selectionEnd);break;case"deleteSoftLineBackward":case"deleteHardLineBackward":d=a.value.slice(a.selectionStart);break;default:i.data!=null&&(d=a.value.slice(0,a.selectionStart)+i.data+a.value.slice(a.selectionEnd));break}(d==null||!g.validate(d))&&i.preventDefault()};return a.addEventListener("beforeinput",c,!1),()=>{a.removeEventListener("beforeinput",c,!1)}},[n,r]);const o=G()?null:a=>{const c=a.target.value.slice(0,a.target.selectionStart)+a.data+a.target.value.slice(a.target.selectionEnd);t.validate(c)||a.preventDefault()},{inputProps:s}=Ee(e,n),l=u.useRef(null);return{...B(s,{onBeforeInput:o,onCompositionStart(){const{value:a,selectionStart:c,selectionEnd:i}=n.current;l.current={value:a,selectionStart:c,selectionEnd:i}},onCompositionEnd(){if(!t.validate(n.current.value)){const{value:a,selectionStart:c,selectionEnd:i}=l.current;n.current.value=a,n.current.setSelectionRange(c,i),t.setInputValue(a)}}})}}function De(e){const t=u.useRef(),{isReadOnly:n,onIncrement:r,onDecrement:o,onIncrementPage:s,onDecrementPage:l,onDecrementToMin:a,onIncrementToMax:c}=e,i=u.useRef(e);i.current=e;const g=()=>clearTimeout(t.current);u.useEffect(()=>()=>g(),[]);const d=b=>{if(!(b.ctrlKey||b.metaKey||b.shiftKey||b.altKey||n))switch(b.key){case"PageUp":s&&(b.preventDefault(),s());break;case"ArrowUp":case"Up":r&&(b.preventDefault(),r());break;case"PageDown":l&&(b.preventDefault(),l());break;case"ArrowDown":case"Down":o&&(b.preventDefault(),o());break;case"Home":a&&(b.preventDefault(),a());break;case"End":c&&(b.preventDefault(),c());break}},p=u.useRef(!1);return{onKeyDown:d,onFocus:()=>{p.current=!0},onBlur:()=>{p.current=!1}}}function we(e={}){return u.useMemo(()=>new Q("en-US",e),[e])}function Ce(e,t,n,r){u.useEffect(()=>{const o=e.current;return o&&n!==null&&o.addEventListener(t,n,r),()=>{o&&n!==null&&o.removeEventListener(t,n,r)}},[e,t,r])}function Ve(e,t){const{onScroll:n,isDisabled:r}=e,o=u.useCallback(s=>{const l=s;l.ctrlKey||(l.preventDefault(),l.stopPropagation(),n&&n({deltaX:l.deltaX,deltaY:l.deltaY}))},[n]);Ce(t,"wheel",r?null:o,{passive:!1})}function Me(e,t,n){const{label:r,description:o,errorMessage:s,formatOptions:l,autoFocus:a=!1,isRequired:c=!1,isReadOnly:i=!1,isDisabled:g=!1,maxValue:d=1/0,minValue:p=-1/0,disableScroll:v=!0,validationState:E="valid",onBlur:b=()=>{},onKeyUp:N=()=>{},onFocus:x=()=>{},onKeyDown:H=()=>{},onFocusChange:w=()=>{},...y}=e,{inputValue:k,numberValue:V,commit:R,increment:h,decrement:D,incrementToMax:K,decrementToMin:$}=t,{focusProps:W}=ee({onBlur:()=>R()}),L=we({...l,currencySign:void 0}),A=u.useMemo(()=>isNaN(V)?"":L.format(V),[L,V]),Y=De({maxValue:d,minValue:p,textValue:A,isRequired:c,isReadOnly:i,isDisabled:g,value:V,onIncrement:h,onDecrement:D,onIncrementToMax:K,onDecrementToMin:$}),j=u.useCallback(S=>{Math.abs(S.deltaY)<=Math.abs(S.deltaX)||(S.deltaY>0?h():S.deltaY<0&&D())},[D,h]);Ve({onScroll:j,isDisabled:g||i||v},n);const f=Pe({...y,label:r,autoFocus:a,isReadOnly:i,isRequired:c,isDisabled:g,description:o,errorMessage:s,type:"text",validationState:E,defaultValue:"",value:k,autoComplete:"off",inputMode:"numeric",onBlur:b,onFocus:x,onKeyUp:N,onChange:S=>{t.setInputValue(S)},onKeyDown:H,onFocusChange:w},t,n),I=B(Y,W,f,{autoCorrect:"off"}),C=()=>{var S;document.activeElement!==n.current&&((S=n.current)==null||S.focus())},T={"aria-label":"increase",type:"button",disabled:!t.canIncrement,onClick:()=>{C(),h()},onMouseDown:S=>S.preventDefault()},re={"aria-label":"decrease",type:"button",disabled:!t.canDecrement,onClick:()=>{C(),D()},onMouseDown:S=>S.preventDefault()};return{inputProps:I,incrementButtonProps:T,decrementButtonProps:re}}function xe(e,t=-1/0,n=1/0){return Math.min(Math.max(e,t),n)}function M(e,t,n,r){const o=(e-(t||0))%r;let s=Math.abs(o)*2>=r?e+Math.sign(o)*(r-Math.abs(o)):e-o;t?s<t?s=t:n&&s>n&&(s=t+Math.floor((n-t)/r)*r):n&&s>n&&(s=Math.floor(n/r)*r);const l=r.toString(),a=l.indexOf("."),c=a>=0?l.length-a:0;if(c>0){const i=Math.pow(10,c);s=Math.round(s*i)/i}return s}function Te(e,t,n){const[r,o]=u.useState(e??t),s=u.useRef(e!==void 0),l=e!==void 0,a=u.useRef(r);s.current=l;const c=u.useCallback((i,...g)=>{const d=(p,...v)=>{n&&(Object.is(a.current,p)||n(p,...v)),l||(a.current=p)};typeof i=="function"?o((v,...E)=>{const b=i(l?a.current:v,...E);return d(b,...g),l?v:b}):(l||o(i),d(i,...g))},[l,n]);return l?a.current=e:e=r,[e,c]}function Fe(e){const{step:t,value:n,minValue:r,maxValue:o,isReadOnly:s,isDisabled:l,defaultValue:a,formatOptions:c,locale:i="en-US",onChange:g}=e,[d,p]=Te(n,a&&isNaN(a)?NaN:a,g),[v,E]=u.useState(()=>isNaN(d)?"":new Q(i,c).format(d)),b=u.useMemo(()=>new le(i,c),[i,c]),N=u.useMemo(()=>b.getNumberingSystem(v),[b,v]),x=u.useMemo(()=>new Q(i,{...c,numberingSystem:N}),[i,c,N]),H=u.useMemo(()=>x.resolvedOptions(),[x]),w=u.useCallback(f=>isNaN(f)||f===null?"":x.format(f),[x]);let y=t||1;H.style==="percent"&&!t&&(y=.01);const k=u.useRef(d),V=u.useRef(i),R=u.useRef(c);(!Object.is(d,k.current)||i!==V.current||c!==R.current)&&(E(w(d)),k.current=d,V.current=i,R.current=c);const h=u.useMemo(()=>b.parse(v),[b,v]),D=u.useRef(0);D.current=h;const K=()=>{if(!v.length){p(NaN),E(n===void 0?"":w(d));return}if(isNaN(D.current)){E(w(d));return}let f;t?f=M(D.current,r,o,t):f=xe(D.current,r,o),f=b.parse(w(f)),p(f),E(w(n===void 0?f:d))},$=(f,I)=>{const C=D.current;if(isNaN(C))return M(I||0,r,o,y);{const T=M(C,r,o,y);return f==="+"&&T>C||f==="-"&&T<C?T:M(q(f,C,y),r,o,y)}},W=()=>{const f=$("+",r);f===d&&E(w(f)),p(f)},L=()=>{const f=$("-",o);f===d&&E(w(f)),p(f)},A=()=>{o!=null&&p(M(o,r,o,y))},Y=()=>{r!=null&&p(r)},j=u.useMemo(()=>!l&&!s&&(isNaN(h)||!o||M(h,r,o,y)>h||q("+",h,y)<=o),[l,s,r,o,y,h]),z=u.useMemo(()=>!l&&!s&&(isNaN(h)||!r||M(h,r,o,y)<h||q("-",h,y)>=r),[l,s,r,o,y,h]);return{inputValue:v,canIncrement:j,canDecrement:z,minValue:r??-1/0,maxValue:o??1/0,numberValue:h,commit:K,validate:f=>b.isValidPartialNumber(f,r,o),increment:W,decrement:L,setInputValue:E,incrementToMax:A,decrementToMin:Y}}function q(e,t,n){let r=e==="+"?t+n:t-n;if(t%1!==0||n%1!==0){const o=t.toString().split("."),s=n.toString().split("."),l=o[1]&&o[1].length||0,a=s[1]&&s[1].length||0,c=Math.pow(10,Math.max(l,a));t=Math.round(t*c),n=Math.round(n*c),r=e==="+"?t+n:t-n,r/=c}return r}const Be=F.forwardRef((e,t)=>{const{css:n={},isErrored:r=!1,id:o=`cdg-element-${Math.random().toString(36).substring(2)}`,onUpdate:s,className:l,...a}=e,c=ae(t),i=Fe(a),{inputProps:g,incrementButtonProps:d,decrementButtonProps:p}=Me(e,i,c);return F.useEffect(()=>{s==null||s(i.inputValue,i.numberValue)},[i.numberValue,i.inputValue]),U(ce,{css:n,isErrored:!!r,isDisabled:!!g.disabled,className:l,children:[e.label&&U("label",{htmlFor:o,children:[e.label,e.isRequired&&m("span",{children:"*"})]}),U("div",{children:[m("button",{...p,children:"-"}),m("input",{...g,id:o,ref:c}),m("button",{...d,children:"+"})]}),r&&e.errorMessage&&m(X,{error:!0,children:e.errorMessage}),e.helperText&&m(X,{children:e.helperText})]})}),P=Be;P.displayName="QuantityToggle";const Le=()=>{const[e,t]=u.useState(0);return U(oe,{children:[m("h3",{children:"Controlled"}),m(P,{placeholder:"Price",label:"Potato Price",value:e,onChange:n=>t(n),formatOptions:{style:"currency",currency:"USD"},onUpdate:(n,r)=>{console.log("onUpdate value",n),console.log("onUpdate number",r)}}),m("h3",{children:"Un-Controlled"}),m(P,{label:"Potato Price",placeholder:"Price",formatOptions:{style:"currency",currency:"USD"}}),m("h3",{children:"Step values"}),m(P,{label:"Step",step:10}),m(P,{label:"Step + minValue",minValue:2,step:3}),m(P,{label:"Step + minValue + maxValue",minValue:2,maxValue:21,step:3}),m("h3",{children:"Units"}),m(P,{label:"Package width",defaultValue:4,formatOptions:{style:"unit",unit:"inch",unitDisplay:"long"}}),m(P,{label:"Transaction amount",defaultValue:45,formatOptions:{style:"currency",currency:"EUR",currencyDisplay:"code",currencySign:"accounting"}}),m("h3",{children:"Enable Scroll"}),m(P,{label:"Potato Price",placeholder:"Price",disableScroll:!1}),m("h3",{children:"Disabled"}),m(P,{label:"Disabled",isDisabled:!0,defaultValue:25}),m("h3",{children:"Read only"}),m(P,{label:"Read only",isReadOnly:!0,defaultValue:32}),m("h3",{children:"Errored"}),m(P,{label:"Errored",defaultValue:2,isErrored:!0,helperText:"Bla Bla Bla"})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{Le as Variants};
