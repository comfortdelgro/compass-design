import{r as O,s as I,R as T,a as S,j as t,F as k}from"./index-82b60168.js";import{C as $}from"./index-4585bbc2.js";import{$ as E,a as U,b as B,c as K,d as w}from"./import-a86841ce.js";import{u as j,a as q,b as G,c as L,d as _,D as N,P as z,e as A}from"./useOverlayTriggerState-af152106.js";import{u as M,a as H,f as J,c as Q,r as X,b as Y,i as p,g as F,d as ee}from"./useCalendarState-da6f5a76.js";import{u as ae}from"./use-dom-ref-ed1bc5ee.js";import{C as le}from"./components-532da55b.js";import"./index-820adeb7.js";import"./button-090e0ebd.js";import"./clsx.m-30223e4c.js";import"./utils-c6ec796d.js";import"./useEvent-c6f51e7f.js";import"./import-76eb331c.js";import"./import-db2628dc.js";import"./index-cf8b885c.js";import"./index-d1f1e4ad.js";import"./index.es-d080bec7.js";function te(e,a,l){const i=M(),s=M(),n=M(),{labelProps:u,fieldProps:o,descriptionProps:b,errorMessageProps:m}=j({...e,labelElementType:"span"}),d=q(a,l),y=o["aria-labelledby"]||o.id,{locale:D}=E(),P=a.formatValue(D,{month:"long"}),V=P?`selectedDateDescription ${P}`:"",v=H(V),C=[v["aria-describedby"],o["aria-describedby"]].filter(Boolean).join(" ")||void 0,x=J(e),R=O.useMemo(()=>Q(l),[l]),{focusWithinProps:r}=G({...e,isDisabled:a.isOpen,onBlurWithin:e.onBlur,onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange});return{groupProps:{...x,...d,...o,...v,...r,role:"group","aria-disabled":e.isDisabled||null,"aria-labelledby":y,"aria-describedby":C,onKeyDown(c){a.isOpen||e.onKeyDown&&e.onKeyDown(c)},onKeyUp(c){a.isOpen||e.onKeyUp&&e.onKeyUp(c)}},labelProps:{...u,onClick:()=>{R.focusFirst()}},fieldProps:{...o,id:n,[X]:"presentation","aria-describedby":C,value:a.value,onChange:a.setValue,minValue:e.minValue,maxValue:e.maxValue,placeholderValue:e.placeholderValue,hideTimeZone:e.hideTimeZone,hourCycle:e.hourCycle,granularity:e.granularity,isDisabled:e.isDisabled,isReadOnly:e.isReadOnly,isRequired:e.isRequired,validationState:a.validationState,autoFocus:e.autoFocus},descriptionProps:b,errorMessageProps:m,buttonProps:{...v,id:i,"aria-haspopup":"dialog","aria-label":"calendar","aria-labelledby":`${y} ${i}`,"aria-describedby":C,"aria-expanded":a.isOpen||void 0,onPress:()=>a.setOpen(!0)},dialogProps:{id:s,"aria-labelledby":`${y} ${i}`},calendarProps:{autoFocus:!0,value:a.dateValue,onChange:a.setDateValue,minValue:e.minValue,maxValue:e.maxValue,isDisabled:e.isDisabled,isReadOnly:e.isReadOnly,isDateUnavailable:e.isDateUnavailable,defaultFocusedValue:a.dateValue?void 0:e.placeholderValue,validationState:a.validationState,errorMessage:e.errorMessage}}}function ie(e){var R;const a=L(e),[l,i]=Y(e.value,e.defaultValue,e.onChange),s=l||e.placeholderValue,[n,u]=_(s,e.granularity),o=l!=null?l.toDate(u??"UTC"):null,b=n==="hour"||n==="minute"||n==="second",m=e.shouldCloseOnSelect??!0,[d,y]=O.useState(),[D,P]=O.useState();if(O.useEffect(()=>{l&&(y(l),"hour"in l&&P(l))},[l]),s&&!(n in s))throw new Error("Invalid granularity "+n+" for value "+s.toString());const V=(r,c)=>{i("timeZone"in c?c.set(B(r)):K(r,c)),y(void 0),P(void 0)},v=r=>{const c=typeof m=="function"?m():m;b?D||c?V(r,D||F(e.placeholderValue)):y(r):i(r),c&&a.setOpen(!1)},C=r=>{d?V(d,r):P(r)},x=e.validationState||(p(l,e.minValue,e.maxValue)?"invalid":null)||(l&&((R=e.isDateUnavailable)!=null&&R.call(e,l))?"invalid":null);return{value:l,setValue:i,dateValue:d,timeValue:D,setDateValue:v,setTimeValue:C,granularity:n,hasTime:b,...a,setOpen(r){!r&&!l&&d&&b&&V(d,D||F(e.placeholderValue)),a.setOpen(r)},validationState:x,formatValue(r,c){if(!o)return"";const Z=ee(c,{granularity:n,timeZone:u,hideTimeZone:!!e.hideTimeZone,hourCycle:e.hourCycle??24,showEra:l.calendar.identifier==="gregory"&&l.era==="BC"});return new U(r,Z).format(o)}}}const ne=I("div",{width:"fit-content"}),re=I("div",{"& .date-range-fields":{display:"flex",gap:"$6"}}),oe=T.forwardRef((e,a)=>{const{css:l={},maxValue:i=w("2999-03-10")}=e,s=ie({...e,isReadOnly:e.isReadOnly?!0:!!e.isMobile,shouldCloseOnSelect:e.granularity?!0:e.shouldCloseOnSelect??!1}),n=ae(a),{groupProps:u,fieldProps:o,buttonProps:b,dialogProps:m,calendarProps:d}=te({...e,isReadOnly:e.isReadOnly?!0:!!e.isMobile},s,n),y={necessityIndicator:e.necessityIndicator,...o},D=()=>e.isReadOnly?!0:!(!e.isReadOnly&&!e.isMobile||e.isMobile);return d.isReadOnly=D(),S(ne,{css:l,children:[t(se,{ref:n,groupProps:u,fieldProps:y,buttonProps:b,isInvalid:e.isInvalid,isReadOnly:e.isReadOnly,isMobile:e.isMobile,label:e.label,errorMessage:e.errorMessage,helperText:e.helperText}),t(de,{maxValue:i,state:s,onCancel:e.onCancel,calendarProps:d,calendarRef:n,dialogProps:m,css:e.calendarCSS})]})}),se=T.forwardRef((e,a)=>{const{groupProps:l,fieldProps:i,buttonProps:s,label:n,isInvalid:u,isMobile:o,isReadOnly:b=!1,errorMessage:m,helperText:d}=e;return t(re,{...l,ref:a,children:t(N,{...i,"aria-describedby":i["aria-describedby"]??"",buttonProps:s,label:n,isInvalid:u,isMobile:o,isReadOnly:b,errorMessage:m,helperText:d})})}),de=e=>{const{state:a,calendarRef:l,dialogProps:i,calendarProps:s,onCancel:n,maxValue:u=w("2999-03-10"),css:o={}}=e;return t(k,{children:a.isOpen&&t(z,{state:a,triggerRef:l,offset:8,placement:"bottom start",children:t(A,{...i,"aria-describedby":i["aria-describedby"]??"","aria-label":i["aria-label"]??"","aria-labelledby":i["aria-labelledby"]??"",children:t($,{state:a,hasFooter:!0,onCancelCallback:n,...s,maxValue:u,css:o})})})})},g=oe;g.displayName="DatePicker";const{I18nProvider:W,useDateFormatter:ce}=$.I18N,{getLocalTimeZone:f,parseDate:ue,today:h}=$.InternationalizedDate,Ie=()=>{const e=h(f());return t(W,{locale:"en-SG",children:S(le,{children:[t("h3",{children:"Readonly"}),t(g,{isReadOnly:!0,label:"Date",defaultValue:h(f())}),t("h3",{children:"Disabled"}),t(g,{isDisabled:!0,label:"Date",defaultValue:h(f())}),t("h3",{children:"Invalid"}),t(g,{isInvalid:!0,label:"Date",defaultValue:h(f()),isRequired:!0,necessityIndicator:"icon"}),t("h3",{children:"MinValue"}),t(g,{label:"Date",defaultValue:h(f()),minValue:e}),t("h3",{children:"MaxValue"}),t(g,{label:"Date",defaultValue:h(f()),maxValue:h(f())})]})})},Te=()=>{const[e,a]=O.useState(ue(h(f()).toString())),l=ce({dateStyle:"full"});return S(W,{locale:"en-SG",children:[e?S("p",{children:[t("b",{children:"Selected date:"}),t("span",{style:{marginLeft:"4px"},children:l.format(e==null?void 0:e.toDate(f()))})]}):t(k,{}),t(g,{label:"Date",value:e,defaultValue:h(f()),onChange:i=>{a(i)}})]})},ke=()=>t(g,{label:"Date",isRequired:!0}),we={decorators:[e=>S("div",{children:[t("style",{dangerouslySetInnerHTML:{__html:".ladle-main { background: #eee; }"}}),t(e,{})]})]};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{Te as Controlled,ke as Default,Ie as Variants,we as default};
