let p=new Map,b=!1;try{b=new Intl.NumberFormat("de-DE",{signDisplay:"exceptZero"}).resolvedOptions().signDisplay==="exceptZero"}catch{}let c=!1;try{c=new Intl.NumberFormat("de-DE",{style:"unit",unit:"degree"}).resolvedOptions().style==="unit"}catch{}const w={degree:{narrow:{default:"°","ja-JP":" 度","zh-TW":"度","sl-SI":" °"}}};class L{format(e){let t="";if(!b&&this.options.signDisplay!=null?t=O(this.numberFormatter,this.options.signDisplay,e):t=this.numberFormatter.format(e),this.options.style==="unit"&&!c){var r;let{unit:i,unitDisplay:n="short",locale:l}=this.resolvedOptions(),o=(r=w[i])===null||r===void 0?void 0:r[n];t+=o[l]||o.default}return t}formatToParts(e){return this.numberFormatter.formatToParts(e)}formatRange(e,t){if(typeof this.numberFormatter.formatRange=="function")return this.numberFormatter.formatRange(e,t);if(t<e)throw new RangeError("End date must be >= start date");return`${this.format(e)} – ${this.format(t)}`}formatRangeToParts(e,t){if(typeof this.numberFormatter.formatRangeToParts=="function")return this.numberFormatter.formatRangeToParts(e,t);if(t<e)throw new RangeError("End date must be >= start date");let r=this.numberFormatter.formatToParts(e),i=this.numberFormatter.formatToParts(t);return[...r.map(n=>({...n,source:"startRange"})),{type:"literal",value:" – ",source:"shared"},...i.map(n=>({...n,source:"endRange"}))]}resolvedOptions(){let e=this.numberFormatter.resolvedOptions();return!b&&this.options.signDisplay!=null&&(e={...e,signDisplay:this.options.signDisplay}),!c&&this.options.style==="unit"&&(e={...e,style:"unit",unit:this.options.unit,unitDisplay:this.options.unitDisplay}),e}constructor(e,t={}){this.numberFormatter=M(e,t),this.options=t}}function M(s,e={}){let{numberingSystem:t}=e;if(t&&s.indexOf("-u-nu-")===-1&&(s=`${s}-u-nu-${t}`),e.style==="unit"&&!c){var r;let{unit:l,unitDisplay:o="short"}=e;if(!l)throw new Error('unit option must be provided with style: "unit"');if(!(!((r=w[l])===null||r===void 0)&&r[o]))throw new Error(`Unsupported unit ${l} with unitDisplay = ${o}`);e={...e,style:"decimal"}}let i=s+(e?Object.entries(e).sort((l,o)=>l[0]<o[0]?-1:1).join():"");if(p.has(i))return p.get(i);let n=new Intl.NumberFormat(s,e);return p.set(i,n),n}function O(s,e,t){if(e==="auto")return s.format(t);if(e==="never")return s.format(Math.abs(t));{let r=!1;if(e==="always"?r=t>0||Object.is(t,0):e==="exceptZero"&&(Object.is(t,-0)||Object.is(t,0)?t=Math.abs(t):r=t>0),r){let i=s.format(-t),n=s.format(t),l=i.replace(n,"").replace(/\u200e|\u061C/,"");return[...l].length!==1&&console.warn("@react-aria/i18n polyfill for NumberFormat signDisplay: Unsupported case"),i.replace(n,"!!!").replace(l,"+").replace("!!!",n)}else return s.format(t)}}const V=new RegExp("^.*\\(.*\\).*$"),W=["latn","arab","hanidec"];class Z{parse(e){return h(this.locale,this.options,e).parse(e)}isValidPartialNumber(e,t,r){return h(this.locale,this.options,e).isValidPartialNumber(e,t,r)}getNumberingSystem(e){return h(this.locale,this.options,e).options.numberingSystem}constructor(e,t={}){this.locale=e,this.options=t}}const $=new Map;function h(s,e,t){let r=S(s,e);if(!s.includes("-nu-")&&!r.isValidPartialNumber(t)){for(let i of W)if(i!==r.options.numberingSystem){let n=S(s+(s.includes("-u-")?"-nu-":"-u-nu-")+i,e);if(n.isValidPartialNumber(t))return n}}return r}function S(s,e){let t=s+(e?Object.entries(e).sort((i,n)=>i[0]<n[0]?-1:1).join():""),r=$.get(t);return r||(r=new z(s,e),$.set(t,r)),r}class z{parse(e){let t=this.sanitize(e);t=u(t,this.symbols.group,"").replace(this.symbols.decimal,".").replace(this.symbols.minusSign,"-").replace(this.symbols.numeral,this.symbols.index);let r=t?+t:NaN;if(isNaN(r))return NaN;if(this.options.currencySign==="accounting"&&V.test(e)&&(r=-1*r),this.options.style==="percent"){r/=100;var i;r=+r.toFixed(((i=this.options.maximumFractionDigits)!==null&&i!==void 0?i:0)+2)}return r}sanitize(e){return e=e.replace(this.symbols.literals,""),e=e.replace("-",this.symbols.minusSign),this.options.numberingSystem==="arab"&&(e=e.replace(",",this.symbols.decimal),e=e.replace(String.fromCharCode(1548),this.symbols.decimal),e=u(e,".",this.symbols.group)),this.options.locale==="fr-FR"&&(e=u(e,".",String.fromCharCode(8239))),e}isValidPartialNumber(e,t=-1/0,r=1/0){return e=this.sanitize(e),e.startsWith(this.symbols.minusSign)&&t<0?e=e.slice(this.symbols.minusSign.length):this.symbols.plusSign&&e.startsWith(this.symbols.plusSign)&&r>0&&(e=e.slice(this.symbols.plusSign.length)),e.startsWith(this.symbols.group)?!1:(e=u(e,this.symbols.group,"").replace(this.symbols.numeral,"").replace(this.symbols.decimal,""),e.length===0)}constructor(e,t={}){this.formatter=new Intl.NumberFormat(e,t),this.options=this.formatter.resolvedOptions(),this.symbols=A(this.formatter,this.options,t)}}const P=new Set(["decimal","fraction","integer","minusSign","plusSign","group"]);function A(s,e,t){var r,i,n,l;let o=s.formatToParts(-10000.111),N=s.formatToParts(10000.111),x=s.formatToParts(1);var m;let R=(m=(r=o.find(a=>a.type==="minusSign"))===null||r===void 0?void 0:r.value)!==null&&m!==void 0?m:"-",f=(i=N.find(a=>a.type==="plusSign"))===null||i===void 0?void 0:i.value;!f&&((t==null?void 0:t.signDisplay)==="exceptZero"||(t==null?void 0:t.signDisplay)==="always")&&(f="+");let E=(n=o.find(a=>a.type==="decimal"))===null||n===void 0?void 0:n.value,D=(l=o.find(a=>a.type==="group"))===null||l===void 0?void 0:l.value,F=o.filter(a=>!P.has(a.type)).map(a=>v(a.value)),j=x.filter(a=>!P.has(a.type)).map(a=>v(a.value)),g=[...new Set([...j,...F])].sort((a,d)=>d.length-a.length),C=g.length===0?new RegExp("[\\p{White_Space}]","gu"):new RegExp(`${g.join("|")}|[\\p{White_Space}]`,"gu"),y=[...new Intl.NumberFormat(e.locale,{useGrouping:!1}).format(9876543210)].reverse(),I=new Map(y.map((a,d)=>[a,d])),T=new RegExp(`[${y.join("")}]`,"g");return{minusSign:R,plusSign:f,decimal:E,group:D,literals:C,numeral:T,index:a=>String(I.get(a))}}function u(s,e,t){return s.replaceAll?s.replaceAll(e,t):s.split(e).join(t)}function v(s){return s.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}export{Z as $,L as a};
