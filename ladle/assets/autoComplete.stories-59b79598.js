import{s as O,R as s,r as E,j as c,a as Z}from"./index-a83a88d1.js";import{S as Q}from"./index-8f4da313.js";import{C as X}from"./components-c5eac87b.js";import{P as _}from"./index-c9eb4c5e.js";import{u as ee}from"./use-dom-ref-c0dde402.js";import"./button-2adbb341.js";import"./useCurrentTheme-1c6279d5.js";import"./floating-ui.react.esm-416da874.js";const oe=O("div",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",outline:"none",border:"none",margin:0,padding:0,background:"$background",boxShadow:"0 2px 5px rgba(0,0,0,0.2)",borderRadius:"$md",minHeight:"2rem",maxHeight:"16rem",overflowY:"auto"}),te=O("div",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",outline:"none",border:"none",margin:0,padding:0,fontSize:"$label2",fontFamily:"$header5",color:"$disabledText",width:"100%",minHeight:"2rem",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),ne=O("div",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",outline:"none",border:"none",margin:0,width:"100%",fontSize:"$label1",lineHeight:"1em",fontFamily:"$sans",fontWeight:"$medium",padding:"$2 $4",cursor:"pointer",display:"flex",alignItems:"center",gap:"$2","&:hover":{backgroundColor:"$gray20"},"&.hover":{backgroundColor:"$gray20"},"&:focus-visible":{backgroundColor:"$cdgBlue20"},variants:{isFocused:{true:{backgroundColor:"$gray20"}},isSelected:{true:{backgroundColor:"$gray20"}},isDisabled:{true:{opacity:.4,cursor:"not-allowed"}}}}),re=O("div",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",outline:"none",border:"none",margin:0,padding:0,"&:focus-visible":{outline:"none",border:"none",borderColor:"transparent"},width:"fit-content",height:"fit-content"}),ae=s.forwardRef((v,S)=>{var M,z;const{children:P,options:l,onSearch:i,onSelect:u,searchedValue:n,debounce:$,notFoundContent:R="No Results Found",css:o={},onLoadMore:r,isLoadingMore:m,...f}=v,[y,h]=s.useState(!1),[w,B]=s.useState(null),[j,q]=s.useState(null),x=ee(S),F=s.useRef(null),G=(M=x.current)==null?void 0:M.clientWidth,C=s.useRef(null),N=((z=C.current)==null?void 0:z.querySelector("input"))??C.current,W=()=>{!n||!i||i(n)},J=s.Children.map(P,e=>s.cloneElement(e,{ref:C,onFocus:()=>W(),onBlur:()=>h(!1),onKeyDown:t=>{Y(t)}})),D=e=>{q(e),u&&u(e),h(!1)},L=E.useRef(null),U=()=>{const e=L.current;e&&e.scrollTop===e.scrollHeight&&r&&!m&&r()},k=(e,t)=>{const p=t.offsetTop,g=p+t.clientHeight,b=e.scrollTop,A=b+e.clientHeight;p<b?e.scrollTop=p:g>A&&(e.scrollTop=g-e.clientHeight+t.clientHeight)},Y=e=>{var p,g,b,A;const t=L.current;if(t&&N){const a=Array.from((document==null?void 0:document.querySelectorAll('[role="option"]'))??[]),I=a[0],T=a[a.length-1],K=t.querySelector(".hover");switch(e.key){case"ArrowUp":if(e.preventDefault(),I.classList.contains("hover"))I.classList.remove("hover"),T.classList.add("hover"),k(t,T);else{const d=a.findIndex(H=>H.classList.contains("hover"));(p=a[d])==null||p.classList.remove("hover"),(g=a[d-1])==null||g.classList.add("hover"),k(t,a[d-1])}break;case"ArrowDown":if(e.preventDefault(),T.classList.contains("hover"))r&&!m?r():(T.classList.remove("hover"),I.classList.add("hover"),k(t,I));else{const d=a.findIndex(H=>H.classList.contains("hover"));(b=a[d])==null||b.classList.remove("hover"),(A=a[d+1])==null||A.classList.add("hover"),k(t,a[d+1])}break;case"Enter":e.preventDefault(),K&&D(K.dataset.value??"");break;case"Escape":e.preventDefault(),h(!1);break}}};return s.useEffect(()=>{if(F.current=n,n&&n!==j){w&&clearTimeout(w);const e=setTimeout(()=>{F.current===n&&i&&i(n)},$);B(e)}else h(!1);return()=>{w&&clearTimeout(w)}},[n]),s.useEffect(()=>{n&&h(!0)},[l]),s.useEffect(()=>{const e=L.current;if(y&&e){const t=e.querySelector('[role="option"]');t?t.classList.add("hover"):e.classList.add("hover")}},[y,C]),c(re,{ref:x,css:o,...f,"aria-haspopup":"true","aria-expanded":y?"true":"false","aria-controls":"autocomplete-popover",tabIndex:-1,children:c(_,{isOpen:y,anchor:J,direction:"bottom-center",attachToElement:x.current&&x.current.parentElement,children:c(oe,{ref:L,css:{width:G},onScroll:U,tabIndex:-1,children:(l==null?void 0:l.length)===0?c(te,{children:R}):l==null?void 0:l.map(e=>c(ne,{"data-value":e,onClick:()=>D(e),tabIndex:0,role:"option",children:e},e))})})})}),V=ae;V.displayName="AutoComplete";const fe=()=>{const[v,S]=E.useState(""),[P,l]=E.useState([]),[i,u]=E.useState(!1),n=async o=>{try{await new Promise(f=>setTimeout(f,100));const m=["Lion","Giraffe","Elephant","Penguin","Dolphin","Koala","Cheetah","Kangaroo","Octopus","Gorilla","Tiger","Zebra","Hippopotamus","Panda","Snake","Leopard","Polar Bear","Lemur","Jaguar","Chimpanzee"].filter(f=>f.toLowerCase().includes(o.toLowerCase()));l([...m]),console.log("API call successful:",m)}catch(r){console.error("Error during API call:",r)}},$=async()=>{if(!i)try{u(!0),await new Promise(r=>setTimeout(r,500));const o=["Raccoon","Ostrich","Flamingo","Pangolin","Llama","Meerkat","Koala","Chameleon","Sloth","Armadillo","Puma","Jaguar","Gazelle","Mongoose","Platypus","Peacock","Tapir","Hedgehog","Kangaroo","Otter"];l(r=>[...r,...o]),u(!1),console.log("Load more successful:",o)}catch(o){u(!1),console.error("Error during Load more:",o)}},R=o=>{S(o),console.log("Selected value:",o)};return Z(X,{children:[c("h3",{children:"Full-featured Example: Auto Complete"}),c(V,{searchedValue:v,debounce:800,onSearch:o=>n(o),options:P,onSelect:o=>R(o),notFoundContent:"No data found",onLoadMore:()=>$(),isLoadingMore:i,children:c(Q,{placeholder:"Search",onInput:o=>S(o.target.value),value:v})})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{fe as FullFeatured};
