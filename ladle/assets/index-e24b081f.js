import{a as W}from"./index-1156f3dc.js";import{a as V,$ as k,t as j}from"./module-131c5ef1.js";import{g as I,$ as M,f as K,a as z}from"./module-a4c8a355.js";import{r as u,R as L,s as A,a as w,j as x,F as Y}from"./index-ea5c0394.js";import{$ as q}from"./module-5c1c1756.js";import{I as G}from"./index-bf0db36f.js";import{f as J}from"./module-eb500eed.js";import{$ as Q}from"./module-ef1a7e8f.js";import{u as X}from"./use-dom-ref-5967c7c5.js";function Z(s,o){let l=V(s,{labelable:!0}),{hoverProps:e}=I({onHoverStart:()=>o==null?void 0:o.open(!0),onHoverEnd:()=>o==null?void 0:o.close()});return{tooltipProps:k(l,e,{role:"tooltip"})}}function ee(s,o,l){let{isDisabled:e,trigger:a}=s,i=j(),t=u.useRef(!1),r=u.useRef(!1),c=()=>{(t.current||r.current)&&o.open(r.current)},p=f=>{!t.current&&!r.current&&o.close(f)};u.useEffect(()=>{let f=S=>{l&&l.current&&S.key==="Escape"&&o.close(!0)};if(o.isOpen)return document.addEventListener("keydown",f,!0),()=>{document.removeEventListener("keydown",f,!0)}},[l,o]);let $=()=>{a!=="focus"&&(K()==="pointer"?t.current=!0:t.current=!1,c())},b=()=>{a!=="focus"&&(r.current=!1,t.current=!1,p())},n=()=>{r.current=!1,t.current=!1,p(!0)},g=()=>{z()&&(r.current=!0,c())},O=()=>{r.current=!1,t.current=!1,p(!0)},{hoverProps:T}=I({isDisabled:e,onHoverStart:$,onHoverEnd:b}),{pressProps:P}=M({onPressStart:n}),{focusableProps:h}=q({isDisabled:e,onFocus:g,onBlur:O},l);return{triggerProps:{"aria-describedby":o.isOpen?i:void 0,...k(h,T,P)},tooltipProps:{id:i}}}const te=1500,D=500;let v={},oe=0,R=!1,m=null,y=null;function re(s={}){let{delay:o=te}=s,{isOpen:l,open:e,close:a}=Q(s),i=u.useMemo(()=>`${++oe}`,[]),t=u.useRef(),r=()=>{v[i]=$},c=()=>{for(let n in v)n!==i&&(v[n](!0),delete v[n])},p=()=>{clearTimeout(t.current),t.current=null,c(),r(),R=!0,e(),m&&(clearTimeout(m),m=null),y&&(clearTimeout(y),y=null)},$=n=>{n?(clearTimeout(t.current),t.current=null,a()):t.current||(t.current=setTimeout(()=>{t.current=null,a()},D)),m&&(clearTimeout(m),m=null),R&&(y&&clearTimeout(y),y=setTimeout(()=>{delete v[i],y=null,R=!1},D))},b=()=>{c(),r(),!l&&!m&&!R?m=setTimeout(()=>{m=null,R=!0,p()},o):l||p()};return u.useEffect(()=>()=>{clearTimeout(t.current),v[i]&&delete v[i]},[i]),{isOpen:l,open:n=>{!n&&o>0&&!t.current?b():p()},close:$}}const _=L.createContext({}),d="8px",le={borderLeft:`${d} solid transparent`,borderRight:`${d} solid transparent`,borderTop:`${d} solid currentColor`},ie={borderTop:`${d} solid transparent`,borderBottom:`${d} solid transparent`,borderRight:`${d} solid currentColor`},ne={borderLeft:`${d} solid transparent`,borderRight:`${d} solid transparent`,borderBottom:`${d} solid currentColor`},se={borderTop:`${d} solid transparent`,borderBottom:`${d} solid transparent`,borderLeft:`${d} solid currentColor`},ce=A("span",{$$padding:"$space$4","&:before":{content:"''",display:"block",width:"0",height:"0",position:"absolute",color:"$cdgBlue"},variants:{arrowPosition:{top:{"&:before":{top:"calc(($$padding * -1/2))",...ne}},right:{"&:before":{right:"calc(($$padding * -1/2))",...se}},left:{"&:before":{left:"calc(($$padding * -1/2))",...ie}},bottom:{"&:before":{bottom:"calc(($$padding * -1/2))",...le}}}}}),ae=A("div",{$$themeColor:"$cdgBlue",position:"absolute",padding:"$4",maxWidth:"$96",background:"$cdgBlue",lineHeight:"$normal",borderRadius:"$md",boxShadow:"0px 0.3px 0.9px rgba(0, 0, 0, 0.1), 0px 1.6px 3.6px rgba(0, 0, 0, 0.13)",color:"$whiteText","& .tooltip-header":{display:"flex",alignItems:"flex-start",marginBottom:"$4"},"& .tooltip-title":{fontSize:"$5",lineHeight:"$loose",margin:0,marginRight:"$4"},"& .tootip-close-button":{marginLeft:"auto",background:"none",color:"inherit",border:"none",padding:"0",cursor:"pointer",outline:"inherit"},"& .tooltip-close-icon":{width:"$4",height:"$4"}}),de={top:"bottom",right:"left",bottom:"top",left:"right",center:"top"},B=8,pe=L.forwardRef((s,o)=>{let{ref:l,arrowProps:e,state:a,style:i,placement:t}=u.useContext(_);const{css:r={},title:c,children:p,dismissible:$=!1,...b}=s,{tooltipProps:n}=Z(b,a);u.useImperativeHandle(o,()=>l.current);const O={arrowPosition:de[t||"top"]},T=()=>{var f,S,E,C;const h={"&:before":{color:r.backgroundColor||r.background,left:((f=e==null?void 0:e.style)==null?void 0:f.left)!==void 0?+((S=e==null?void 0:e.style)==null?void 0:S.left)-B:void 0,top:((E=e==null?void 0:e.style)==null?void 0:E.top)!==void 0?+((C=e==null?void 0:e.style)==null?void 0:C.top)-B:void 0}};return h["&:before"].color||delete h["&:before"].color,h};return w(ae,{ref:l,css:r,style:i,...n,children:[(c||$)&&w("div",{className:"tooltip-header",children:[c&&(()=>typeof c=="string"?x("h2",{className:"tooltip-title",children:c}):x("div",{className:"tooltip-title",children:c}))(),$&&x("button",{className:"tootip-close-button",onClick:()=>a==null?void 0:a.close(!0),children:x(G,{icon:W,className:"tooltip-close-icon"})})]}),p,x(ce,{...O,css:T()})]})}),fe=pe,ue=A("button",{display:"inline-block",background:"none",color:"inherit",border:"none",padding:"0",cursor:"pointer",outline:"inherit"}),$e=16,F=0,H=16,be=L.forwardRef((s,o)=>{const{css:l={},children:e,open:a,onOpenChange:i,offset:t=$e,placement:r="bottom",defaultOpen:c=!1,shouldFlip:p=!0,...$}=s;let{crossOffset:b=F}=s;const n={delay:0,...s};r==="right bottom"||r==="left bottom"?b=F+H:(r==="right top"||r==="left top")&&(b=F-H);const g=re(n);u.useEffect(()=>{i&&i(g.isOpen)},[g.isOpen]);const O=a??g.isOpen,T=X(o),{triggerProps:P,tooltipProps:h}=ee(s,g,T),f=u.useRef(null),[S,E]=L.Children.toArray(e),{overlayProps:C,arrowProps:N,placement:U}=J({placement:r,targetRef:T,overlayRef:f,offset:t,crossOffset:b,isOpen:O,shouldFlip:p});return w(Y,{children:[x(ue,{css:l,ref:T,...P,...$,children:S}),x(_.Provider,{value:{state:g,arrowProps:N,ref:f,style:C.style,placement:U,...h},children:(O||c)&&E})]})}),me=be;fe.displayName="Tooltip";me.displayName="TooltipTrigger";export{me as T,fe as a};
