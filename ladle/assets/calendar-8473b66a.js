import{r as f,s as v,j as t,F as w,R as S,a as T}from"./index-ad2ef031.js";import{u as N,C as A,ao as g,d as V,ap as k,ab as I,ak as W,p as H,aq as Z,x as _,ar as K,ae as U,as as q,l as J,K as Q,at as M}from"./useCalendarState-636c6f66.js";import"./index-9a40c972.js";import{u as X}from"./use-dom-ref-7a1e24d2.js";import{B as R}from"./button-ea3a0e9c.js";let p=new Map;function ee(n){let{locale:e}=N(),l=e+(n?Object.entries(n).sort((c,r)=>c[0]<r[0]?-1:1).join():"");if(p.has(l))return p.get(l);let i=new Intl.Collator(e,n);return p.set(l,i),i}function he(n){let e=ee({usage:"search",...n}),l=f.useCallback((r,a)=>a.length===0?!0:(r=r.normalize("NFC"),a=a.normalize("NFC"),e.compare(r.slice(0,a.length),a)===0),[e]),i=f.useCallback((r,a)=>a.length===0?!0:(r=r.normalize("NFC"),a=a.normalize("NFC"),e.compare(r.slice(-a.length),a)===0),[e]),c=f.useCallback((r,a)=>{if(a.length===0)return!0;r=r.normalize("NFC"),a=a.normalize("NFC");let o=0,s=a.length;for(;o+s<=r.length;o++){let b=r.slice(o,o+s);if(e.compare(a,b)===0)return!0}return!1},[e]);return f.useMemo(()=>({startsWith:l,endsWith:i,contains:c}),[l,i,c])}const z=v("div",{display:"grid",gridTemplateColumns:"repeat(3,1fr)",marginTop:"12px"}),E=v("button",{width:"94px",height:"47.5px",backgroundColor:"transparent",border:"none",borderRadius:"$md",cursor:"pointer",fontSize:"$link3",color:"$primaryText","&:hover, &:focus-visible":{backgroundColor:"$cdgBlue100",color:"$white",fontWeight:"normal",outline:"none"},"&:disabled, &:disabled:hover":{backgroundColor:"inherit",color:"$gray50",cursor:"not-allowed"},"&.highlighted":{color:"$cdgBlue100",fontWeight:"bold"},"&.highlighted:hover":{color:"$white"}}),ae=n=>{const{state:e,monthYearState:l}=n,i=(l==null?void 0:l.months)??[],c=r=>{const a=e.focusedDate;return()=>{var o;(o=e.setFocusedDate)==null||o.call(e,new A((a==null?void 0:a.year)??new Date().getFullYear(),i.indexOf(r)+1,1)),l==null||l.setMonthYearState(g.DATE)}};return t(z,{children:i.map(r=>t(E,{type:"button","aria-label":r,onClick:c(r),children:r},r))})},re=ae,le=n=>{const{state:e,monthYearState:l,maxValue:i}=n,c=a=>{const o=e.focusedDate;return()=>{var s;(s=e.setFocusedDate)==null||s.call(e,new A(a,(o==null?void 0:o.month)??new Date().getMonth()+1,1)),l==null||l.nextState()}},r=new Date;return t(z,{children:Array.isArray(l==null?void 0:l.renderedYears)?l==null?void 0:l.renderedYears.map(a=>{const o=(()=>{var b;return i?(i==null?void 0:i.year)<a:e.minValue?((b=e.minValue)==null?void 0:b.year)>a:!1})(),s=a===r.getFullYear();return t(E,{type:"button",className:`calendar-year-cell ${o?"disabled":""} ${s?"highlighted":""}`,"aria-label":a.toString(),onClick:c(a),disabled:o,children:a},a)}):t(w,{})})},ne=le,oe=v("div",{width:"fit-content",backgroundColor:"$background",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.08)",borderRadius:"$md",padding:"$4","& .calendar-footer":{display:"flex",justifyContent:"space-between",alignItems:"center",gap:"$2",paddingTop:"$6",marginTop:"$6",borderTop:"1px solid $gray60"},"& .calendar-footer button":{padding:"$1 $2_5",height:"$8",fontSize:"$label2"}});function ie(n,e){var m,D,y,d,u,x;const l=V(n),i=k((m=e.visibleRange)==null?void 0:m.start,e.timeZone??"UTC"),c=k((D=e.visibleRange)==null?void 0:D.end,e.timeZone??"UTC");I.set(e,{ariaLabel:n["aria-label"]??"",ariaLabelledBy:n["aria-labelledby"]??"",errorMessageId:"",selectedDateDescription:""});const r=f.useRef(!1),a=n.isDisabled||((y=e==null?void 0:e.isNextVisibleRangeInvalid)==null?void 0:y.call(e));a&&r.current&&(r.current=!1,(d=e==null?void 0:e.setFocused)==null||d.call(e,!0));const o=f.useRef(!1),s=n.isDisabled||((u=e.isPreviousVisibleRangeInvalid)==null?void 0:u.call(e));s&&o.current&&(o.current=!1,(x=e.setFocused)==null||x.call(e,!0));const b=W({id:n.id,"aria-label":[n["aria-label"],c].filter(Boolean).join(", "),"aria-labelledby":n["aria-labelledby"]});return{title:i,calendarProps:{...l,...b,role:"group","aria-describedby":n["aria-describedby"]||void 0},nextButtonProps:{onPress:()=>{var h;return(h=e.focusNextPage)==null?void 0:h.call(e)},"aria-label":"Next",isDisabled:a,onFocus:()=>r.current=!0,onBlur:()=>r.current=!1},prevButtonProps:{onPress:()=>{var h;return(h=e.focusPreviousPage)==null?void 0:h.call(e)},"aria-label":"Previous",isDisabled:s,onFocus:()=>o.current=!0,onBlur:()=>o.current=!1}}}const de=S.forwardRef((n,e)=>{var F;const{state:l,hasFooter:i=!1,css:c={},maxValue:r=H("2999-02-17"),isDisabled:a=!1,ctaButtonRender:o,"aria-labelledby":s,"aria-describedby":b,...m}=n,{locale:D}=N(),y=X(e),d=Z({locale:D,isDisabled:a,createCalendar:_,...m,value:n.state?(F=n.state)==null?void 0:F.value:n.value}),u=K({state:d,maxValue:r}),{calendarProps:x,prevButtonProps:h,nextButtonProps:Y}=ie({isDisabled:a,...m},d),{setIsReset:$}=U(),j=()=>{var C;$||(C=n.onChange)==null||C.call(n,null),$==null||$(!0)},L=()=>{var B,P;const C=J(Q());l?l==null||l.setDateValue(C):(B=d.selectDate)==null||B.call(d,C),(P=d.setFocusedDate)==null||P.call(d,C)},G=()=>{switch(u.currentState){case g.DATE:return t(M,{state:d,maxValue:r});case g.MONTH:return t(re,{state:d,monthYearState:u,maxValue:r});case g.YEAR:return t(ne,{state:d,monthYearState:u,maxValue:r});default:return t(M,{state:d,maxValue:r})}},O=f.useCallback(()=>o||t(R,{className:"cdg-calendar-today-btn",onPress:()=>{u.setMonthYearState(g.DATE),L()},children:"Today"}),[o]);return t(w,{children:T(oe,{ref:y,css:c,role:"Calendar","aria-label":"Calendar","aria-labelledby":s,"aria-describedby":b,children:[t(q,{state:d,calendarProps:x,prevButtonProps:h,nextButtonProps:Y,middleButtonProps:u}),G(),i&&T("div",{className:"calendar-footer",children:[t(R,{className:"cdg-calendar-clear-btn",variant:"ghost",onPress:()=>{u.setMonthYearState(g.DATE),j()},children:"Clear"}),O()]})]})})}),fe=de;export{fe as C,he as a,ee as u};
