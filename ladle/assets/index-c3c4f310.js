import{S as ye,a as we,B as Z,b as q,c as be,P as Ce,D as me}from"./index.styles-ba9d155a.js";import{p as ve,a as Se,t as xe,L as $e,I as ke,D as Q,b as Le}from"./utils-62b75d72.js";import{u as Re,a as De,b as Me,D as Be,c as Fe,z as Ie}from"./floating-ui.react.esm-8a9d1ec6.js";import{s as D,R as l,a as b,j as e,F as Ee}from"./index-e285302b.js";import{S as U}from"./dropdown.styles-dc609ea9.js";import{u as I}from"./use-dom-ref-58648911.js";const Oe=D("div",{display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:"$6",height:"$6",div:{border:"1px solid #323130",borderRadius:"3px",width:"$4",height:"$4",display:"flex",alignItems:"center",justifyContent:"center",background:"#FFFFFF"},variants:{isSelected:{true:{div:{border:0,background:"$cdgBlue100",svg:{display:"block"}}},false:{div:{svg:{display:"none"}}}}}});function Y({item:n,currentKeys:d,focusKey:s,disabledKeys:r,onSelect:a}){const h=l.useRef(null),c=l.useMemo(()=>n.key?d.includes(n.key):!1,[d]),g=l.useMemo(()=>s===n.key,[s]),C=l.useMemo(()=>n.key?r.includes(n.key):!1,[r]);return b(ye,{ref:h,isFocused:g,isSelected:c,onClick:()=>{n.key&&!C&&a(n.key)},isDisabled:C,children:[e(we,{children:n.props.children}),e(Oe,{isSelected:c,children:e("div",{children:e(Ke,{})})})]})}const Ke=()=>e("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:e("path",{d:"M9.39158 1.86239C9.64736 2.12284 9.64736 2.54372 9.39158 2.80416L4.15319 8.13808C3.89741 8.39853 3.48407 8.39853 3.22829 8.13808L0.608522 5.47112C0.352823 5.21068 0.352823 4.7898 0.608522 4.52935C0.864262 4.26891 1.27883 4.26891 1.53461 4.52935L3.67232 6.72334L8.46668 1.86239C8.72246 1.60153 9.1358 1.60153 9.39158 1.86239Z",fill:"white"})});function We(n){const d=l.useRef(null),{focusKey:s,isLoading:r,collection:a,currentKeys:h,disabledKeys:c,rootChildren:g,listBoxRef:C=d,sectionCollection:m,onSelect:v,onLoadMore:p}=n;return e(Z,{isLoading:r,listBoxRef:C,collection:a,sectionCollection:m,rootChildren:g,onLoadMore:p,renderOptions:y=>y.map(S=>b("div",{children:[S.title&&e(q,{children:S.title}),S.children.map($=>$?e(Y,{item:$,focusKey:s,currentKeys:h,disabledKeys:c,onSelect:v},$.key):null)]},S.id))})}const ze=D("div",{width:"100%",label:{fontSize:"$label1",fontWeight:"$semibold",marginBottom:"$2",display:"inline-block",width:"100%",span:{marginLeft:"$1",color:"$danger"}}}),je=D("div",{width:"100%",minHeight:"$11",borderRadius:"$md",cursor:"text",display:"flex",alignItems:"center",padding:"$1_5 $4",gap:"$1",backgroundColor:"#FFFFFF",transition:"$default",borderWidth:"1px",borderStyle:"solid",borderColor:"#E6E6E6",".dropdown-icon":{cursor:"pointer",flexShrink:0,display:"flex",justifyContent:"center",alignItems:"center",padding:0,border:"none",background:"transparent",svg:{width:"$4",height:"$4"}},"&:focus-within":{borderColor:"$cdgBlue"},input:{height:"$6_5",width:4,padding:0,margin:0,border:"none","&:focus":{outline:"none"},"&:focus-visible":{outline:"none"}},variants:{isEmpty:{true:{button:{p:{color:"#B4B4B4"}}}},isDisabled:{true:{backgroundColor:"$gray20","*":{color:"$disabledText",cursor:"not-allowed !important"}}},isErrored:{true:{borderColor:"$danger","&:focus-within":{borderColor:"$danger"}}}}}),Ae=D("div",{flexGrow:1,alignItems:"center",minHeight:"$7",display:"flex",gap:"$2_5",flexWrap:"wrap",p:{color:"#B4B4B4",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",fontSize:"$label1",fontWeight:"$semibold",height:"$6",display:"flex",alignItems:"center",flexGrow:1,border:"none",textAlign:"start",padding:0,margin:0}}),He=D("div",{border:"1px solid #E6E6E6",borderRadius:"$full",padding:"$1 $3",fontSize:"$label1",cursor:"default",fontWeight:"$semibold",display:"flex",justifyContent:"center",alignItems:"center",gap:"$2",div:{width:"fit-content",height:"fit-content"}}),Pe=l.forwardRef((n,d)=>{const{collection:s,rootChildren:r,sectionCollection:a,listBoxRef:h,isLoading:c,numberOfRows:g,onLoadMore:C}=n,m=I(d);return g&&g>=0?e(be,{ref:m,children:e(Z,{isLoading:c,collection:s,listBoxRef:h,rootChildren:r,sectionCollection:a,renderOptions:v=>v.slice(0,Math.min(g,s.length)).map(p=>b("div",{children:[p.title&&e(q,{children:p.title}),p.children.map(y=>y?e(Y,{item:y,focusKey:void 0,currentKeys:[],disabledKeys:[],onSelect:()=>{}},y.key):null)]},p.id)),onLoadMore:C})}):null}),_e=Pe,Ne=()=>b("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:[e("g",{clipPath:"url(#clip0_5299_13653)",children:e("path",{d:"M9.11731 7.88215C9.45908 8.22392 9.45908 8.77759 9.11731 9.11936C8.94779 9.29024 8.72359 9.375 8.49938 9.375C8.27518 9.375 8.05153 9.28956 7.88092 9.11867L4.99966 6.23892L2.11867 9.11799C1.94779 9.29024 1.72386 9.375 1.49993 9.375C1.276 9.375 1.05235 9.29024 0.881328 9.11799C0.539557 8.77622 0.539557 8.22255 0.881328 7.88078L3.76313 4.99897L0.881328 2.11854C0.539557 1.77677 0.539557 1.2231 0.881328 0.881328C1.2231 0.539557 1.77677 0.539557 2.11854 0.881328L4.99966 3.7645L7.88146 0.882695C8.22323 0.540925 8.7769 0.540925 9.11867 0.882695C9.46044 1.22446 9.46044 1.77813 9.11867 2.1199L6.23687 5.00171L9.11731 7.88215Z",fill:"#3B3A39"})}),e("defs",{children:e("clipPath",{id:"clip0_5299_13653",children:e("rect",{width:"10",height:"10",fill:"white"})})})]});function X(n,d){if(d!=null&&d.length>0){const s=[];for(const r of d)s.push(r);return s}else if(n!=null&&n.length>0){const s=[];for(const r of n)s.push(r);return s}return[]}const Te=l.forwardRef((n,d)=>{const{css:s={},isOpen:r,children:a,isErrored:h,isDisabled:c,isRequired:g,isReadOnly:C,helperText:m,defaultOpen:v,errorMessage:p,selectedKeys:y,numberOfRows:S,icon:$=e(ke,{}),disabledKeys:k=[],isLoading:H=!1,defaultSelectedKeys:O=[],onLoadMore:V=()=>{},onBlur:ee=()=>{},onFocus:te=()=>{},...ne}=n,[x,L]=l.useState(!1),[R,oe]=l.useState(""),[P,K]=l.useState(!1),[u,W]=l.useState(X(O,y)),[w,M]=l.useState(),ie=I(d),B=I(null),z=I(null),le=l.useRef(null),se=l.useRef(null),_=l.useRef(null),{refs:N,floatingStyles:re,context:de}=Re({open:x,onOpenChange:L,middleware:[Be(8),Fe()],whileElementsMounted:Ie}),ce=De(de),{getReferenceProps:ae,getFloatingProps:ue}=Me([ce]),f=l.useMemo(()=>ve(a,Q),[a]),T=l.useMemo(()=>Se(a),[a]),j=l.useMemo(()=>!P||R===""?f:f.filter(t=>{const o=xe(t);return o==null?void 0:o.toLowerCase().includes(R.toLowerCase())}),[f,R,P]),F=l.useMemo(()=>new $e(f,k),[f,k]),A=l.useMemo(()=>{const t=[];return f.length>0&&u&&u.length>0&&u.forEach(o=>{const i=f.find(pe=>pe.key===o);t.push({key:o,rendered:i==null?void 0:i.props.children})}),t},[u,f,u.length]);l.useEffect(()=>{W(X(O,y))},[JSON.stringify(y),JSON.stringify(O)]),l.useEffect(()=>{!r&&v&&L(v),r&&L(r)},[r]),l.useEffect(()=>{var t,o,i;M([...u].pop()),(t=n.onOpenChange)==null||t.call(n,x),x?(o=z.current)==null||o.focus():(K(!1),(i=z.current)==null||i.blur(),K(!1))},[x]);const fe=t=>{var i;const o=new Set(u);u.includes(t)&&(o.delete(t),W([...o]),(i=n.onSelectionChange)==null||i.call(n,[...o]))},he=t=>{if(B.current){const o=t.target.value;if(K(!0),oe(o),o!==""){const i=document.createElement("div");i.style.position="absolute",i.style.top="0",i.style.left="-9999px",i.style.overflow="hidden",i.style.visibility="hidden",i.style.whiteSpace="nowrap",i.style.height="0",i.style.width="fit-content",i.style.maxWidth=`${B.current.clientWidth-62}px`,i.innerHTML=o.replace(/\s/g,"&nbsp;"),document.body.appendChild(i),t.target.focus(),t.target.style.width=`${i.clientWidth+4}px`,i.remove()}else t.target.style.width="4px"}},ge=t=>{switch(t.key){case"ArrowUp":case"ArrowLeft":{t.preventDefault();const o=w!=null&&w!=-1?F.getKeyAbove(w):F.getFirstKey();o&&M(o);break}case"ArrowDown":case"ArrowRight":{t.preventDefault();const o=w!=null&&w!=-1?F.getKeyBelow(w):F.getFirstKey();o&&M(o);break}case"Enter":{t.preventDefault(),w&&G(w);break}case"Escape":{t.preventDefault(),L(!1);break}}},G=t=>{var o;if(!C){const i=new Set(u);u.includes(t)?i.delete(t):i.add(t),W([...i]),(o=n.onSelectionChange)==null||o.call(n,[...i]),M(t)}},J=()=>{c||L(!0)};return b(ze,{css:s,ref:ie,...ne,children:[n.label&&b("label",{onClick:J,children:[n.label,g&&e("span",{children:"*"})]}),e("div",{ref:N.setReference,...ae,children:b(je,{ref:B,isErrored:!!h,isDisabled:!!c,onClick:J,children:[b(Ae,{children:[A.length===0&&R===""&&!x&&e("p",{children:n.placeholder}),A.length>0&&A.map(t=>{const o=c||k.includes(t.key);return b(He,{style:{cursor:c?"not-allowed":"pointer"},children:[e("div",{children:t.rendered}),o?e(Ee,{}):e("div",{onClick:()=>{!c&&![...k].includes(t.key)&&fe(t.key)},children:e(Ne,{})})]},t.key)}),!c&&e("input",{type:"text",ref:z,value:R,onChange:he})]}),e("div",{className:"dropdown-icon",children:$})]})}),j&&x&&e("div",{className:"Popover",ref:N.setFloating,style:{...re,zIndex:60},...ue,children:e(Ce,{isEmpty:j.length===0,visualizeRef:_,triggerRef:B,onBlur:ee,onFocus:te,handleKeyDown:ge,children:e(We,{focusKey:w,isLoading:H,collection:j,rootChildren:a,listBoxRef:le,currentKeys:u,disabledKeys:k,sectionCollection:T,onSelect:G,onLoadMore:V})})}),e(_e,{ref:se,isLoading:H,collection:f,listBoxRef:_,rootChildren:a,numberOfRows:S,sectionCollection:T,onLoadMore:()=>{}}),h&&p&&e(U,{error:!!h,children:p}),m&&e(U,{children:m})]})}),E=Te;E.Item=Q;E.Header=me;E.Section=Le;E.displayName="MultipleDropdown";export{E as M};
