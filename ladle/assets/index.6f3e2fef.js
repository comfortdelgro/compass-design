import{a as W}from"./index.5d2db72a.js";import{a as V,$ as k,u as j}from"./module.34527761.js";import{g as I,$ as M,f as K,a as z}from"./module.c85baef7.js";import{r as u,R as L,s as A,a as w,j as y,F as Y}from"./index.223b3bb2.js";import{$ as q}from"./module.876eabbd.js";import{I as G}from"./index.1116bd3f.js";import{d as J}from"./module.b4d1a842.js";import{$ as Q}from"./module.c9681930.js";import{u as X}from"./use-dom-ref.0280b2f2.js";function Z(c,o){let l=V(c,{labelable:!0}),{hoverProps:e}=I({onHoverStart:()=>o==null?void 0:o.open(!0),onHoverEnd:()=>o==null?void 0:o.close()});return{tooltipProps:k(l,e,{role:"tooltip"})}}function ee(c,o,l){let{isDisabled:e,trigger:i}=c,n=j(),t=u.exports.useRef(!1),r=u.exports.useRef(!1),a=()=>{(t.current||r.current)&&o.open(r.current)},p=f=>{!t.current&&!r.current&&o.close(f)};u.exports.useEffect(()=>{let f=S=>{l&&l.current&&S.key==="Escape"&&o.close(!0)};if(o.isOpen)return document.addEventListener("keydown",f,!0),()=>{document.removeEventListener("keydown",f,!0)}},[l,o]);let $=()=>{i!=="focus"&&(K()==="pointer"?t.current=!0:t.current=!1,a())},b=()=>{i!=="focus"&&(r.current=!1,t.current=!1,p())},s=()=>{r.current=!1,t.current=!1,p(!0)},g=()=>{z()&&(r.current=!0,a())},O=()=>{r.current=!1,t.current=!1,p(!0)},{hoverProps:T}=I({isDisabled:e,onHoverStart:$,onHoverEnd:b}),{pressProps:P}=M({onPressStart:s}),{focusableProps:h}=q({isDisabled:e,onFocus:g,onBlur:O},l);return{triggerProps:{"aria-describedby":o.isOpen?n:void 0,...k(h,T,P)},tooltipProps:{id:n}}}const te=1500,D=500;let v={},oe=0,R=!1,m=null,x=null;function re(c={}){let{delay:o=te}=c,{isOpen:l,open:e,close:i}=Q(c),n=u.exports.useMemo(()=>`${++oe}`,[]),t=u.exports.useRef(),r=()=>{v[n]=$},a=()=>{for(let s in v)s!==n&&(v[s](!0),delete v[s])},p=()=>{clearTimeout(t.current),t.current=null,a(),r(),R=!0,e(),m&&(clearTimeout(m),m=null),x&&(clearTimeout(x),x=null)},$=s=>{s?(clearTimeout(t.current),t.current=null,i()):t.current||(t.current=setTimeout(()=>{t.current=null,i()},D)),m&&(clearTimeout(m),m=null),R&&(x&&clearTimeout(x),x=setTimeout(()=>{delete v[n],x=null,R=!1},D))},b=()=>{a(),r(),!l&&!m&&!R?m=setTimeout(()=>{m=null,R=!0,p()},o):l||p()};return u.exports.useEffect(()=>()=>{clearTimeout(t.current),v[n]&&delete v[n]},[n]),{isOpen:l,open:s=>{!s&&o>0&&!t.current?b():p()},close:$}}const _=L.createContext({}),d="8px",le={borderLeft:`${d} solid transparent`,borderRight:`${d} solid transparent`,borderTop:`${d} solid currentColor`},ie={borderTop:`${d} solid transparent`,borderBottom:`${d} solid transparent`,borderRight:`${d} solid currentColor`},ne={borderLeft:`${d} solid transparent`,borderRight:`${d} solid transparent`,borderBottom:`${d} solid currentColor`},se={borderTop:`${d} solid transparent`,borderBottom:`${d} solid transparent`,borderLeft:`${d} solid currentColor`},ce=A("span",{$$padding:"$space$4","&:before":{content:"''",display:"block",width:"0",height:"0",position:"absolute",color:"$cdgBlue"},variants:{arrowPosition:{top:{"&:before":{top:"calc(($$padding * -1/2))",...ne}},right:{"&:before":{right:"calc(($$padding * -1/2))",...se}},left:{"&:before":{left:"calc(($$padding * -1/2))",...ie}},bottom:{"&:before":{bottom:"calc(($$padding * -1/2))",...le}}}}}),ae=A("div",{$$themeColor:"$cdgBlue",position:"absolute",padding:"$4",maxWidth:"$96",background:"$cdgBlue",lineHeight:"$normal",borderRadius:"$md",boxShadow:"0px 0.3px 0.9px rgba(0, 0, 0, 0.1), 0px 1.6px 3.6px rgba(0, 0, 0, 0.13)",color:"$whiteText","& .tooltip-header":{display:"flex",alignItems:"flex-start",marginBottom:"$4"},"& .tooltip-title":{fontSize:"$5",lineHeight:"$loose",margin:0,marginRight:"$4"},"& .tootip-close-button":{marginLeft:"auto",background:"none",color:"inherit",border:"none",padding:"0",cursor:"pointer",outline:"inherit"},"& .tooltip-close-icon":{width:"$4",height:"$4"}}),de={top:"bottom",right:"left",bottom:"top",left:"right",center:"top"},B=8,pe=L.forwardRef((c,o)=>{let{ref:l,arrowProps:e,state:i,style:n,placement:t}=u.exports.useContext(_);const{css:r={},title:a,children:p,dismissible:$=!1,...b}=c,{tooltipProps:s}=Z(b,i);u.exports.useImperativeHandle(o,()=>l.current);const O={arrowPosition:de[t||"top"]},T=()=>{var f,S,E,C;const h={"&:before":{color:r.backgroundColor||r.background,left:((f=e==null?void 0:e.style)==null?void 0:f.left)!==void 0?+((S=e==null?void 0:e.style)==null?void 0:S.left)-B:void 0,top:((E=e==null?void 0:e.style)==null?void 0:E.top)!==void 0?+((C=e==null?void 0:e.style)==null?void 0:C.top)-B:void 0}};return h["&:before"].color||delete h["&:before"].color,h};return w(ae,{ref:l,css:r,style:n,...s,children:[(a||$)&&w("div",{className:"tooltip-header",children:[a&&(()=>typeof a=="string"?y("h2",{className:"tooltip-title",children:a}):y("div",{className:"tooltip-title",children:a}))(),$&&y("button",{className:"tootip-close-button",onClick:()=>i==null?void 0:i.close(!0),children:y(G,{icon:W,className:"tooltip-close-icon"})})]}),p,y(ce,{...O,css:T()})]})}),fe=pe,ue=A("button",{display:"inline-block",background:"none",color:"inherit",border:"none",padding:"0",cursor:"pointer",outline:"inherit"}),$e=16,F=0,H=16,be=L.forwardRef((c,o)=>{const{css:l={},children:e,open:i,onOpenChange:n,offset:t=$e,placement:r="bottom",defaultOpen:a=!1,shouldFlip:p=!0,...$}=c;let{crossOffset:b=F}=c;const s={delay:0,...c};r==="right bottom"||r==="left bottom"?b=F+H:(r==="right top"||r==="left top")&&(b=F-H);const g=re(s);u.exports.useEffect(()=>{!n||n(g.isOpen)},[g.isOpen]);const O=i!=null?i:g.isOpen,T=X(o),{triggerProps:P,tooltipProps:h}=ee(c,g,T),f=u.exports.useRef(null),[S,E]=L.Children.toArray(e),{overlayProps:C,arrowProps:N,placement:U}=J({placement:r,targetRef:T,overlayRef:f,offset:t,crossOffset:b,isOpen:O,shouldFlip:p});return w(Y,{children:[y(ue,{css:l,ref:T,...P,...$,children:S}),y(_.Provider,{value:{state:g,arrowProps:N,ref:f,style:C.style,placement:U,...h},children:(O||a)&&E})]})}),me=be;fe.displayName="Tooltip";me.displayName="TooltipTrigger";export{me as T,fe as a};
