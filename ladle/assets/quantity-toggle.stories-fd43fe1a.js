import{s as B,R as s,a as m,j as n,r as z}from"./index-dd2db41e.js";import{C as L}from"./components-4f09e739.js";import{u as H}from"./use-dom-ref-a9d7b247.js";const K=B("div",{width:"100%",display:"flex",flexDirection:"column","div[role='group']":{display:"flex",width:"100%",input:{flex:1,color:"#323130",padding:"$3 $4",textAlign:"center",border:"1px solid #EDEBE9",borderRadius:"0",backgroundColor:"$white",fontSize:"$label1",fontWeight:"$semibold"},"input::placeholder":{color:"$gray40"},button:{color:"#323130",aspectRatio:"1",width:"$14",cursor:"pointer",fontWeight:"$bold",border:"1px solid #EDEBE9",backgroundColor:"$gray10"}},label:{fontSize:"$label1",fontWeight:"$medium",lineHeight:"$normal",display:"block",marginBottom:"$1",color:"$gray90",span:{marginLeft:"$1",color:"$danger"}},variants:{isDisabled:{true:{"div[role='group']":{input:{backgroundColor:"#EDEBE9"},button:{borderColor:"#EDEBE9",cursor:"not-allowed"}}}},isErrored:{true:{"div[role='group']":{input:{borderColor:"$danger"},button:{borderColor:"$danger"}}}}}}),P=B("div",{fontSize:"$label2",fontWeight:"$medium",transition:"$default",marginTop:"$1",color:"$gray70",variants:{error:{true:{color:"$danger"}}}}),U=s.forwardRef((a,p)=>{const{css:c={},value:g,step:f=1,max:$=999999999999999,min:y=-999999999999999,formatOptions:o={},placeholder:V,onChange:S,isErrored:T,isDisabled:h}=a,x=s.useMemo(()=>({prefix:(o==null?void 0:o.prefix)??"",subfix:(o==null?void 0:o.subfix)??"",toFixed:o==null?void 0:o.toFixed}),[o]),C=H(p),[E,u]=s.useState((g==null?void 0:g.toString().length)??1),[w,N]=s.useState(g??0),[l,d]=s.useState(g??0),[A,D]=s.useState((o==null?void 0:o.prefix)??""),[Q,F]=s.useState((o==null?void 0:o.subfix)??""),R=()=>{function r(e){if(e.toString().includes(".")){const t=Number.parseFloat(e.toString())+f;e=Math.min(Number.parseFloat(t.toFixed(15)),$)}else e=Math.min(Number(e)+f,$);return e}Number.isNaN(l)||(d(e=>r(e)),N(e=>r(e)))},M=()=>{function r(e){if(e.toString().includes(".")){const t=Number.parseFloat(e.toString())-f;e=Math.max(Number.parseFloat(t.toFixed(15)),y)}else e=Math.max(Number(e)-f,y);return e}Number.isNaN(l)||(d(e=>r(e)),N(e=>r(e)))},W=r=>{r.preventDefault();const e=r.target,t=e.selectionStart??e.value.length;r.key==="ArrowLeft"&&u(Math.max(t-1,0)),r.key==="ArrowRight"&&u(Math.min(t+1,e.value.length)),r.key==="ArrowUp"&&R(),r.key==="ArrowDown"&&M(),r.key==="Backspace"&&(d(i=>(i.toString().length===1?i="":i=`${l}`.slice(0,Math.max(t-1,0))+`${l}`.slice(t),i)),u(t===1?1:t-1)),r.key==="-"&&!l.toString().includes("-")&&(t===0||l===0)&&(d(i=>l===0?"-":`-${i}`),u(t+1)),r.key==="."&&!l.toString().includes(".")&&(d(i=>`${i.toString().slice(0,t)}.${i.toString().slice(t)}`),u(t+1)),Number.isInteger(+r.key)&&(d(i=>{const k=`${i.toString().slice(0,t)}${r.key}${i.toString().slice(t)}`;return Number(k)<=$&&Number(k)>=y&&(i=i?k:r.key),i}),u(t+1))},j=()=>{l!==""&&(D(""),F(""),d(w))},q=()=>{l!==""&&(D(x.prefix),F(x.subfix),x.toFixed&&(N(l),d(r=>Number(r).toFixed(x.toFixed))))};return s.useEffect(()=>{S==null||S(Number(w))},[w]),s.useEffect(()=>{var r;(r=C.current)==null||r.setSelectionRange(E,E)},[E,l]),m(K,{css:c,isErrored:!!T,isDisabled:!!h,children:[a.label&&m("label",{children:[a.label,a.isRequired&&n("span",{children:"*"})]}),m("div",{role:"group",children:[n("button",{disabled:h,onClick:M,style:{borderRight:"none",borderRadius:"4px 0 0 4px"},children:"-"}),n("input",{disabled:h,type:"text",value:l!==""?`${A}${l}${Q}`:"",onKeyDown:W,onFocus:j,onBlur:q,placeholder:V,ref:C}),n("button",{disabled:h,onClick:R,style:{borderLeft:"none",borderRadius:"0 4px 4px 0"},children:"+"})]}),T&&a.errorMessage&&n(P,{error:!0,children:a.errorMessage}),a.helperText?n(P,{children:a.helperText}):null]})}),b=U;b.displayName="QuantityToggle";const X=()=>{const[a,p]=z.useState(0);return m(L,{children:[n("h3",{children:"Controlled"}),n(b,{label:"Potato price",placeholder:"Price",onChange:c=>console.log(c),formatOptions:{prefix:"$",toFixed:2}}),n("h3",{children:"Un Controlled"}),n(b,{label:"Potato price",isRequired:!0,placeholder:"Price",value:a,onChange:c=>p(c),formatOptions:{prefix:"$"}}),n("h3",{children:"Disabled"}),n(b,{label:"Potato price",defaultValue:2,isDisabled:!0,helperText:"This is helper text"}),n("h3",{children:"Errored"}),n(b,{label:"Potato price",defaultValue:2,isErrored:!0,helperText:"This is helper text",errorMessage:"This is error message"})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{X as Variants};
