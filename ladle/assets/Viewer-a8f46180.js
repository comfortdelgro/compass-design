import{j as a}from"./jsx-runtime-ea7736fc.js";import{r as l}from"./index-6c164b11.js";import{n as ce}from"./noop-4f713d1a.js";import"./index-7972436d.js";import{C as je}from"./objectToCSS-aff350d4.js";import{S as Ne}from"./index-d488ea9b.js";import{B as de}from"./button-be34d763.js";var u=(e=>(e[e.zoomIn=1]="zoomIn",e[e.zoomOut=2]="zoomOut",e[e.prev=3]="prev",e[e.next=4]="next",e[e.rotateLeft=5]="rotateLeft",e[e.rotateRight=6]="rotateRight",e[e.reset=7]="reset",e[e.close=8]="close",e[e.scaleX=9]="scaleX",e[e.scaleY=10]="scaleY",e))(u||{});const Fe="_imageViewerWrap_vi0my_2",Me="_toolbarWrap_vi0my_17",Le="_imageInformationWrap_vi0my_30",Ve="_toolbar_vi0my_17",De="_navbar_vi0my_53",Ee="_navbarItem_vi0my_65",He="_navbarItemActive_vi0my_84",C={imageViewerWrap:Fe,toolbarWrap:Me,imageInformationWrap:Le,toolbar:Ve,navbar:De,navbarItem:Ee,navbarItemActive:He};function me(e){return a.jsx("div",{className:C.imageInformationWrap,children:a.jsxs("p",{style:{textAlign:"center"},children:[e.alt&&`${e.alt} `,`(${e.width} x ${e.height}) `,a.jsx("b",{children:`${e.activeIndex+1} ${e.totalName} ${e.count}`})]})})}me.__docgenInfo={description:"",methods:[],displayName:"ImageInformation",props:{onAction:{required:!0,tsType:{name:"signature",type:"function",raw:"(config: ToolbarConfig) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  key: string
  actionType: ActionTypeEnum
  icon?: React.ReactNode
  render?: React.ReactNode
  onClick?: (activeImage: ImageDecorator) => void
}`,signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"actionType",value:{name:"ActionTypeEnum",required:!0}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"render",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"onClick",value:{name:"signature",type:"function",raw:"(activeImage: ImageDecorator) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}},name:"activeImage"}],return:{name:"void"}},required:!1}}]}},name:"config"}],return:{name:"void"}}},description:""},alt:{required:!0,tsType:{name:"string"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},activeIndex:{required:!0,tsType:{name:"number"},description:""},count:{required:!0,tsType:{name:"number"},description:""},totalName:{required:!0,tsType:{name:"string"},description:""}}};function ge(e){const o=l.useRef(!1),y=l.useRef({x:0,y:0}),[i,c]=l.useState({x:0,y:0});l.useEffect(()=>()=>{M(!0),F(!0)},[]),l.useEffect(()=>(F(),()=>{F(!0)})),l.useEffect(()=>(e.visible&&e.drag&&M(),!e.visible&&e.drag&&Y(),()=>{M(!0)}),[e.drag,e.visible,e.width,e.height]),l.useEffect(()=>{const d=i.x-y.current.x,w=i.y-y.current.y;y.current={x:i.x,y:i.y},e.onChangeImgState(e.width,e.height,e.top+w,e.left+d)},[i]);const _=()=>{e.onResize()},O=d=>{e.onCanvasMouseDown(d),X(d)},X=d=>{d.button===0&&(!e.visible||!e.drag||(d.preventDefault(),d.stopPropagation(),o.current=!0,y.current={x:d.nativeEvent.clientX,y:d.nativeEvent.clientY}))},K=d=>{o.current&&c({x:d.clientX,y:d.clientY})},Y=()=>{o.current=!1,_()},F=d=>{let w="addEventListener";d&&(w="removeEventListener"),window[w]("resize",_,!1)},M=d=>{let w="addEventListener";d&&(w="removeEventListener"),document[w]("click",Y,!1),document[w]("mousemove",K,!1)},L={width:`${e.width}px`,height:`${e.height}px`,transform:`translateX(${e.left!==null?`${e.left}px`:"auto"}) translateY(${e.top}px)
    rotate(${e.rotate}deg) scaleX(${e.scaleX}) scaleY(${e.scaleY})`};let V=null;return e.imgSrc!==""&&(V=a.jsx("img",{src:e.imgSrc,style:L,onMouseDown:X})),e.loading&&(V=a.jsx("div",{style:{display:"flex",height:`${window.innerHeight-84}px`,justifyContent:"center",alignItems:"center"},children:a.jsx(Ne,{size:"2xl"})})),a.jsx("div",{onMouseDown:O,style:{zIndex:e.zIndex},children:V})}ge.__docgenInfo={description:"",methods:[],displayName:"ViewerCanvas",props:{imgSrc:{required:!0,tsType:{name:"string"},description:""},visible:{required:!0,tsType:{name:"boolean"},description:""},width:{required:!0,tsType:{name:"number"},description:""},height:{required:!0,tsType:{name:"number"},description:""},top:{required:!0,tsType:{name:"number"},description:""},left:{required:!0,tsType:{name:"number"},description:""},rotate:{required:!0,tsType:{name:"number"},description:""},onChangeImgState:{required:!0,tsType:{name:"signature",type:"function",raw:`(
  width: number,
  height: number,
  top: number,
  left: number,
) => void`,signature:{arguments:[{type:{name:"number"},name:"width"},{type:{name:"number"},name:"height"},{type:{name:"number"},name:"top"},{type:{name:"number"},name:"left"}],return:{name:"void"}}},description:""},onResize:{required:!0,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},zIndex:{required:!0,tsType:{name:"number"},description:""},scaleX:{required:!0,tsType:{name:"number"},description:""},scaleY:{required:!0,tsType:{name:"number"},description:""},loading:{required:!0,tsType:{name:"boolean"},description:""},drag:{required:!0,tsType:{name:"boolean"},description:""},container:{required:!0,tsType:{name:"HTMLElement"},description:""},onCanvasMouseDown:{required:!0,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:""}}};function fe(e){const{activeIndex:o=0}=e,y=l.useCallback(i=>{o!==i&&e.onChangeImg(i)},[o,e]);return a.jsx("div",{className:C.navbar,children:e.images.map((i,c)=>a.jsx("div",{className:C.navbarItem,onClick:()=>{y(c)},children:a.jsx("img",{className:c===o?C.navbarItemActive:"",src:(i==null?void 0:i.srcPreview)??i.src,alt:i.alt})},c))})}fe.__docgenInfo={description:"",methods:[],displayName:"ViewerNav",props:{images:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}}],raw:"ImageDecorator[]"},description:""},activeIndex:{required:!0,tsType:{name:"number"},description:""},onChangeImg:{required:!0,tsType:{name:"signature",type:"function",raw:"(index: number) => void",signature:{arguments:[{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""}}};const _e=[{key:"zoomIn",actionType:u.zoomIn,icon:a.jsx("svg",{width:18,viewBox:"0 0 512 512",color:"#FFFFFF",children:a.jsx("path",{fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM184 296c0 13.3 10.7 24 24 24s24-10.7 24-24V232h64c13.3 0 24-10.7 24-24s-10.7-24-24-24H232V120c0-13.3-10.7-24-24-24s-24 10.7-24 24v64H120c-13.3 0-24 10.7-24 24s10.7 24 24 24h64v64z"})})},{key:"reset",actionType:u.reset,icon:a.jsx("svg",{width:18,viewBox:"0 0 512 512",color:"#FFFFFF",children:a.jsx("path",{fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM208 352a144 144 0 1 0 0-288 144 144 0 1 0 0 288z"})})},{key:"zoomOut",actionType:u.zoomOut,icon:a.jsx("svg",{width:18,viewBox:"0 0 512 512",color:"#FFFFFF",children:a.jsx("path",{fill:"currentColor",d:"M416 208c0 45.9-14.9 88.3-40 122.7L502.6 457.4c12.5 12.5 12.5 32.8 0 45.3s-32.8 12.5-45.3 0L330.7 376c-34.4 25.2-76.8 40-122.7 40C93.1 416 0 322.9 0 208S93.1 0 208 0S416 93.1 416 208zM136 184c-13.3 0-24 10.7-24 24s10.7 24 24 24H280c13.3 0 24-10.7 24-24s-10.7-24-24-24H136z"})})},{key:"prev",actionType:u.prev,icon:a.jsx("svg",{width:18,viewBox:"0 0 512 512",color:"#FFFFFF",children:a.jsx("path",{fill:"currentColor",d:"M459.5 440.6c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29V96c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4L288 214.3V256v41.7L459.5 440.6zM256 352V256 128 96c0-12.4-7.2-23.7-18.4-29s-24.5-3.6-34.1 4.4l-192 160C4.2 237.5 0 246.5 0 256s4.2 18.5 11.5 24.6l192 160c9.5 7.9 22.8 9.7 34.1 4.4s18.4-16.6 18.4-29V352z"})})},{key:"next",actionType:u.next,icon:a.jsx("svg",{width:18,viewBox:"0 0 512 512",color:"#FFFFFF",children:a.jsx("path",{fill:"currentColor",d:"M52.5 440.6c-9.5 7.9-22.8 9.7-34.1 4.4S0 428.4 0 416V96C0 83.6 7.2 72.3 18.4 67s24.5-3.6 34.1 4.4L224 214.3V256v41.7L52.5 440.6zM256 352V256 128 96c0-12.4 7.2-23.7 18.4-29s24.5-3.6 34.1 4.4l192 160c7.3 6.1 11.5 15.1 11.5 24.6s-4.2 18.5-11.5 24.6l-192 160c-9.5 7.9-22.8 9.7-34.1 4.4s-18.4-16.6-18.4-29V352z"})})},{key:"rotateLeft",actionType:u.rotateLeft,icon:a.jsx("svg",{width:18,viewBox:"0 0 512 512",color:"#FFFFFF",children:a.jsx("path",{fill:"currentColor",d:"M48.5 224H40c-13.3 0-24-10.7-24-24V72c0-9.7 5.8-18.5 14.8-22.2s19.3-1.7 26.2 5.2L98.6 96.6c87.6-86.5 228.7-86.2 315.8 1c87.5 87.5 87.5 229.3 0 316.8s-229.3 87.5-316.8 0c-12.5-12.5-12.5-32.8 0-45.3s32.8-12.5 45.3 0c62.5 62.5 163.8 62.5 226.3 0s62.5-163.8 0-226.3c-62.2-62.2-162.7-62.5-225.3-1L185 183c6.9 6.9 8.9 17.2 5.2 26.2s-12.5 14.8-22.2 14.8H48.5z"})})},{key:"rotateRight",actionType:u.rotateRight,icon:a.jsx("svg",{width:18,viewBox:"0 0 512 512",color:"#FFFFFF",children:a.jsx("path",{fill:"currentColor",d:"M463.5 224H472c13.3 0 24-10.7 24-24V72c0-9.7-5.8-18.5-14.8-22.2s-19.3-1.7-26.2 5.2L413.4 96.6c-87.6-86.5-228.7-86.2-315.8 1c-87.5 87.5-87.5 229.3 0 316.8s229.3 87.5 316.8 0c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0c-62.5 62.5-163.8 62.5-226.3 0s-62.5-163.8 0-226.3c62.2-62.2 162.7-62.5 225.3-1L327 183c-6.9 6.9-8.9 17.2-5.2 26.2s12.5 14.8 22.2 14.8H463.5z"})})},{key:"scaleX",actionType:u.scaleX,icon:a.jsx("svg",{width:18,viewBox:"0 0 512 512",color:"#FFFFFF",children:a.jsx("path",{fill:"currentColor",d:"M504.3 273.6c4.9-4.5 7.7-10.9 7.7-17.6s-2.8-13-7.7-17.6l-112-104c-7-6.5-17.2-8.2-25.9-4.4s-14.4 12.5-14.4 22l0 56-192 0 0-56c0-9.5-5.7-18.2-14.4-22s-18.9-2.1-25.9 4.4l-112 104C2.8 243 0 249.3 0 256s2.8 13 7.7 17.6l112 104c7 6.5 17.2 8.2 25.9 4.4s14.4-12.5 14.4-22l0-56 192 0 0 56c0 9.5 5.7 18.2 14.4 22s18.9 2.1 25.9-4.4l112-104z"})})},{key:"scaleY",actionType:u.scaleY,icon:a.jsx("svg",{width:18,viewBox:"0 0 512 512",color:"#FFFFFF",children:a.jsx("path",{fill:"currentColor",d:"M145.6 7.7C141 2.8 134.7 0 128 0s-13 2.8-17.6 7.7l-104 112c-6.5 7-8.2 17.2-4.4 25.9S14.5 160 24 160H80V352H24c-9.5 0-18.2 5.7-22 14.4s-2.1 18.9 4.4 25.9l104 112c4.5 4.9 10.9 7.7 17.6 7.7s13-2.8 17.6-7.7l104-112c6.5-7 8.2-17.2 4.4-25.9s-12.5-14.4-22-14.4H176V160h56c9.5 0 18.2-5.7 22-14.4s2.1-18.9-4.4-25.9l-104-112z"})})}];function $(e,o){return e.filter(i=>o.indexOf(i.key)<0)}function ye(e){const o=l.useCallback(c=>{e.onAction(c)},[e]);function y(c){return a.jsx(de,{variant:"ghost",onClick:()=>{o(c)},"data-key":c.key,css:{"&:hover":{background:"$cdgBlue100 !important"}},children:c.icon?a.jsx(a.Fragment,{children:c.icon}):a.jsx(a.Fragment,{children:c.key})},c.key)}let i=e.toolbars;return e.zoomable||(i=$(i,["zoomIn","zoomOut","reset"])),e.changeable||(i=$(i,["prev","next"])),e.rotatable||(i=$(i,["rotateLeft","rotateRight"])),e.scalable||(i=$(i,["scaleX","scaleY"])),a.jsx("div",{className:C.toolbarWrap,children:a.jsx("div",{className:C.toolbar,children:i.map(c=>y(c))})})}ye.__docgenInfo={description:"",methods:[],displayName:"ViewerToolbar",props:{onAction:{required:!0,tsType:{name:"signature",type:"function",raw:"(config: ToolbarConfig) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  key: string
  actionType: ActionTypeEnum
  icon?: React.ReactNode
  render?: React.ReactNode
  onClick?: (activeImage: ImageDecorator) => void
}`,signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"actionType",value:{name:"ActionTypeEnum",required:!0}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"render",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"onClick",value:{name:"signature",type:"function",raw:"(activeImage: ImageDecorator) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}},name:"activeImage"}],return:{name:"void"}},required:!1}}]}},name:"config"}],return:{name:"void"}}},description:""},zoomable:{required:!0,tsType:{name:"boolean"},description:""},rotatable:{required:!0,tsType:{name:"boolean"},description:""},scalable:{required:!0,tsType:{name:"boolean"},description:""},changeable:{required:!0,tsType:{name:"boolean"},description:""},toolbars:{required:!0,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  key: string
  actionType: ActionTypeEnum
  icon?: React.ReactNode
  render?: React.ReactNode
  onClick?: (activeImage: ImageDecorator) => void
}`,signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"actionType",value:{name:"ActionTypeEnum",required:!0}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"render",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"onClick",value:{name:"signature",type:"function",raw:"(activeImage: ImageDecorator) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}},name:"activeImage"}],return:{name:"void"}},required:!1}}]}}],raw:"ToolbarConfig[]"},description:""}}};const Xe=84,B=55;var g=(e=>(e.setVisible="setVisible",e.setActiveIndex="setActiveIndex",e.update="update",e.clear="clear",e))(g||{});function h(e,o){return{type:e,payload:o||{}}}const ve=e=>{var oe;const{visible:o=!1,onClose:y=ce,images:i=[],activeIndex:c=0,drag:_=!0,zoomable:O=!0,rotatable:X=!0,scalable:K=!0,onMaskClick:Y=ce,changeable:F=!0,customToolbar:M=t=>t,zoomSpeed:L=.05,disableKeyboardSupport:V=!1,noResetZoomAfterChange:d=!1,noLimitInitializationSize:w=!1,defaultScale:j=1,loop:he=!0,disableMouseZoom:pe=!1,isShowImageInformation:be=!0,isShowToolbar:we=!0,isShowPreview:qe=!0,totalName:ke="of",minScale:P=.1}=e,A=Xe,Ie={index:0,visible:!1,activeIndex:e.activeIndex??0,width:0,height:0,top:15,left:0,rotate:0,imageWidth:0,imageHeight:0,scaleX:j,scaleY:j,loading:!1,loadFailed:!1,startLoading:!1},Z=l.useCallback(()=>{let t=window.innerWidth,s=window.innerHeight;return e.container&&(t=e.container.offsetWidth,s=e.container.offsetHeight),{width:t,height:s}},[e.container]),p=l.useRef(Z());function Te(t,s){switch(s.type){case g.setVisible:return{...t,visible:!!s.payload.visible};case g.setActiveIndex:return{...t,activeIndex:Number(s.payload.index),startLoading:!0};case g.update:return{...t,...s.payload};case g.clear:return{...t,width:0,height:0,scaleX:j,scaleY:j,rotate:1,imageWidth:0,imageHeight:0,loadFailed:!1,top:0,left:0,loading:!1}}return t}const D=l.useRef(null),E=l.useRef(!1),te=l.useRef(0),[r,v]=l.useReducer(Te,Ie);l.useEffect(()=>(E.current=!0,()=>{E.current=!1}),[]),l.useEffect(()=>{p.current=Z()},[e.container]),l.useEffect(()=>{o&&E.current&&v(h(g.setVisible,{visible:!0}))},[o]),l.useEffect(()=>(V||document.addEventListener("keydown",ie,!0),D.current&&D.current.addEventListener("wheel",se,!1),()=>{document.removeEventListener("keydown",ie,!0),D.current&&D.current.removeEventListener("wheel",se,!1)})),l.useEffect(()=>{o&&v(h(g.setActiveIndex,{index:c}))},[c,o,i]);const G=(t,s=!1)=>{v(h(g.update,{loading:!0,loadFailed:!1}));let n={src:"",alt:""};i.length>0&&(n=i[t]);let m=!1;const f=new Image;f.onload=()=>{E.current&&(m||b(f.width,f.height,!0))},f.onerror=()=>{if(E.current)if(e.defaultImg){v(h(g.update,{loading:!1,loadFailed:!0,startLoading:!1}));const N=e.defaultImg.width||p.current.width*.5,x=e.defaultImg.height||p.current.height*.5;b(N,x,!1)}else v(h(g.update,{loading:!1,loadFailed:!1,startLoading:!1}))},f.src=n.src,f.complete&&(m=!0,b(f.width,f.height,!0));function b(N,x,H){if(t!==te.current)return;let z=N,S=x;e.defaultSize&&(z=e.defaultSize.width,S=e.defaultSize.height),n.defaultSize&&(z=n.defaultSize.width,S=n.defaultSize.height);const[q,k]=re(z,S),I=(p.current.width-q)/2,T=(p.current.height-k-A)/2;let ue=j,le=j;d&&!s&&(ue=r.scaleX,le=r.scaleY),v(h(g.update,{width:q,height:k,left:I,top:T,imageWidth:N,imageHeight:x,loading:!1,rotate:0,scaleX:ue,scaleY:le,loadFailed:!H,startLoading:!1}))}};l.useEffect(()=>{r.startLoading&&(te.current=r.activeIndex,G(r.activeIndex))},[r.startLoading,r.activeIndex]);const re=(t,s)=>{let n=0,m=0;const f=p.current.width*.8,b=(p.current.height-A)*.8;return n=Math.min(f,t),m=n/t*s,m>b&&(m=b,n=m/s*t),w&&(n=t,m=s),[n,m]},U=t=>{if(!(!he&&(t>=i.length||t<0))&&(t>=i.length&&(t=0),t<0&&(t=i.length-1),t!==r.activeIndex)){if(e.onChange){const s=J(t);e.onChange(s,t)}v(h(g.setActiveIndex,{index:t}))}},J=t=>{let s={src:"",alt:""},n=null;return t!==void 0?n=t:n=r.activeIndex,i.length>0&&n>=0&&(s=i[n]),s},xe=t=>{v(h(g.update,{scaleX:r.scaleX*t}))},Re=t=>{v(h(g.update,{scaleY:r.scaleY*t}))},ae=(t=!1)=>{v(h(g.update,{rotate:r.rotate+90*(t?1:-1)}))},R=t=>{switch(t){case u.prev:U(r.activeIndex-1);break;case u.next:U(r.activeIndex+1);break;case u.zoomIn:const s=Q();ee(s.x,s.y,1,L);break;case u.zoomOut:const n=Q();ee(n.x,n.y,-1,L);break;case u.rotateLeft:ae();break;case u.rotateRight:ae(!0);break;case u.reset:G(r.activeIndex,!0);break;case u.scaleX:xe(-1);break;case u.scaleY:Re(-1);break}},ne=t=>{if(R(t.actionType),t.onClick){const s=J();t.onClick(s)}},ze=(t,s,n,m)=>{v(h(g.update,{width:t,height:s,top:n,left:m}))},Se=()=>{if(p.current=Z(),o){const t=(p.current.width-r.width)/2,s=(p.current.height-r.height-A)/2;v(h(g.update,{left:t,top:s}))}},Ce=t=>{Y(t)},ie=t=>{const s=t.keyCode||t.which||t.charCode;let n=!1;switch(s){case 27:y(),n=!0;break;case 37:t.ctrlKey?R(u.rotateLeft):R(u.prev),n=!0;break;case 39:t.ctrlKey?R(u.rotateRight):R(u.next),n=!0;break;case 38:R(u.zoomIn),n=!0;break;case 40:R(u.zoomOut),n=!0;break;case 49:t.ctrlKey&&(G(r.activeIndex),n=!0);break}n&&(t.preventDefault(),t.stopPropagation())},se=t=>{if(pe||r.loading)return;t.preventDefault();let s=0;const n=t.deltaY;if(n===0?s=0:s=n>0?-1:1,s!==0){let m=t.clientX,f=t.clientY;if(e.container){const b=e.container.getBoundingClientRect();m-=b.left,f-=b.top}ee(m,f,s,L)}},Q=()=>({x:r.left+r.width/2,y:r.top+r.height/2}),ee=(t,s,n,m)=>{const f=Q(),b=t-f.x,N=s-f.y;let x=0,H=0,z=0,S=0,q=0,k=0;if(r.width===0){const[I,T]=re(r.imageWidth,r.imageHeight);H=(p.current.width-I)/2,x=(p.current.height-A-T)/2,z=r.width+I,S=r.height+T,q=k=1}else{const I=r.scaleX>0?1:-1,T=r.scaleY>0?1:-1;q=r.scaleX+m*n*I,k=r.scaleY+m*n*T,typeof e.maxScale<"u"&&(Math.abs(q)>e.maxScale&&(q=e.maxScale*I),Math.abs(k)>e.maxScale&&(k=e.maxScale*T)),Math.abs(q)<P&&(q=P*I),Math.abs(k)<P&&(k=P*T),x=r.top+-n*N/r.scaleX*m*I,H=r.left+-n*b/r.scaleY*m*T,z=r.width,S=r.height}v(h(g.update,{width:z,scaleX:q,scaleY:k,height:S,top:x,left:H,loading:!1}))};let W={src:"",alt:""};return o&&r.visible&&!r.loading&&r.activeIndex!==null&&!r.startLoading&&(W=J()),a.jsx(je,{children:o&&a.jsxs("div",{className:C.imageViewerWrap,children:[e.noClose||a.jsx(de,{variant:"primary",style:{right:15,top:10,width:32,display:"flex",alignItems:"center",justifyContent:"center",padding:"5px",borderRadius:16,position:"absolute",zIndex:B+5},onClick:y,children:a.jsx("svg",{viewBox:"0 0 384 512",height:"14",color:"white",children:a.jsx("path",{fill:"currentColor",d:"M342.6 150.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0L192 210.7 86.6 105.4c-12.5-12.5-32.8-12.5-45.3 0s-12.5 32.8 0 45.3L146.7 256 41.4 361.4c-12.5 12.5-12.5 32.8 0 45.3s32.8 12.5 45.3 0L192 301.3 297.4 406.6c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L237.3 256 342.6 150.6z"})})}),a.jsxs("div",{onTransitionEnd:()=>{o||v(h(g.setVisible,{visible:!1}))},ref:D,children:[a.jsx("div",{style:{zIndex:B}}),a.jsx(ge,{imgSrc:r.loadFailed&&((oe=e==null?void 0:e.defaultImg)==null?void 0:oe.src)||W.src,visible:o,width:r.width,height:r.height,top:r.top,left:r.left,rotate:r.rotate,onChangeImgState:ze,onResize:Se,zIndex:B+5,scaleX:r.scaleX,scaleY:r.scaleY,loading:r.loading,drag:_,container:e.container,onCanvasMouseDown:Ce}),a.jsxs("div",{style:{zIndex:B+5},children:[we&&a.jsx(ye,{onAction:ne,zoomable:O,rotatable:X,scalable:K,changeable:F,toolbars:M(_e)}),be&&a.jsx(me,{onAction:ne,alt:W.alt??"",width:r.imageWidth,height:r.imageHeight,activeIndex:r.activeIndex,count:i.length,totalName:ke}),qe&&a.jsx(fe,{images:e.images,activeIndex:r.activeIndex,onChangeImg:U})]})]})]})})};ve.__docgenInfo={description:"",methods:[],displayName:"ViewCore",props:{index:{required:!1,tsType:{name:"number"},description:""},visible:{required:!1,tsType:{name:"boolean"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},images:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}}],raw:"ImageDecorator[]"},description:""},activeIndex:{required:!1,tsType:{name:"number"},description:""},container:{required:!1,tsType:{name:"HTMLElement"},description:""},drag:{required:!1,tsType:{name:"boolean"},description:""},zoomable:{required:!1,tsType:{name:"boolean"},description:""},rotatable:{required:!1,tsType:{name:"boolean"},description:""},scalable:{required:!1,tsType:{name:"boolean"},description:""},onMaskClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:""},loop:{required:!1,tsType:{name:"boolean"},description:""},noClose:{required:!1,tsType:{name:"boolean"},description:""},isShowImageInformation:{required:!1,tsType:{name:"boolean"},description:""},isShowPreview:{required:!1,tsType:{name:"boolean"},description:""},isShowToolbar:{required:!1,tsType:{name:"boolean"},description:""},changeable:{required:!1,tsType:{name:"boolean"},description:""},customToolbar:{required:!1,tsType:{name:"signature",type:"function",raw:"(toolbars: ToolbarConfig[]) => ToolbarConfig[]",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  key: string
  actionType: ActionTypeEnum
  icon?: React.ReactNode
  render?: React.ReactNode
  onClick?: (activeImage: ImageDecorator) => void
}`,signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"actionType",value:{name:"ActionTypeEnum",required:!0}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"render",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"onClick",value:{name:"signature",type:"function",raw:"(activeImage: ImageDecorator) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}},name:"activeImage"}],return:{name:"void"}},required:!1}}]}}],raw:"ToolbarConfig[]"},name:"toolbars"}],return:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  key: string
  actionType: ActionTypeEnum
  icon?: React.ReactNode
  render?: React.ReactNode
  onClick?: (activeImage: ImageDecorator) => void
}`,signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"actionType",value:{name:"ActionTypeEnum",required:!0}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"render",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"onClick",value:{name:"signature",type:"function",raw:"(activeImage: ImageDecorator) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}},name:"activeImage"}],return:{name:"void"}},required:!1}}]}}],raw:"ToolbarConfig[]"}}},description:""},zoomSpeed:{required:!1,tsType:{name:"number"},description:""},defaultSize:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}},description:""},defaultImg:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  src: string
  width?: number
  height?: number
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!1}},{key:"height",value:{name:"number",required:!1}}]}},description:""},disableKeyboardSupport:{required:!1,tsType:{name:"boolean"},description:""},noResetZoomAfterChange:{required:!1,tsType:{name:"boolean"},description:""},noLimitInitializationSize:{required:!1,tsType:{name:"boolean"},description:""},defaultScale:{required:!1,tsType:{name:"number"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(activeImage: ImageDecorator, index: number) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}},name:"activeImage"},{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""},disableMouseZoom:{required:!1,tsType:{name:"boolean"},description:""},totalName:{required:!1,tsType:{name:"string"},description:""},maxScale:{required:!1,tsType:{name:"number"},description:""},minScale:{required:!1,tsType:{name:"number"},description:""}}};const Ye=e=>{const[o,y]=l.useState(!1);return l.useEffect(()=>{e.visible&&!o&&y(!0)},[e.visible,o]),o?a.jsx(ve,{...e}):null};Ye.__docgenInfo={description:"",methods:[],displayName:"Viewer",props:{index:{required:!1,tsType:{name:"number"},description:""},visible:{required:!1,tsType:{name:"boolean"},description:""},onClose:{required:!1,tsType:{name:"signature",type:"function",raw:"() => void",signature:{arguments:[],return:{name:"void"}}},description:""},images:{required:!1,tsType:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}}],raw:"ImageDecorator[]"},description:""},activeIndex:{required:!1,tsType:{name:"number"},description:""},container:{required:!1,tsType:{name:"HTMLElement"},description:""},drag:{required:!1,tsType:{name:"boolean"},description:""},zoomable:{required:!1,tsType:{name:"boolean"},description:""},rotatable:{required:!1,tsType:{name:"boolean"},description:""},scalable:{required:!1,tsType:{name:"boolean"},description:""},onMaskClick:{required:!1,tsType:{name:"signature",type:"function",raw:"(e: React.MouseEvent<HTMLDivElement>) => void",signature:{arguments:[{type:{name:"ReactMouseEvent",raw:"React.MouseEvent<HTMLDivElement>",elements:[{name:"HTMLDivElement"}]},name:"e"}],return:{name:"void"}}},description:""},loop:{required:!1,tsType:{name:"boolean"},description:""},noClose:{required:!1,tsType:{name:"boolean"},description:""},isShowImageInformation:{required:!1,tsType:{name:"boolean"},description:""},isShowPreview:{required:!1,tsType:{name:"boolean"},description:""},isShowToolbar:{required:!1,tsType:{name:"boolean"},description:""},changeable:{required:!1,tsType:{name:"boolean"},description:""},customToolbar:{required:!1,tsType:{name:"signature",type:"function",raw:"(toolbars: ToolbarConfig[]) => ToolbarConfig[]",signature:{arguments:[{type:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  key: string
  actionType: ActionTypeEnum
  icon?: React.ReactNode
  render?: React.ReactNode
  onClick?: (activeImage: ImageDecorator) => void
}`,signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"actionType",value:{name:"ActionTypeEnum",required:!0}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"render",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"onClick",value:{name:"signature",type:"function",raw:"(activeImage: ImageDecorator) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}},name:"activeImage"}],return:{name:"void"}},required:!1}}]}}],raw:"ToolbarConfig[]"},name:"toolbars"}],return:{name:"Array",elements:[{name:"signature",type:"object",raw:`{
  key: string
  actionType: ActionTypeEnum
  icon?: React.ReactNode
  render?: React.ReactNode
  onClick?: (activeImage: ImageDecorator) => void
}`,signature:{properties:[{key:"key",value:{name:"string",required:!0}},{key:"actionType",value:{name:"ActionTypeEnum",required:!0}},{key:"icon",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"render",value:{name:"ReactReactNode",raw:"React.ReactNode",required:!1}},{key:"onClick",value:{name:"signature",type:"function",raw:"(activeImage: ImageDecorator) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}},name:"activeImage"}],return:{name:"void"}},required:!1}}]}}],raw:"ToolbarConfig[]"}}},description:""},zoomSpeed:{required:!1,tsType:{name:"number"},description:""},defaultSize:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]}},description:""},defaultImg:{required:!1,tsType:{name:"signature",type:"object",raw:`{
  src: string
  width?: number
  height?: number
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"width",value:{name:"number",required:!1}},{key:"height",value:{name:"number",required:!1}}]}},description:""},disableKeyboardSupport:{required:!1,tsType:{name:"boolean"},description:""},noResetZoomAfterChange:{required:!1,tsType:{name:"boolean"},description:""},noLimitInitializationSize:{required:!1,tsType:{name:"boolean"},description:""},defaultScale:{required:!1,tsType:{name:"number"},description:""},onChange:{required:!1,tsType:{name:"signature",type:"function",raw:"(activeImage: ImageDecorator, index: number) => void",signature:{arguments:[{type:{name:"signature",type:"object",raw:`{
  src: string
  alt?: string
  defaultSize?: ViewerImageSize
  srcPreview?: string
}`,signature:{properties:[{key:"src",value:{name:"string",required:!0}},{key:"alt",value:{name:"string",required:!1}},{key:"defaultSize",value:{name:"signature",type:"object",raw:`{
  width: number
  height: number
}`,signature:{properties:[{key:"width",value:{name:"number",required:!0}},{key:"height",value:{name:"number",required:!0}}]},required:!1}},{key:"srcPreview",value:{name:"string",required:!1}}]}},name:"activeImage"},{type:{name:"number"},name:"index"}],return:{name:"void"}}},description:""},disableMouseZoom:{required:!1,tsType:{name:"boolean"},description:""},totalName:{required:!1,tsType:{name:"string"},description:""},maxScale:{required:!1,tsType:{name:"number"},description:""},minScale:{required:!1,tsType:{name:"number"},description:""}}};export{Ye as V};
