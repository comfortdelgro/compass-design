import{i as O,j as z,k as W,l as U,m as q,n as J}from"./index-6d586102.js";import{s as D,a as l,j as t,R as x,r as m,F as y}from"./index-bd5aadfc.js";import{u as Q,g as X,a as Y,b as Z,c as _,d as ee,S as te,e as oe,D as N,f as ae,h as re,i as ne,j as se,N as le,k as T,l as A,m as ie,n as de}from"./data-grid.styles-339fb79c.js";import{p as I}from"./pick-child-c3c1ce46.js";import{u as ce}from"./use-dom-ref-aec6579a.js";import"./index-cdb42fe9.js";import{a as R}from"./index-e0fb0ff2.js";import"./index-a4813eb0.js";import"./index-aff363f2.js";import{F as C}from"./index.es-df51bc8b.js";import{P as ge}from"./pagination-6fbadda6.js";import{S as me}from"./searchfield-a907cee1.js";import{B as h}from"./button-9aad991d.js";import"./create-safe-context-c7ad814e.js";import"./checkbox.styles-06903605.js";import"./useCurrentTheme-729d3d5b.js";const he=D("div",{width:"200px",height:"20px",backgroundColor:"$secondaryBg",borderRadius:"10px",position:"relative"}),ue=D("div",{height:"100%",borderRadius:"10px",transition:"width 0.5s ease-in-out","&.low":{backgroundColor:"$danger"},"&.average":{backgroundColor:"$warning"},"&.high":{backgroundColor:"$success"}}),pe=D("span",{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"$primaryText"}),fe=({progress:o})=>{let a="";return o>=0&&o<=30?a="low":o>=30&&o<=60?a="average":a="high",l(he,{className:"progress-bar",children:[t(ue,{className:`progress ${a}`,css:{width:`${o}%`}}),t(pe,{className:"progress-label",children:`${o}%`})]})},B=fe,Se=x.forwardRef((o,a)=>{var k;const[r,d]=m.useState([]),[i,p]=m.useState({}),[f,e]=x.useState([]),{css:E={},data:$,columns:j,options:S,onManualSorting:b,onChangeRowSelection:w,onUpdateData:De,renderRowSubComponent:M,children:V,...H}=o,{child:G,rest:L}=I(V,T),{child:v}=I(L,A),K=ce(a),g=Q({state:{grouping:f,rowSelection:i,sorting:S.initialSortBy?S.initialSortBy:r},onGroupingChange:e,getExpandedRowModel:X(),getGroupedRowModel:Y(),onSortingChange:d,getCoreRowModel:Z(),getSortedRowModel:_(),getFilteredRowModel:ee(),onRowSelectionChange:p,debugTable:!0,data:$,columns:j,isMultiSortEvent:()=>!0,...S});m.useEffect(()=>{const c=g.getSelectedRowModel().rows.map(u=>u.original);w==null||w(c)},[i]),m.useEffect(()=>{b==null||b(r)},[r]);const P=g.getRowModel().rows??[];return l(te,{css:E,children:[G&&t(y,{children:G}),t(oe,{...H,children:l("table",{ref:K,children:[t(N,{as:"thead",children:g.getHeaderGroups().map(s=>t(ae,{children:s.headers.map(c=>t(re,{headerProps:c,tableOption:g},c.id))},s.id))}),t(N,{as:"tbody",children:P.length?P.map(s=>{var c;return l(y,{children:[t(ne,{isSelected:s.getIsSelected(),isExpanded:s.getIsExpanded(),children:s.getVisibleCells().map(u=>t(se,{cell:u,row:s},u.id))},s.id),s.getIsExpanded()&&M?t("tr",{children:t("td",{colSpan:(c=g.getAllLeafColumns())==null?void 0:c.length,children:M(s.original)})}):null]})}):t(le,{colSpan:(k=g.getAllLeafColumns())==null?void 0:k.length})})]})}),v&&t(y,{children:v})]})}),n=Se;n.Toolbar=T;n.Footer=A;n.Checkbox=ie;n.CheckboxCell=de;n.ProgressPercentage=B;n.Toolbar.displayName="ToolBar";n.Footer.displayName="Footer";n.ProgressPercentage.displayName="ProgressPercentage";n.displayName="DataGrid";const be=({status:o})=>l("div",{children:[t("span",{style:{paddingRight:"5px"},children:(()=>{switch(o){case"relationship":return t(C,{icon:W});case"complicated":return t(C,{icon:z});case"single":return t(C,{icon:O});default:return null}})()}),t("span",{children:o})]}),we=be,ye=o=>{const a=[];for(let r=0;r<o;r++)a.push(r);return a},F=o=>{let a="";const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d=r.length;for(let i=0;i<o;i++)a+=r.charAt(Math.floor(Math.random()*d));return a},Re=(o,a)=>{const r=o.getTime(),d=a.getTime(),i=Math.floor(Math.random()*(d-r+1)+r);return new Date(i)},Ce=()=>({firstName:F(5),lastName:F(5),age:Math.floor(Math.random()*40),visits:Math.floor(Math.random()*1e3),progress:Math.floor(Math.random()*100),createdAt:Re(new Date(2020,0,1),new Date(2029,11,31)),status:["relationship","complicated","single"][Math.floor(Math.random()*["relationship","complicated","single"].length)]});function xe(...o){const a=(r=0)=>{const d=o[r];return ye(d).map(i=>({...Ce(),subRows:o[r+1]?a(r+1):null}))};return a()}const Le=()=>{const[o,a]=m.useState(1),[r]=m.useState(()=>xe(10)),d={enableSorting:!0,enableMultiSort:!0,columnResizeMode:"onChange",manualSorting:!1,initialSortBy:[{id:"firstName",desc:!0},{id:"lastName",desc:!1}]},i=e=>{console.log("stateSorting",e)},p=e=>{console.log("stateSelectedRows",e)},f=x.useMemo(()=>[{id:"select",header:({table:e})=>t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t(n.CheckboxCell,{checked:e.getIsAllRowsSelected(),indeterminate:e.getIsSomeRowsSelected(),onChange:e.getToggleAllRowsSelectedHandler()})}),enableGrouping:!1,cell:({row:e})=>t("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"},children:t(n.CheckboxCell,{disabled:!e.getCanSelect(),checked:e.getIsSelected(),indeterminate:e.getIsSomeSelected(),onChange:e.getToggleSelectedHandler()})})},{id:"name",header:()=>t("div",{style:{textAlign:"center"},children:"Name"}),footer:e=>e.column.id,enableGrouping:!1,columns:[{accessorKey:"firstName",cell:e=>e.getValue(),footer:e=>e.column.id,enableResizing:!1,editable:!0,sortDescriptor:"asc"},{accessorFn:e=>e.lastName,id:"lastName",cell:e=>e.getValue(),header:()=>t("span",{children:"Last Name"}),footer:e=>e.column.id,enableResizing:!0}]},{id:"otherInfo",header:()=>t("div",{style:{textAlign:"center"},children:"Other info"}),footer:e=>e.column.id,enableGrouping:!1,columns:[{accessorKey:"age",header:()=>"Age",footer:e=>e.column.id},{accessorKey:"visits",header:()=>t("span",{children:"Visits"}),footer:e=>e.column.id},{accessorKey:"status",header:"Status",cell:e=>t(we,{status:e.getValue()}),footer:e=>e.column.id},{accessorKey:"progress",header:"Profile Progress",cell:e=>t(B,{progress:Number(e.getValue())}),footer:e=>e.column.id}]}],[]);return t("div",{children:l(n,{data:r,columns:f,options:d,onManualSorting:i,onChangeRowSelection:p,children:[l(n.Toolbar,{css:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[t(me,{placeholder:"Search"}),l("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"0.5rem"},children:[t(h,{variant:"primary",children:"Button"}),t(h,{variant:"secondary",children:"Button"}),t(h,{variant:"ghost",children:t(R,{icon:U})}),t(h,{variant:"ghost",children:t(R,{icon:q})}),t(h,{variant:"ghost",children:t(R,{icon:J})})]})]}),l(n.Footer,{css:{display:"flex",flexDirection:"row",justifyContent:"space-between"},children:[t("div",{}),l("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"0.5rem"},children:[l("div",{style:{fontWeight:"600"},children:[(o-1)*10+1," - ",(o-1)*10+10," of 100"]}),t(ge,{page:o,onChange:e=>a(e),total:10})]})]})]})})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{Le as DataGridStory};
