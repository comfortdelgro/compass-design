import{l as yt}from"./lodash-c34a034c.js";import{R as w,r,a as B,j as t,F as Ct}from"./index-11db0c06.js";import{P as gt}from"./index-132f11d7.js";import{u as Z}from"./use-dom-ref-2e56ddfd.js";import{D as ve,t as A,a as rt,g as Dt,b as Je,c as Qe,d as Xe,e as kt,f as xt}from"./utils-7761b863.js";import{a as Et,b as Oe,c as Lt,d as It,e as Mt,f as Rt,g as Nt,h as Pt,i as et,j as Ft,k as Bt,l as Kt,m as Vt,n as $t,o as Tt,S as tt,p as At}from"./dropdown.styles-4e9922cd.js";import{p as Ht}from"./pick-child-e315d247.js";const Ut=()=>t("svg",{width:"10",height:"10",viewBox:"0 0 10 10",fill:"none",children:t("path",{d:"M9.39158 1.86239C9.64736 2.12284 9.64736 2.54372 9.39158 2.80416L4.15319 8.13808C3.89741 8.39853 3.48407 8.39853 3.22829 8.13808L0.608522 5.47112C0.352823 5.21068 0.352823 4.7898 0.608522 4.52935C0.864262 4.26891 1.27883 4.26891 1.53461 4.52935L3.67232 6.72334L8.46668 1.86239C8.72246 1.60153 9.1358 1.60153 9.39158 1.86239Z",fill:"currentColor"})}),Wt=()=>t("svg",{width:"16",height:"17",viewBox:"0 0 16 17",fill:"none",children:t("path",{d:"M15.0265 3.47966C15.4357 3.89637 15.4357 4.56978 15.0265 4.98649L6.64506 13.5208C6.23581 13.9375 5.57446 13.9375 5.16521 13.5208L0.973587 9.25363C0.564469 8.83691 0.564469 8.16351 0.973587 7.74679C1.38277 7.33008 2.04608 7.33008 2.45533 7.74679L5.87567 11.2572L13.5466 3.47966C13.9559 3.06228 14.6172 3.06228 15.0265 3.47966Z",fill:"currentColor"})}),jt=w.forwardRef((b,h)=>{const{children:f,value:i="",flagName:S,type:D,rightIcon:a,leftIcon:k,rightColor:x,css:y={},checkmark:E="none",...P}=b,{textValue:H,...F}=P,{isPositioned:L,open:I,selectedItem:K,disabledKeys:te=[],searchValue:z,focusKey:G,selectedKey:Y,setSelectedItem:ae,setDropdownItemKeys:re,onItemClick:oe}=r.useContext(ve),m=Z(h),p=r.useMemo(()=>(K==null?void 0:K.value.toString())===i.toString(),[K,i]),M=r.useMemo(()=>(G==null?void 0:G.toString())===i.toString(),[G,i]),J=r.useMemo(()=>te.findIndex(V=>V.toString()===i.toString())!==-1,[te,i]),Q=r.useMemo(()=>!z||A(f).toLocaleLowerCase().includes(z.toLocaleLowerCase()),[z,f]);return r.useEffect(()=>{J||re==null||re(V=>{const c=V.findIndex(u=>u.value.toString()===i.toString());return c===-1?V.push({value:i,visibility:!0}):V[c]={value:i,visibility:Q},V})},[i,J,Q]),r.useEffect(()=>{Y&&Y.toString()===i.toString()&&ae({value:i.toString(),displayValue:H||f})},[Y,i]),r.useEffect(()=>{L&&(M||p&&M)&&m.current&&m.current.scrollIntoView({block:"nearest"})},[L,M,p]),r.useEffect(()=>{p&&L&&m.current&&m.current.scrollIntoView({block:"nearest"})},[L,I,p]),Q?B(Et,{css:y,isFocused:M&&!p,isSelected:p&&!M,isSelectedFocused:p&&M,isDisabled:J,onClick:()=>{J||oe({value:i.toString(),displayValue:H||f,flagName:S??""})},ref:m,role:"option","aria-selected":p,...F,children:[k&&t(Oe,{children:k}),t(Lt,{children:f}),D==="icon"&&a&&t(Oe,{children:a}),D==="color"&&x&&t(It,{isSelected:p,css:{$$bg:x},children:t("svg",{className:"cdg-dropdown-item-color",width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:t("path",{d:"M13.7893 3.08716C14.1555 3.45337 14.1555 4.0481 13.7893 4.41431L6.28931 11.9143C5.9231 12.2805 5.32837 12.2805 4.96216 11.9143L1.21216 8.16431C0.845947 7.7981 0.845947 7.20337 1.21216 6.83716C1.57837 6.47095 2.1731 6.47095 2.53931 6.83716L5.6272 9.92212L12.4651 3.08716C12.8313 2.72095 13.426 2.72095 13.7922 3.08716H13.7893Z",fill:"currentColor"})})}),E!=="none"&&t(Mt,{isSelected:p,checkmark:E,children:E==="checkbox"?t("div",{children:t(Ut,{})}):E==="tick"?t(Wt,{}):null})]}):null}),ot=jt;function qt(){return t(Rt,{children:B("div",{className:"spinner",children:[t("div",{className:"spinner-1"}),t("div",{className:"spinner-2"}),t("div",{className:"spinner-3"}),t("div",{})]})})}function Zt(b){const[h,f]=r.useState(!1),i=r.useMemo(()=>new IntersectionObserver(([S])=>f(!!(S!=null&&S.isIntersecting))),[b.current]);return r.useEffect(()=>(b.current&&i.observe(b.current),()=>{i.disconnect()}),[b,i]),h}const _t=b=>{const{children:h,isLoading:f,css:i={},noDataMessage:S,onLoadMore:D}=b,a=Z(null),k=Z(null),x=Zt(a),{searchValue:y,labelId:E,isLoadingMore:P}=r.useContext(ve),{child:H,rest:F}=Ht(h,rt),L=r.useMemo(()=>{let I=0;return w.Children.map(F,K=>{A(K).toLocaleLowerCase().includes(y.toLocaleLowerCase())&&I++}),I},[F,y]);return r.useEffect(()=>{if(a.current&&k.current){const I=Dt(a.current,k.current);x&&I>=0&&I<4&&!P&&(D==null||D())}},[x]),r.useMemo(()=>B(Ct,{children:[H&&H,B(Nt,{css:i,role:"listbox","aria-labelledby":E,children:[f?t(qt,{}):L===0?t(Pt,{children:S||"No data"}):F,w.Children.toArray(F).length>0&&t(et,{ref:a}),t(et,{ref:k})]})]}),[i,f,L,h])},zt=_t,Gt=w.forwardRef((b,h)=>t(_,{...b,ref:h,type:"combobox"})),Yt=Gt,Jt=w.forwardRef((b,h)=>{const{children:f,title:i,isClickable:S,css:D={},onClick:a,...k}=b,x=Z(h);return B(Ft,{css:D,ref:x,...k,children:[i&&t(Bt,{isClickable:!!S,onClick:()=>{S&&(a==null||a())},children:i}),f]})}),Qt=Jt,Xt=w.forwardRef((b,h)=>t(_,{...b,ref:h,type:"select"})),Ot=Xt,er=()=>t(At,{width:"16",height:"16",viewBox:"0 0 16 16",className:"cdg-dropdown-button-icon",children:t("path",{d:"M8.33276 12.3334C8.02004 12.3334 7.70717 12.2125 7.46885 11.9707L1.35805 5.78022C0.880649 5.29658 0.880649 4.5131 1.35805 4.02947C1.83546 3.54584 2.60886 3.54584 3.08626 4.02947L8.33276 9.34651L13.5804 4.03044C14.0578 3.54681 14.8312 3.54681 15.3086 4.03044C15.786 4.51407 15.786 5.29755 15.3086 5.78118L9.19782 11.9717C8.95912 12.2135 8.64594 12.3334 8.33276 12.3334Z",fill:"currentColor"})}),tr=37,q=()=>{},rr=w.forwardRef((b,h)=>{const{id:f=`cdg-element-${Math.random().toString(36).substring(2)}`,css:i={},popoverCSS:S={},children:D,type:a="select",icon:k=t(er,{}),placeholder:x,isErrored:y=!1,isRequired:E=!1,isReadOnly:P=!1,isLoading:H=!1,helperText:F,errorMessage:L,numberOfRows:I,disabledKeys:K=[],selectedKey:te="",defaultSelectedKey:z="",disabledValues:G,value:Y="",defaultValue:ae="",defaultOpen:re=!1,shouldDeselect:oe=!1,allowsCustomValue:m=!1,disableClearable:p=!1,prefix:M=null,noDataMessage:J="",label:Q,isCloseOnSelect:se=!0,isLoadingMore:V=!1,onValueChange:c=q,onSelectionChange:u=q,onLoadMore:st=q,onOpenChange:d=q,isDisabled:X=!1,inputRef:lt,buttonRef:nt,autoFocus:pe,autoCapitalize:Se,onCut:ye,onCopy:Ce,onBlur:le=q,onFocus:be=q,onPaste:ge,onInput:De,onKeyUp:ke,onSelect:xe,onKeyDown:ue=q,onBeforeInput:Ee,onCompositionEnd:Le,onCompositionStart:Ie,onCompositionUpdate:Me,...it}=b,ct={...it},U=r.useMemo(()=>ae||z,[ae,z]),O=r.useMemo(()=>Y||te,[Y,te]),[at,ut]=w.useState(!1),[v,W]=w.useState(re),[o,ne]=w.useState(null),[me,R]=w.useState(null),[Re,j]=r.useState(""),[$,dt]=r.useState([]),[C,ft]=r.useState(null),pt=Z(h),ie=Z(nt),n=Z(lt),Ne=r.useRef(!1),de=r.useMemo(()=>!!U||!U&&!O,[U,O]),bt=r.useMemo(()=>{var e,s;switch(a){case"select":return((e=ie.current)==null?void 0:e.clientWidth)??"100%";case"combobox":return((s=n.current)==null?void 0:s.clientWidth)??"100%";default:return"100%"}},[a,v]);r.useEffect(()=>{Ne.current?v||R(null):Ne.current=!0},[v,m]);const Pe=e=>typeof e=="string"?e:w.Children.map(e,s=>{if(!s)return s;if(w.isValidElement(s)){if(s.type===ot){const N=s;if(!("value"in N.props))return w.cloneElement(N,{value:`${s.key}`||""})}const g=s;if(g.props.children)return w.cloneElement(g,{children:Pe(g.props.children)})}return s});r.useEffect(()=>{ft(Pe(D))},[D]);const T=r.useCallback(e=>{de&&(ne(e),R((e==null?void 0:e.value)??null))},[de]),mt=r.useCallback(e=>{var s,g,N,ce,Ve,$e,Te,Ae,He,Ue,We,je,qe,Ze,_e,ze,Ge,Ye;if(ue(e),v){const ee=me??(o==null?void 0:o.value.toString())??null;switch(e.key){case"ArrowUp":case"ArrowLeft":if(e.preventDefault(),ee!==null){const l=xt(ee??"",C,$),he=(l==null?void 0:l.props.value)??((s=l==null?void 0:l.key)==null?void 0:s.toString().replace(".$",""))??null;R(he)}else R(((ce=(N=(g=Je(C,$))==null?void 0:g.props)==null?void 0:N.value)==null?void 0:ce.toString())??null);break;case"ArrowDown":case"ArrowRight":if(e.preventDefault(),ee!==null){const l=kt(ee??"",C,$),he=(l==null?void 0:l.props.value)??((Ve=l==null?void 0:l.key)==null?void 0:Ve.toString().replace(".$",""))??null;R(he)}else R(((Ae=(Te=($e=Qe(C,$))==null?void 0:$e.props)==null?void 0:Te.value)==null?void 0:Ae.toString())??null);break;case"Enter":if(e.preventDefault(),ee!==null){j("");const l=Xe(ee??"",C);if(l){if(W(!se),d==null||d(!1),!p&&oe&&(o==null?void 0:o.value)===l.props.value){T(null),u==null||u(""),c==null||c(""),n.current&&(n.current.value="");return}T({value:((Ue=(He=l==null?void 0:l.props)==null?void 0:He.value)==null?void 0:Ue.toString())??"",displayValue:l.props.textValue||l.props.children,flagName:l.props.flagName??""}),n.current&&(n.current.value=A(l.props.children)),u==null||u((We=l==null?void 0:l.props)==null?void 0:We.value),c==null||c((je=l==null?void 0:l.props)==null?void 0:je.value)}}break;case"Escape":case"Tab":W(!1),d==null||d(!1);break;case"Home":e.preventDefault(),R(((_e=(Ze=(qe=Qe(C,$))==null?void 0:qe.props)==null?void 0:Ze.value)==null?void 0:_e.toString())??null);break;case"End":e.preventDefault(),R(((Ye=(Ge=(ze=Je(C,$))==null?void 0:ze.props)==null?void 0:Ge.value)==null?void 0:Ye.toString())??null);break}}else switch(e.key){case"ArrowUp":case"ArrowDown":e.preventDefault(),W(!0),d==null||d(!0);break}},[se,v,p,oe,me,C,o,$,c,u,d,ue,T]),fe=r.useCallback(()=>{var e;j(""),W(s=>!s),d==null||d(!v),(e=n.current)==null||e.focus()},[d,v]),Fe=r.useCallback(e=>{W(!0),d==null||d(!0),j(e.target.value??""),a==="combobox"&&(m?(T(null),u==null||u(""),c==null||c("")):(e.target.value===""||yt.isEmpty(e.target.value.replaceAll(" ","")))&&!P&&!p&&(ne(null),R(null),u==null||u(""),c==null||c("")))},[P,p,de,a,o,m,d,c,u,T]),Be=r.useCallback(()=>{["combobox"].includes(a)&&n.current&&setTimeout(()=>{document.activeElement!==n.current&&n.current&&(m||(o?n.current.value=A(o==null?void 0:o.displayValue):n.current.value=""),j(""))})},[a,o,m,de]);r.useEffect(()=>{!v&&["combobox"].includes(a)&&n.current&&Be()},[v,a,Be]),r.useEffect(()=>{var g;if(!C||!O&&!U){ne(null),j(""),!m&&n.current&&(n.current.value=""),R(N=>N??null);return}const e=O||U,s=Xe(e,C);s&&(ne({value:e.toString(),displayValue:s.props.textValue||s.props.children,flagName:((g=s==null?void 0:s.props)==null?void 0:g.flagName)??""}),n.current&&(n.current.value=A(s)))},[C,O,U,m]);const we=r.useCallback(e=>{le==null||le(e),a==="combobox"&&n.current&&n.current&&(!m||!p)&&(o?n.current.value=A(o==null?void 0:o.displayValue):n.current.value="")},[le,o,a,m]),wt=r.useMemo(()=>{switch(a){case"select":return t(Vt,{isEmpty:!o,className:"cdg-dropdown-input",role:"button",isErrored:!!y,isDisabled:X,"aria-required":E,children:B("button",{id:f,type:"button",ref:ie,disabled:X,onClick:fe,onBlur:we,onFocus:be,className:"cdg-dropdown-button",autoFocus:pe,children:[M,t("span",{children:o?o==null?void 0:o.displayValue:x}),k]})});case"combobox":return B(Kt,{isEmpty:!o,className:"cdg-dropdown-input",role:"button",isErrored:!!y,isDisabled:X,"aria-required":E,children:[M,t("input",{id:f,ref:n,readOnly:P,disabled:X,placeholder:x,required:E,autoFocus:pe,autoCapitalize:Se,"aria-autocomplete":"list",role:"combobox","aria-invalid":y,"aria-expanded":v,onClick:fe,onChange:Fe,onBlur:we,onFocus:be,onCut:ye,onCopy:Ce,onPaste:ge,onInput:De,onKeyUp:ke,onSelect:xe,onKeyDown:ue,onBeforeInput:Ee,onCompositionEnd:Le,onCompositionStart:Ie,onCompositionUpdate:Me}),t("button",{type:"button",tabIndex:-1,disabled:X,onClick:fe,className:"cdg-dropdown-button",children:k})]});default:return null}},[M,v,a,f,x,o,y,X,P,pe,Se,le,be,fe,Fe,we,ye,Ce,ge,De,ke,xe,ue,Ee,Le,Ie,Me]),ht=e=>{var s,g;if(!P){if(se&&(W(!1),j(""),d==null||d(!1)),setTimeout(()=>{var N,ce;(N=n.current)==null||N.focus(),(ce=ie.current)==null||ce.focus()},0),!p&&!e.value){T(null),u==null||u(""),c==null||c("");return}if(!p&&oe&&(o==null?void 0:o.value)===e.value){T(null),u==null||u(""),c==null||c("");return}(o==null?void 0:o.value)!==e.value&&(u==null||u(e.value),c==null||c(e.value)),T(e),["combobox"].includes(a)?n.current&&(n.current.value=A(e.displayValue),se?(j(A(e.displayValue)),n.current.blur()):(s=n.current)==null||s.focus()):(g=ie.current)==null||g.focus()}},Ke=()=>{setTimeout(()=>{var e,s;(e=n.current)==null||e.focus(),(s=ie.current)==null||s.focus()},0)},vt=r.useCallback(()=>{W(!1),d==null||d(!1)},[d]),St=r.useCallback(e=>{ut(e)},[]);return B($t,{className:`${v?"cdg-dropdown-opening":""}`,css:i,ref:pt,onKeyDown:mt,...ct,children:[Q&&B("label",{htmlFor:f,id:`${f}-label`,children:[Q,E&&t("span",{children:"*"})]}),t(ve.Provider,{value:{isLoadingMore:V,isPositioned:at,open:v,focusKey:me,selectedKey:O,defaultSelectedKey:U,disabledKeys:G??K??[],searchValue:Re,labelId:`${f}-label`,selectedItem:o,setSelectedItem:ne,dropdownItemKeys:$,setDropdownItemKeys:dt,onItemClick:ht,onHeaderClick:Ke},children:t(gt,{isOpen:v,anchor:wt,css:{width:"100%"},direction:"bottom-left",onClose:vt,onPositionedChange:St,children:t(Tt,{onClick:Ke,css:{...S,width:S.width??bt},children:t(zt,{searchValue:Re,isLoading:H,css:{maxHeight:I?`${I*tr}px`:"16rem"},onLoadMore:st,noDataMessage:J,children:C})})})}),y&&L&&t(tt,{error:!!y,children:L}),F&&t(tt,{children:F})]})}),_=rr;_.Item=ot;_.Select=Ot;_.ComboBox=Yt;_.Section=Qt;_.Header=rt;export{_ as D};
