import{r as h,s as ne,R as q,j as f,a as K}from"./index.3530d004.js";import{C as de,R as N}from"./components.06a6c7ad.js";import{f as ie,$ as X,c as fe}from"./module.21c6540f.js";import{i as oe,j as be,e as me}from"./module.3bdc67a3.js";import{a as le}from"./module.3bc5a635.js";import{$ as he}from"./module.0c9f6a44.js";import{a as O,b as j,$ as ge}from"./module.9acb42fc.js";import{e as ae,H as pe}from"./real-module.13a371a5.js";import{u as ue}from"./use-dom-ref.eae8a206.js";const W=new WeakMap;function H(n,t){let e=W.get(n);if(!e)throw new Error("Unknown slider state");return`${e}-${t}`}function $e(n,t,e){let{labelProps:a,fieldProps:S}=le(n),l=n.orientation==="vertical";var v;W.set(t,(v=a.id)!==null&&v!==void 0?v:S.id);let{direction:M}=ae(),{addGlobalListener:T,removeGlobalListener:s}=ie();const c=h.exports.useRef(null),w=h.exports.useRef(null);w.current=t;const D=M==="rtl",u=h.exports.useRef(null),{moveProps:E}=oe({onMoveStart(){u.current=null},onMove({deltaX:i,deltaY:P}){let{height:b,width:x}=e.current.getBoundingClientRect(),y=l?b:x;u.current==null&&(u.current=w.current.getThumbPercent(c.current)*y);let V=l?P:i;if((l||D)&&(V=-V),u.current+=V,c.current!=null&&e.current){const L=O(u.current/y,0,1);w.current.setThumbPercent(c.current,L)}},onMoveEnd(){c.current!=null&&(w.current.setThumbDragging(c.current,!1),c.current=null)}});let C=h.exports.useRef(void 0),g=(i,P,b,x)=>{if(e.current&&!n.isDisabled&&t.values.every((y,V)=>!t.isThumbDragging(V))){let{height:y,width:V,top:L,left:A}=e.current.getBoundingClientRect(),U=l?y:V,B=((l?x:b)-(l?L:A))/U;(M==="rtl"||l)&&(B=1-B);let o=t.getPercentValue(B),d,$=t.values.findIndex(k=>o-k<0);if($===0)d=$;else if($===-1)d=t.values.length-1;else{let k=t.values[$-1],r=t.values[$];Math.abs(k-o)<Math.abs(r-o)?d=$-1:d=$}d>=0&&t.isThumbEditable(d)?(i.preventDefault(),c.current=d,t.setFocusedThumb(d),C.current=P,t.setThumbDragging(c.current,!0),t.setThumbValue(d,o),T(window,"mouseup",p,!1),T(window,"touchend",p,!1),T(window,"pointerup",p,!1)):c.current=null}},p=i=>{var P,b;((b=i.pointerId)!==null&&b!==void 0?b:(P=i.changedTouches)===null||P===void 0?void 0:P[0].identifier)===C.current&&(c.current!=null&&(t.setThumbDragging(c.current,!1),c.current=null),s(window,"mouseup",p,!1),s(window,"touchend",p,!1),s(window,"pointerup",p,!1))};return"htmlFor"in a&&a.htmlFor&&(delete a.htmlFor,a.onClick=()=>{var i;(i=document.getElementById(H(t,0)))===null||i===void 0||i.focus(),be("keyboard")}),{labelProps:a,groupProps:{role:"group",...S},trackProps:X({onMouseDown(i){i.button!==0||i.altKey||i.ctrlKey||i.metaKey||g(i,void 0,i.clientX,i.clientY)},onPointerDown(i){i.pointerType==="mouse"&&(i.button!==0||i.altKey||i.ctrlKey||i.metaKey)||g(i,i.pointerId,i.clientX,i.clientY)},onTouchStart(i){g(i,i.changedTouches[0].identifier,i.changedTouches[0].clientX,i.changedTouches[0].clientY)},style:{position:"relative",touchAction:"none"}},E),outputProps:{htmlFor:t.values.map((i,P)=>H(t,P)).join(" "),"aria-live":"off"}}}function Te(n,t){let{index:e,isRequired:a,validationState:S,trackRef:l,inputRef:v,orientation:M=t.orientation}=n,T=n.isDisabled||t.isDisabled,s=M==="vertical",{direction:c}=ae(),{addGlobalListener:w,removeGlobalListener:D}=ie(),u=W.get(t);var E;const{labelProps:C,fieldProps:g}=le({...n,id:H(t,e),"aria-labelledby":`${u} ${(E=n["aria-labelledby"])!==null&&E!==void 0?E:""}`.trim()}),p=t.values[e],i=h.exports.useCallback(()=>{v.current&&fe(v.current)},[v]),P=t.focusedThumb===e;h.exports.useEffect(()=>{P&&i()},[P,i]);const b=h.exports.useRef(null);b.current=t;let x=c==="rtl",y=h.exports.useRef(null),{keyboardProps:V}=me({onKeyDown(o){let{getThumbMaxValue:d,getThumbMinValue:$,decrementThumb:k,incrementThumb:r,setThumbValue:m,setThumbDragging:R,pageSize:_}=b.current;if(!/^(PageUp|PageDown|Home|End)$/.test(o.key)){o.continuePropagation();return}switch(o.preventDefault(),R(e,!0),o.key){case"PageUp":r(e,_);break;case"PageDown":k(e,_);break;case"Home":m(e,$(e));break;case"End":m(e,d(e));break}R(e,!1)}}),{moveProps:L}=oe({onMoveStart(){y.current=null,b.current.setThumbDragging(e,!0)},onMove({deltaX:o,deltaY:d,pointerType:$,shiftKey:k}){const{getThumbPercent:r,setThumbPercent:m,decrementThumb:R,incrementThumb:_,step:J,pageSize:Q}=b.current;let{width:se,height:ce}=l.current.getBoundingClientRect(),Z=s?ce:se;if(y.current==null&&(y.current=r(e)*Z),$==="keyboard")o>0&&x||o<0&&!x||d>0?R(e,k?Q:J):_(e,k?Q:J);else{let Y=s?d:o;(s||x)&&(Y=-Y),y.current+=Y,m(e,O(y.current/Z,0,1))}},onMoveEnd(){b.current.setThumbDragging(e,!1)}});t.setThumbEditable(e,!T);const{focusableProps:A}=he(X(n,{onFocus:()=>t.setFocusedThumb(e),onBlur:()=>t.setFocusedThumb(void 0)}),v);let U=h.exports.useRef(void 0),F=o=>{i(),U.current=o,t.setThumbDragging(e,!0),w(window,"mouseup",I,!1),w(window,"touchend",I,!1),w(window,"pointerup",I,!1)},I=o=>{var d,$;(($=o.pointerId)!==null&&$!==void 0?$:(d=o.changedTouches)===null||d===void 0?void 0:d[0].identifier)===U.current&&(i(),t.setThumbDragging(e,!1),D(window,"mouseup",I,!1),D(window,"touchend",I,!1),D(window,"pointerup",I,!1))},z=t.getThumbPercent(e);(s||c==="rtl")&&(z=1-z);let B=T?{}:X(V,L,{onMouseDown:o=>{o.button!==0||o.altKey||o.ctrlKey||o.metaKey||F()},onPointerDown:o=>{o.button!==0||o.altKey||o.ctrlKey||o.metaKey||F(o.pointerId)},onTouchStart:o=>{F(o.changedTouches[0].identifier)}});return{inputProps:X(A,g,{type:"range",tabIndex:T?void 0:0,min:t.getThumbMinValue(e),max:t.getThumbMaxValue(e),step:t.step,value:p,disabled:T,"aria-orientation":M,"aria-valuetext":t.getThumbValueLabel(e),"aria-required":a||void 0,"aria-invalid":S==="invalid"||void 0,"aria-errormessage":n["aria-errormessage"],onChange:o=>{b.current.setThumbValue(e,parseFloat(o.target.value))}}),thumbProps:{...B,style:{position:"absolute",[s?"top":"left"]:`${z*100}%`,transform:"translate(-50%, -50%)",touchAction:"none"}},labelProps:C,isDragging:t.isThumbDragging(e),isDisabled:T,isFocused:P}}const ve=0,we=100,Pe=1;function xe(n){const{isDisabled:t=!1,minValue:e=ve,maxValue:a=we,numberFormatter:S,step:l=Pe,orientation:v="horizontal"}=n;let M=h.exports.useMemo(()=>{let r=(a-e)/10;return r=j(r,0,r+l,l),Math.max(r,l)},[l,a,e]),T=h.exports.useMemo(()=>te(n.value),[n.value]);var s;let c=h.exports.useMemo(()=>(s=te(n.defaultValue))!==null&&s!==void 0?s:[e],[n.defaultValue,e]),w=re(n.value,n.defaultValue,n.onChange),D=re(n.value,n.defaultValue,n.onChangeEnd);const[u,E]=ge(T,c,w),[C,g]=h.exports.useState(new Array(u.length).fill(!1)),p=h.exports.useRef(new Array(u.length).fill(!0)),[i,P]=h.exports.useState(void 0),b=h.exports.useRef(null);b.current=u;const x=h.exports.useRef(null);x.current=C;function y(r){return(r-e)/(a-e)}function V(r){return r===0?e:u[r-1]}function L(r){return r===u.length-1?a:u[r+1]}function A(r){return p.current[r]}function U(r,m){p.current[r]=m}function F(r,m){if(t||!A(r))return;const R=V(r),_=L(r);m=j(m,R,_,l),b.current=ee(b.current,r,m),E(b.current)}function I(r,m){if(t||!A(r))return;const R=x.current[r];x.current=ee(x.current,r,m),g(x.current),D&&R&&!x.current.some(Boolean)&&D(b.current)}function z(r){return S.format(r)}function B(r,m){F(r,d(m))}function o(r){return Math.round((r-e)/l)*l+e}function d(r){const m=r*(a-e)+e;return O(o(m),e,a)}function $(r,m=1){let R=Math.max(m,l);F(r,j(u[r]+R,e,a,l))}function k(r,m=1){let R=Math.max(m,l);F(r,j(u[r]-R,e,a,l))}return{values:u,getThumbValue:r=>u[r],setThumbValue:F,setThumbPercent:B,isThumbDragging:r=>C[r],setThumbDragging:I,focusedThumb:i,setFocusedThumb:P,getThumbPercent:r=>y(u[r]),getValuePercent:y,getThumbValueLabel:r=>z(u[r]),getFormattedValue:z,getThumbMinValue:V,getThumbMaxValue:L,getPercentValue:d,isThumbEditable:A,setThumbEditable:U,incrementThumb:$,decrementThumb:k,step:l,pageSize:M,orientation:v,isDisabled:t}}function ee(n,t,e){return n[t]===e?n:[...n.slice(0,t),e,...n.slice(t+1)]}function te(n){if(n!=null)return Array.isArray(n)?n:[n]}function re(n,t,e){return a=>{typeof n=="number"||typeof t=="number"?e==null||e(a[0]):e==null||e(a)}}const ye=ne("div",{position:"relative",touchAction:"none",".slider-track-wrapper":{position:"relative",width:"100%",".slider-rail":{position:"absolute",backgroundColor:"$cdgBlue10",borderRadius:"$full",height:"$1",width:"100%"},".slider-filled-rail":{position:"absolute",backgroundColor:"$cdgBlue100",height:"$1",borderRadius:"$full",left:"0"},".slider-track":{position:"relative",height:"$1",width:"100%",display:"flex",flexDirection:"column",justifyContent:"center"}}}),De=ne("div",{display:"flex",position:"absolute",alignItems:"center",flexDirection:"column",transform:"translateX(-50%)",zIndex:1,".slider-thumb-handle":{width:"$4",height:"$4",cursor:"pointer",borderRadius:"50%",boxSizing:"border-box",border:"2px solid $cdgBlue10",backgroundColor:"$background",boxShadow:"0 0 4px rgba(0, 0, 0, 0.16)"},".slider-value":{position:"absolute",width:"$16",height:"$16",color:"$whiteText",borderRadius:"$md",backgroundColor:"$gray110",fontSize:"$header4",fontWeight:"$bold",display:"flex",justifyContent:"center",alignItems:"center",bottom:"$6","&:after":{content:"",position:"absolute",width:"$4",height:"$4",transform:"rotate(45deg)",borderRadius:"$md 0",backgroundColor:"$gray110",bottom:"-$2"}}}),Ve=q.forwardRef((n,t)=>{var E,C;const{css:e={},tooltip:a=!0,...S}=n,l=q.useRef(null),v=ue(t),M=pe(n.formatOptions),T={...S,onChangeEnd:g=>{var p;return(p=n.onChangeEnd)==null?void 0:p.call(n,typeof g=="number"?g:g[0]?g[0]:0)},onChange:g=>{var p;return(p=n.onChange)==null?void 0:p.call(n,typeof g=="number"?g:g[0]?g[0]:0)}},s=xe({...T,numberFormatter:M}),{groupProps:c,trackProps:w}=$e(T,s,l),D=(E=s.values[0])!=null?E:0,u=(C=n.minValue)!=null?C:0;return f(ye,{...c,ref:v,css:e,children:K("div",{className:"slider-track-wrapper",children:[f("div",{className:"slider-rail"}),f("div",{className:"slider-filled-rail",style:{left:`${s.getValuePercent(Math.min(D,u))*100}%`,width:`${(s.getValuePercent(Math.max(D,u))-s.getValuePercent(Math.min(D,u)))*100}%`}}),f("div",{...w,ref:l,className:"slider-track",children:f(Re,{tooltip:a,state:s,trackRef:l})})]})})}),Re=q.forwardRef((n,t)=>{var w;const{state:e,trackRef:a,tooltip:S}=n,l=(w=e.values[0])!=null?w:0,v=ue(t),M={index:0,trackRef:a,inputRef:v},{thumbProps:T,inputProps:s,isDragging:c}=Te(M,e);return K(De,{style:{left:`${e.getThumbPercent(0)*100}%`},children:[f("div",{...T,className:"slider-thumb-handle",children:f("input",{ref:v,...s,style:{display:"none"}})}),S&&c&&f("div",{className:"slider-value",children:l})]})}),G=Ve;G.displayName="Slider";const ze=()=>{const[n,t]=h.exports.useState(20);return K(de,{children:[f("h1",{children:"Slider"}),f(N,{children:K("div",{style:{width:"100%",marginBottom:"2rem"},children:[f("h3",{children:"Uncontrolled slider"}),f(G,{})]})}),f(N,{children:K("div",{style:{width:"100%",marginBottom:"2rem"},children:[f("h3",{children:"Controlled slider"}),f(G,{value:n,onChange:e=>t(e)})]})}),f(N,{children:K("div",{style:{width:"100%",marginBottom:"2rem"},children:[f("h3",{children:"Disabled slider"}),f(G,{isDisabled:!0})]})}),f(N,{children:K("div",{style:{width:"100%",marginBottom:"2rem"},children:[f("h3",{children:"Tooltip disabled"}),f(G,{tooltip:!1})]})})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{ze as Sliders};
