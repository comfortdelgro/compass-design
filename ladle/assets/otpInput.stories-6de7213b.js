import{s as x,r as n,R as y,j as r,a as D}from"./index-5a67006c.js";import{u as R}from"./use-dom-ref-ee8f408b.js";import{C as z}from"./components-d24caed8.js";const H=x("input",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",padding:"0px",lineHeight:"1em",width:"3rem !important",height:"3rem",margin:"0 1rem",fontSize:"2rem",textAlign:"center",borderRadius:"10px",border:"1px solid rgba(0, 0, 0, 0.2)"}),L=x("div",{appearance:"none",border:"none",backgroundColor:"transparent",boxSizing:"border-box",padding:"0px",lineHeight:"1em",margin:"5% auto"});function B(o){const l=n.useRef();return n.useEffect(()=>{l.current=o},[o]),l.current}const K=y.forwardRef((o,l)=>{const{css:P={},focus:a,autoFocus:i,...h}=o,c=R(l),d=B(!!a);return n.useLayoutEffect(()=>{c.current&&(a&&i&&c.current.focus(),a&&i&&a!==d&&(c.current.focus(),c.current.select()))},[i,a,d]),r(H,{ref:c,...h})}),$=n.memo(K),q=$,G=y.forwardRef((o,l)=>{const{css:P={},length:a,isNumberInput:i,autoFocus:h,disabled:c,onChangeOTP:d,...F}=o,V=R(l),[s,b]=n.useState(0),[u,T]=n.useState(Array(a).fill("")),v=n.useCallback(t=>{const e=t.join("");d(e)},[d]),f=n.useCallback(t=>{const e=t;return i?!e||/\d/.test(e)?e:"":e},[i]),g=n.useCallback(t=>{const e=[...u];e[s]=t[0]||"",T(e),v(e)},[s,v,u]),p=n.useCallback(t=>{const e=Math.max(Math.min(a-1,t),0);b(e)},[a]),C=n.useCallback(()=>{p(s-1)},[s,p]),m=n.useCallback(()=>{p(s+1)},[s,p]),A=n.useCallback(t=>()=>{p(t)},[p]),E=n.useCallback(t=>{const e=f(t.currentTarget.value);if(!e){t.preventDefault();return}g(e),m()},[g,m,f]),N=n.useCallback(()=>{b(-1)},[]),M=n.useCallback(t=>{switch(t.key){case"Backspace":case"Delete":{t.preventDefault(),u[s]?g(""):C();break}case"ArrowLeft":{t.preventDefault(),C();break}case"ArrowRight":{t.preventDefault(),m();break}case" ":{t.preventDefault();break}}},[s,g,m,C,u]),j=n.useCallback(t=>{t.preventDefault();const e=t.clipboardData.getData("text/plain").trim().slice(0,a-s).split("");if(e){let S=0;const O=[...u];O.forEach((_,I)=>{if(I>=s){const w=f(e.shift()||_);w&&(O[I]=w,S=I)}}),T(O),b(Math.min(S+1,a-1))}},[s,f,a,u]);return r(L,{css:P,ref:V,...F,children:Array(a).fill("").map((t,e)=>r(q,{focus:s===e,autoFocus:h,value:u&&u[e],onFocus:A(e),onChange:E,onKeyDown:M,onBlur:N,onPaste:j,disabled:c},`SingleInput-${e}`))})}),J=n.memo(G),k=J;k.displayName="OTPInput";const X=()=>D(z,{children:[r("h2",{children:"Number OTP"}),r(k,{length:4,isNumberInput:!0,autoFocus:!0,onChangeOTP:o=>console.log("Number OTP: ",o)}),r("h2",{children:"String OTP"}),r(k,{autoFocus:!0,length:4,onChangeOTP:o=>console.log("String OTP: ",o)})]}),Y={decorators:[o=>D("div",{children:[r("style",{dangerouslySetInnerHTML:{__html:".ladle-main { background: #eee; }"}}),r(o,{})]})]};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{X as Variants,Y as default};
