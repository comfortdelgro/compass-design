import{e as p}from"./index-e268e049.js";import{s as y,R as s,j as e,a as u,r as Q}from"./index-2a259d11.js";import"./index-58d00a4c.js";import{I as f}from"./index-5bf4841a.js";import{C as V}from"./components-6a74ddee.js";import{p as Y}from"./pick-child-8e9d9c82.js";import{u as M}from"./use-dom-ref-c21a8ae3.js";import{B as C}from"./button-7e26b5e4.js";import"./index.es-b6b1a3a6.js";const ee=y("div",{width:"100%"}),te=y("div",{width:"100%",display:"flex",label:{fontSize:"$body3",fontWeight:"$semibold",display:"inline-block",span:{marginLeft:"$1",color:"$danger"}},variants:{labelPosition:{top:{flexDirection:"column",gap:"$2"},left:{flexDirection:"row",gap:"$8",label:{maxWidth:"33%",flexShrink:0,width:"max-content"}}}}}),O=y("div",{marginTop:"$1",width:"$6",height:"$6",display:"flex",justifyContent:"center",alignItems:"center",userSelect:"none",svg:{width:"$4",height:"$4"}}),oe=y("div",{flexGrow:1,backgroundColor:"$background",border:"1px solid #EDEBE9",padding:"$2 $4",borderRadius:"$md",display:"flex",gap:"$4",variants:{collaspable:{true:{},false:{minHeight:"$32"}},isErrored:{true:{borderColor:"$danger",borderWidth:1}}}}),le=y("div",{flexGrow:1,display:"flex",alignItems:"flex-start",height:"fit-content",flexWrap:"wrap",gap:"$4",input:{fontSize:"$body3",border:"none",background:"transparent",outline:"none",width:"25%",height:"$7_5",padding:0}}),Z=y("div",{fontSize:"$label2",fontWeight:"$semibold",backgroundColor:"#F5F5F6",padding:"$2",gap:"$3",height:"min-content",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"$md",svg:{width:"$3",height:"$3"},"&:hover":{backgroundColor:"#EAEBEB"},input:{fontSize:"$label2",fontWeight:"$semibold",height:"fit-content",padding:0,margin:0},variants:{isDisabled:{true:{background:"#F0F0F0",cursor:"not-allowed",opacity:.4},false:{"tag-box-x-icon":{cursor:"pointer"}}},isError:{true:{border:"1px solid #A4262C"}}}}),ne=y("div",{width:"100%",marginTop:"$2",fontSize:"$label3",color:"$gray60",fontWeight:"$semibold",display:"flex",alignItems:"center",span:{flexGrow:1}}),ie=y("div",{width:"max-content",height:"min-content"}),re=y("div",{fontSize:"$label2",fontWeight:"$medium",transition:"$default",marginTop:"$1",color:"$gray70",variants:{error:{true:{color:"$danger"},false:{color:"$gray70"}}}}),ae=s.forwardRef((t,l)=>{const{css:g={},children:v,...$}=t,r=M(l);return e(ie,{css:g,ref:r,...$,children:v})}),K=ae,ce=s.forwardRef((t,l)=>{const{onEnter:g=()=>{},onFocus:v=()=>{},onBlur:$=()=>{},...r}=t,b=M(l);return e("input",{ref:b,type:"text",onFocus:v,onBlur:$,onKeyDown:x=>{const m=x.target.value;m!==""&&x.key==="Enter"&&(g(m),b.current&&(b.current.value=""))},...r})}),se=ce,de=s.forwardRef((t,l)=>{const{isDisabled:g=!1,isError:v,icon:$,value:r,id:b,wrapperRef:x,onRemove:m,onEdit:R,...w}=t,[k,B]=s.useState(!1),[z,T]=s.useState(r),a=s.useRef(null),W=M(l),L=()=>{g||(B(!0),setTimeout(()=>{var i;(i=a==null?void 0:a.current)==null||i.focus()}))},I=(i,d)=>{const o=document.createElement("div");o.style.position="absolute",o.style.top="0",o.style.left="-9999px",o.style.overflow="hidden",o.style.visibility="hidden",o.style.whiteSpace="nowrap",o.style.height="0",o.style.width="fit-content",o.style.fontSize="12px",o.style.fontWeight="600",o.style.maxWidth=`${x.current.clientWidth-62}px`,o.innerHTML=i.replace(/\s/g,"&nbsp;"),document.body.appendChild(o),d(o.clientWidth),o.remove()},j=i=>{const d=i.target.value;T(d),d!==""?I(d,o=>{i.target.focus(),i.target.style.width=`${o+4}px`}):i.target.style.width="4px"},D=i=>{var o;const d=i.target.value;d!==""&&i.key==="Enter"&&(R==null||R(b,d),(o=a==null?void 0:a.current)==null||o.blur()),(i.key=="Escape"||i.keyCode==27)&&A()};s.useEffect(()=>{const i=r;i!==""&&I(i,d=>{a.current&&(a.current.focus(),a.current.style.width=`${d+4}px`,a.current.style.maxWidth=`${x.current.clientWidth-62}px`)})},[r]);const A=()=>{T(r),B(!1),I(r,i=>{a.current&&(a.current.style.width=`${i+4}px`)})};return u(Z,{isDisabled:g,isError:v,ref:W,...w,children:[$,e("input",{ref:a,value:z,onKeyDown:D,onClick:L,onChange:j,onBlur:A,style:{display:k?"block":"none"}}),e("span",{onClick:L,style:{display:k?"none":"block",cursor:g?"not-allowed":"text"},children:r}),e("span",{style:{display:"flex",alignItems:"center",justifyContent:"center",cursor:g?"not-allowed":"pointer"},children:e(he,{onClick:()=>m==null?void 0:m(b)})})]})}),he=({...t})=>e("svg",{...t,width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",children:e("path",{d:"M10.9408 9.45858C11.3509 9.8687 11.3509 10.5331 10.9408 10.9432C10.7373 11.1483 10.4683 11.25 10.1993 11.25C9.93022 11.25 9.66183 11.1475 9.4571 10.9424L5.99959 7.4867L2.54241 10.9416C2.33734 11.1483 2.06863 11.25 1.79992 11.25C1.5312 11.25 1.26282 11.1483 1.05759 10.9416C0.647469 10.5315 0.647469 9.86706 1.05759 9.45694L4.51576 5.99877L1.05759 2.54224C0.647469 2.13212 0.647469 1.46772 1.05759 1.05759C1.46772 0.647469 2.13212 0.647469 2.54224 1.05759L5.99959 4.5174L9.45776 1.05923C9.86788 0.64911 10.5323 0.64911 10.9424 1.05923C11.3525 1.46936 11.3525 2.13376 10.9424 2.54388L7.48424 6.00205L10.9408 9.45858Z",fill:"#201F1E"})}),ue=de,pe=s.forwardRef((t,l)=>{const{css:g={},id:v,labelPosition:$="top",collaspable:r=!1,typeable:b=!1,items:x,helperText:m,children:R,isErrored:w,isRequired:k,errorMessage:B,onRemove:z,onAdd:T,onEdit:a,label:W,icon:L,...I}=t,j=M(l),{child:D}=Y(R,K),[A,i]=s.useState(0),d=s.useRef(null),o=s.useRef(null),[F,_]=s.useState([]),[H,U]=s.useState(!1),X=()=>{o.current&&(o.current.style.outlineColor=w?"#A4262C":"-webkit-focus-ring-color",o.current.style.outlineStyle="auto")},J=()=>{o.current&&(o.current.style.outline="none")};return s.useEffect(()=>{_(c=>Array(x.length).fill(0).map((S,E)=>c[E]||Q.createRef()))},[x]),s.useEffect(()=>{var c,S;if(r&&!H){let E=((c=d.current)==null?void 0:c.clientWidth)??0,N=0;for(const P of F){const q=(S=P.current)==null?void 0:S.clientWidth;if(q){const G=E-q-16;G>37?E=G:(P.current.style.display="none",N++)}}i(Math.min(N,99))}else{for(const E of F)E.current&&(E.current.style.display="flex");i(0)}},[F,H,r]),u(ee,{css:g,ref:j,...I,children:[u(te,{labelPosition:$,children:[W&&u("label",{htmlFor:v,children:[W,k&&e("span",{children:"*"})]}),u("div",{children:[u(oe,{id:v,ref:o,collaspable:r,isErrored:!!w,"aria-label":t["aria-label"],"aria-details":t["aria-details"],"aria-labelledby":t["aria-labelledby"],"aria-describedby":t["aria-describedby"],children:[L&&e(O,{children:L}),u(le,{ref:d,children:[x.map((c,S)=>e(ue,{isDisabled:!!c.isDisabled,isError:!!c.isError,ref:F[S],wrapperRef:d,icon:c.icon,value:c.value,id:c.id,onRemove:z,onEdit:a},c.id)),A>0&&e(Z,{children:u("span",{children:["+",A]})},"remainingCount"),(!r&&b||r&&b&&H)&&e(se,{onFocus:X,onBlur:J,onEnter:c=>T==null?void 0:T(c)})]}),r&&e(O,{css:{cursor:"pointer"},onClick:()=>U(c=>!c),children:H?e(ge,{}):e(fe,{})})]}),w&&B&&e(re,{error:!!w,children:B})]})]}),(m||D)&&u(ne,{children:[e("span",{children:m})," ",D]})]})}),fe=({...t})=>e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...t,children:e("path",{d:"M11.9991 18C11.5301 18 11.0608 17.8186 10.7033 17.4559L1.53708 8.1702C0.820973 7.44475 0.820973 6.26953 1.53708 5.54408C2.25319 4.81864 3.41329 4.81864 4.12939 5.54408L11.9991 13.5196L19.8706 5.54554C20.5867 4.82009 21.7468 4.82009 22.4629 5.54554C23.179 6.27098 23.179 7.44621 22.4629 8.17165L13.2967 17.4574C12.9387 17.8201 12.4689 18 11.9991 18Z",fill:"#201F1E"})}),ge=({...t})=>e("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",...t,children:e("path",{d:"M12.0009 5C12.4699 5 12.9392 5.18136 13.2967 5.54409L22.4629 14.8298C23.179 15.5552 23.179 16.7305 22.4629 17.4559C21.7468 18.1814 20.5867 18.1814 19.8706 17.4559L12.0009 9.48036L4.12939 17.4545C3.41329 18.1799 2.25319 18.1799 1.53708 17.4545C0.820973 16.729 0.820973 15.5538 1.53708 14.8284L10.7033 5.54264C11.0613 5.17991 11.5311 5 12.0009 5Z",fill:"#201F1E"})}),n=pe;n.Action=K;n.displayName="TagBox";n.Action.displayName="TagBox.Action";const h=[{id:1,value:"Item 1",icon:e(f,{icon:p})},{id:2,value:"Item 2",isDisabled:!0},{id:3,value:"Item 3",icon:e(f,{icon:p})},{id:4,value:"Item 4",isDisabled:!0},{id:5,value:"Item 5",icon:e(f,{icon:p}),isError:!0},{id:6,value:"Item 6",isDisabled:!0},{id:7,value:"Item 7",icon:e(f,{icon:p})},{id:8,value:"Item 8",isDisabled:!0},{id:9,value:"Item 9",icon:e(f,{icon:p})},{id:10,value:"Item 10",isDisabled:!0}],Te=()=>u(V,{children:[e("h3",{children:"Fully Functional"}),e(n,{label:"Text Label",items:h,icon:e(f,{icon:p}),isRequired:!0,onRemove:t=>console.log(t),onEdit:(t,l)=>console.log(t,l),helperText:"Helper text",children:e(n.Action,{children:e(C,{children:"Call to action"})})}),e("h3",{children:"Typeable"}),e(n,{label:"Text Label",items:h,typeable:!0,icon:e(f,{icon:p}),onAdd:t=>console.log(t),onRemove:t=>console.log(t),onEdit:(t,l)=>console.log(t,l),helperText:"Helper text",children:e(n.Action,{children:e(C,{children:"Call to action"})})}),e("h3",{children:"Error"}),e(n,{label:"Text Label",items:h,icon:e(f,{icon:p}),onRemove:t=>console.log(t),onEdit:(t,l)=>console.log(t,l),isErrored:!0,errorMessage:"Error Message",helperText:"Helper text",children:e(n.Action,{children:e(C,{children:"Call to action"})})}),e("h3",{children:"Positioned Label"}),e(n,{items:h,onRemove:t=>console.log(t),onEdit:(t,l)=>console.log(t,l),labelPosition:"left",label:"Text Label",helperText:"Helper text",children:e(n.Action,{children:e(C,{children:"Call to action"})})}),e("h3",{children:"No Action"}),e(n,{label:"Text Label",items:h,onRemove:t=>console.log(t),helperText:"Helper text"}),e("h3",{children:"No Helper text and Action"}),e(n,{label:"Text Label",items:h,onRemove:t=>console.log(t)})]}),Re=()=>u(V,{children:[e("h3",{children:"Fully Functional"}),e(n,{label:"Text Label",collaspable:!0,isRequired:!0,items:h,icon:e(f,{icon:p}),onRemove:t=>console.log(t),onEdit:(t,l)=>console.log(t,l),helperText:"Helper text",children:e(n.Action,{children:e(C,{children:"Call to action"})})}),e("h3",{children:"Typeable"}),e(n,{label:"Text Label",collaspable:!0,typeable:!0,items:h,icon:e(f,{icon:p}),onAdd:t=>console.log(t),onRemove:t=>console.log(t),onEdit:(t,l)=>console.log(t,l),helperText:"Helper text",children:e(n.Action,{children:e(C,{children:"Call to action"})})}),e("h3",{children:"Error"}),e(n,{label:"Text Label",collaspable:!0,items:h,icon:e(f,{icon:p}),onRemove:t=>console.log(t),onEdit:(t,l)=>console.log(t,l),isErrored:!0,errorMessage:"Error Message",helperText:"Helper text",children:e(n.Action,{children:e(C,{children:"Call to action"})})}),e("h3",{children:"Positioned Label"}),e(n,{items:h,collaspable:!0,onRemove:t=>console.log(t),onEdit:(t,l)=>console.log(t,l),labelPosition:"left",label:"Text Label",helperText:"Helper text",children:e(n.Action,{children:e(C,{children:"Call to action"})})}),e("h3",{children:"No Action"}),e(n,{label:"Text Label",collaspable:!0,items:h,onRemove:t=>console.log(t),onEdit:(t,l)=>console.log(t,l),helperText:"Helper text"}),e("h3",{children:"No Helper text and Action"}),e(n,{collaspable:!0,label:"Text Label",items:h,onRemove:t=>console.log(t)})]});typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{Re as Collaspable,Te as TagBoxs};
