import{s as v,R as t,r as x,j as s,a as W}from"./index-11db0c06.js";import{S as B}from"./index-d435ea9f.js";import{C as J}from"./components-9f754f7f.js";import{P as U}from"./index-132f11d7.js";import{u as Y}from"./use-dom-ref-2e56ddfd.js";import"./button-b129e339.js";import"./useCurrentTheme-37745dc1.js";import"./floating-ui.react.esm-23187140.js";const Z=v("div",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",outline:"none",border:"none",margin:0,padding:0,background:"$background",boxShadow:"0 2px 5px rgba(0,0,0,0.2)",borderRadius:"$md",minHeight:"2rem",maxHeight:"16rem",overflowY:"auto"}),Q=v("div",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",outline:"none",border:"none",margin:0,padding:0,fontSize:"$label2",fontFamily:"$header5",color:"$disabledText",width:"100%",minHeight:"2rem",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"}),X=v("div",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",outline:"none",border:"none",margin:0,width:"100%",fontSize:"$label1",lineHeight:"1em",fontFamily:"$sans",fontWeight:"$medium",padding:"$2 $4",cursor:"pointer",display:"flex",alignItems:"center",gap:"$2","&:hover":{backgroundColor:"$gray20"},"&:focus-visible":{backgroundColor:"$cdgBlue20"},variants:{isFocused:{true:{backgroundColor:"$gray20"}},isSelected:{true:{backgroundColor:"$gray20"}},isDisabled:{true:{opacity:.4,cursor:"not-allowed"}}}}),_=v("div",{appearance:"none",backgroundColor:"transparent",boxSizing:"border-box",outline:"none",border:"none",margin:0,padding:0,"&:focus-visible":{outline:"none",border:"none",borderColor:"transparent"},width:"fit-content",height:"fit-content"}),ee=t.forwardRef((f,g)=>{var $,I;const{children:E,options:r,onSearch:d,onSelect:i,searchedValue:a,debounce:k,notFoundContent:O="No Results Found",css:o={},onLoadMore:n,isLoadingMore:u,...p}=f,[h,m]=t.useState(!1),[b,M]=t.useState(null),[z,K]=t.useState(null),S=Y(g),P=t.useRef(null),V=($=S.current)==null?void 0:$.clientWidth,y=t.useRef(null),C=((I=y.current)==null?void 0:I.querySelector("input"))??y.current,j=t.Children.map(E,e=>t.cloneElement(e,{ref:y,tabIndex:-1})),R=e=>{K(e),i&&i(e),m(!1)},w=x.useRef(null),q=()=>{const e=w.current;e&&e.scrollTop+e.clientHeight>=e.scrollHeight&&n&&!u&&n()},G=e=>{var L,D;if(w.current&&C){const c=Array.from((document==null?void 0:document.querySelectorAll('[role="option"]'))??[]),T=c[0],F=c[c.length-1];switch(e.key){case"ArrowUp":if(e.preventDefault(),document.activeElement===T)F.focus();else{const A=c.indexOf(document.activeElement);(L=c[A-1])==null||L.focus()}break;case"ArrowDown":if(e.preventDefault(),document.activeElement===F)n&&!u?n():T.focus();else{const A=c.indexOf(document.activeElement);(D=c[A+1])==null||D.focus()}break;case"Escape":e.preventDefault(),m(!1),C.focus();break}}},N=(e,l)=>{l.key==="Enter"&&(l.preventDefault(),e&&R(e))};return t.useEffect(()=>{if(P.current=a,a&&a!==z){b&&clearTimeout(b);const e=setTimeout(()=>{P.current===a&&d&&d(a)},k);M(e)}else m(!1);return()=>{b&&clearTimeout(b)}},[a]),t.useEffect(()=>{a&&m(!0)},[r]),t.useEffect(()=>{const e=w.current;if(h){if(e){const l=e.querySelector('[role="option"]');l?l.focus():e.focus()}}else C&&C.focus()},[h,y]),s(_,{ref:S,css:o,...p,"aria-haspopup":"true","aria-expanded":h?"true":"false","aria-controls":"autocomplete-popover",tabIndex:-1,children:s(U,{isOpen:h,onClose:()=>{m(!1)},anchor:j,direction:"bottom-center",attachToElement:S.current&&S.current.parentElement,children:s(Z,{ref:w,css:{width:V},onScroll:q,onKeyDown:G,tabIndex:-1,children:(r==null?void 0:r.length)===0?s(Q,{children:O}):r==null?void 0:r.map(e=>s(X,{onClick:()=>R(e),onKeyDown:l=>N(e,l),tabIndex:0,role:"option",children:e},e))})})})}),H=ee;H.displayName="AutoComplete";const ie=()=>{const[f,g]=x.useState(""),[E,r]=x.useState([]),[d,i]=x.useState(!1),a=async o=>{try{await new Promise(p=>setTimeout(p,100));const u=["Lion","Giraffe","Elephant","Penguin","Dolphin","Koala","Cheetah","Kangaroo","Octopus","Gorilla","Tiger","Zebra","Hippopotamus","Panda","Snake","Leopard","Polar Bear","Lemur","Jaguar","Chimpanzee"].filter(p=>p.toLowerCase().includes(o.toLowerCase()));r([...u]),console.log("API call successful:",u)}catch(n){console.error("Error during API call:",n)}},k=async()=>{if(!d)try{i(!0),await new Promise(n=>setTimeout(n,500));const o=["Raccoon","Ostrich","Flamingo","Pangolin","Llama","Meerkat","Koala","Chameleon","Sloth","Armadillo","Puma","Jaguar","Gazelle","Mongoose","Platypus","Peacock","Tapir","Hedgehog","Kangaroo","Otter"];r(n=>[...n,...o]),i(!1),console.log("Load more successful:",o)}catch(o){i(!1),console.error("Error during Load more:",o)}},O=o=>{g(o),console.log("Selected value:",o)};return W(J,{children:[s("h3",{children:"Full-featured Example: Auto Complete"}),s(H,{searchedValue:f,debounce:800,onSearch:o=>a(o),options:E,onSelect:o=>O(o),notFoundContent:"No data found",onLoadMore:()=>k(),isLoadingMore:d,children:s(B,{placeholder:"Search",onInput:o=>g(o.target.value),value:f})})]})};typeof window<"u"&&window.document&&window.document.createElement&&document.documentElement.setAttribute("data-storyloaded","");export{ie as FullFeatured};
