import{j as a}from"./jsx-runtime-9ef10904.js";import{r as e}from"./index-6c164b11.js";import{C as B,c as l}from"./string-b39bd50e.js";import{u as b}from"./use-dom-ref-7c72e1a5.js";const Q="_naturalDrawerWrapper_t442r_4",U="_bottomSheet_t442r_14",X="_fullscreen_t442r_19",Y="_naturalDrawerStop_t442r_38",Z="_naturalDrawerTopOffset_t442r_44",ee="_bottomSheetBody_t442r_50",re="_naturalDrawer_t442r_4",te="_drawerOffsetTop_t442r_66",ae="_drawerScroller_t442r_70",ne="_naturalDrawerContent_t442r_71",oe="_maximized_t442r_75",se="_naturalDrawerDragger_t442r_80",le="_naturalDrawerHeader_t442r_87",ce="_naturalDrawerHeaderContent_t442r_97",ue="_fixedContent_t442r_101",de="_naturalDrawerHandle_t442r_112",ie="_naturalBookingBottomSelect_t442r_120",s={naturalDrawerWrapper:Q,bottomSheet:U,fullscreen:X,naturalDrawerStop:Y,naturalDrawerTopOffset:Z,bottomSheetBody:ee,naturalDrawer:re,drawerOffsetTop:te,drawerScroller:ae,naturalDrawerContent:ne,maximized:oe,naturalDrawerDragger:se,naturalDrawerHeader:le,naturalDrawerHeaderContent:ce,fixedContent:ue,naturalDrawerHandle:de,naturalBookingBottomSelect:ie},T=e.forwardRef(({children:f,header:w,setOffsetTop:n,css:p={},..._},d)=>{const[h,x]=e.useState(!1),c=b(d);return e.useEffect(()=>{h&&n(c.current.offsetTop)},[c,n,h]),e.useEffect(()=>{x(!0)},[]),a.jsx(B,{css:p,childrenRef:c,children:a.jsxs("div",{className:l(s.naturalDrawer,"cdg-natural-drawer"),ref:c,children:[w,a.jsx("div",{..._,className:l(s.naturalDrawerContent,"cdg-natural-drawer-content"),children:f})]})})});T.__docgenInfo={description:"",methods:[],displayName:"NaturalDrawerContent",props:{css:{defaultValue:{value:"{}",computed:!1},required:!1}}};const fe=500,S=e.forwardRef((f,w)=>{var O;const{type:n="drawer",children:p,className:_="",expanded:d=!1,fullscreen:h=!0,header:x,fixedContent:c,visibleHeight:E,style:M,drawerScroll:W=()=>{},onReachBottom:V=()=>{},onCollapsed:C=()=>{},onExpanded:m=()=>{},...z}=f,[D,I]=e.useState(!1),[L,q]=e.useState(0),[$,A]=e.useState(0),[F,G]=e.useState(!1),r=b(w),o=e.useRef(null),g=e.useRef(null),J=e.useRef(null),N=E||(((O=r.current)==null?void 0:O.clientHeight)||0)*.36,y=Math.floor($||0),j=e.useCallback(()=>{var R;let t="";if(!r.current)return t;const u=(R=r.current)==null?void 0:R.clientHeight;return t=100-N*100/u+"%",t},[N,r]),K=()=>{var t,u;return((((t=r==null?void 0:r.current)==null?void 0:t.scrollTop)+(c?0:N))/((u=r==null?void 0:r.current)==null?void 0:u.scrollHeight)||0)*.8},i=e.useCallback(t=>{r.current&&o&&o.current&&r.current.scrollTo({top:t,behavior:"smooth"})},[r]),P=t=>{const u=t.target.scrollTop;q(u),u>=y?m():u===0&&C(),F&&u<=10&&V(),W(t)},H=e.useCallback(()=>{var t;i(((t=o==null?void 0:o.current)==null?void 0:t.offsetTop)||0),m()},[o,m,i]),v=e.useCallback(()=>{r.current&&o&&o.current&&(i(0),C())},[C,i,r]);return e.useEffect(()=>{d?H():v()},[v,H,d]),e.useEffect(()=>{D&&g&&g.current&&n==="bottomSheet"&&(i(g.current.offsetTop),setTimeout(()=>{G(!0),m()},fe)),D&&o&&o.current&&n==="drawer"&&(o.current.style.scrollSnapAlign="start")},[m,i,n,D]),e.useEffect(()=>{I(!0)},[H,n]),a.jsxs("div",{ref:r,className:l(s.naturalDrawerWrapper,s[n],h?s.fullscreen:"",L>=y?l("maximized",s.maximized):"",_,"cdg-natural-drawer"),onScroll:P,style:{backgroundColor:n==="bottomSheet"||!c?`rgba(0,0,0,${K()})`:"",...M},...z,children:[c&&a.jsx("div",{className:l(s.fixedContent,"cdg-natural-drawer-fixed-content"),children:c}),n==="bottomSheet"?a.jsx("div",{ref:J,className:l(s.naturalDrawerStop,"cdg-natural-drawer-stop"),style:{height:`calc(100% - ${j()})`}}):"",D&&a.jsxs(a.Fragment,{children:[a.jsx("div",{ref:g,className:l(s.naturalDrawerStop,"cdg-natural-drawer-stop"),style:{height:j()}}),a.jsx(T,{ref:o,header:x,setOffsetTop:A,style:{opacity:D?"":0},children:p})]})]})});S.__docgenInfo={description:"",methods:[],displayName:"NaturalDrawerWrapper"};const k=e.forwardRef(({children:f,useDrag:w=!1,css:n={},...p},_)=>{const d=b(_);return a.jsx(B,{css:n,childrenRef:d,children:a.jsxs("header",{...p,ref:d,className:l(s.naturalDrawerHeader,"cdg-natural-drawer-header"),children:[w&&a.jsx("div",{className:l(s.naturalDrawerDragger,"cdg-natural-drawer-dragger"),children:a.jsx("span",{className:l(s.naturalDrawerHandle,"cdg-natural-drawer-handle")})}),f]})})});k.__docgenInfo={description:"",methods:[],displayName:"NaturalDrawerHeader",props:{useDrag:{defaultValue:{value:"false",computed:!1},required:!1},css:{defaultValue:{value:"{}",computed:!1},required:!1}}};S.Header=k;S.Content=T;S.displayName="Drawer";export{S as N};
