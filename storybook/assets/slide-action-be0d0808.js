import{j as y}from"./jsx-runtime-9ef10904.js";import{r as n}from"./index-6c164b11.js";import{c as M,C as q}from"./objectToCSS-e90bd687.js";import{u as B}from"./use-dom-ref-7c72e1a5.js";import"./Row-7065e1c2.js";import"./useKeyboardNavigation-fc00b2dd.js";import"./_getTag-831c42c2.js";import"./_equalByTag-6cd86198.js";import"./isObjectLike-c4ff7b99.js";function W(c,e,a={updateFirstChange:!1}){const[s,p]=n.useState(c),g=n.useRef(),u=n.useRef(!0),o=()=>window.clearTimeout(g.current);n.useEffect(()=>o,[]);const x=n.useCallback(i=>{o(),u.current&&a.updateFirstChange?p(i):g.current=window.setTimeout(()=>{u.current=!0,p(i)},e),u.current=!1},[a.updateFirstChange,e]);return[s,x]}const X=(c,[e,a])=>Math.min(Math.max(c,e),a),O=(c,e)=>{if(e===1)return c;const a=Math.floor(c/e)*e,s=Math.ceil(c/e)*e;return c-a>s-c?s:a},U=c=>{const e=n.useMemo(()=>{const t={prevent:!0,touch:!0,mouse:!0,direction:"both",limit:{x:{max:1/0,min:-1/0},y:{max:1/0,min:-1/0}},stepSize:0,manualStylingOnMove:!1,returnedPositionDebounceTime:0,disabled:!1,...c};return t.disabled&&(t.mouse=!1,t.touch=!1),t},[c]),a=n.useRef(null),s=e.targetRef||a,p=n.useRef({x:0,y:0}),g=n.useRef({x:0,y:0}),u=n.useRef(!1),[o,x]=W({x:0,y:0},e.returnedPositionDebounceTime??0),i=n.useCallback((t,r)=>{if(!s.current)return;if(!(r!=null&&r.skipCalulateStep)&&e.stepSize&&(t={x:O(o.x,typeof e.stepSize=="object"?e.stepSize.x:e.stepSize),y:O(o.y,typeof e.stepSize=="object"?e.stepSize.y:e.stepSize)}),g.current=t,r!=null&&r.shouldUpdatePositionState){(o.x!==t.x||o.y!==t.y)&&x(t);return}const l=s.current.style;r!=null&&r.transition?l.setProperty("transition",r.transition):l.removeProperty("transition"),l.setProperty("transform",`translate3d(${t.x}px, ${t.y}px, 0)`)},[e.stepSize,o.x,o.y,x,s]),b=n.useCallback(t=>{var f,m,E,S;const{x:r,y:l}=g.current;let d=r,v=l;if(e.touch&&((m=(f=t.touches)==null?void 0:f[0])!=null&&m.clientX)){const R=t.touches[0];R&&(u.current=!0,d=R.clientX-r,v=R.clientY-l,p.current={x:d,y:v},(E=e.onStart)==null||E.call(e,s,{x:d,y:v},i));return}e.mouse&&t instanceof window.MouseEvent&&t.button===0&&(u.current=!0,d=t.clientX-r,v=t.clientY-l,p.current={x:d,y:v},(S=e.onStart)==null||S.call(e,s,{x:d,y:v},i))},[e,i,s]),C=n.useCallback(t=>{var E,S,R,w,z,P,I,k,_,h,j;if(!u.current||!e.mouse&&!e.touch)return;e.prevent&&t.cancelable&&t.preventDefault();const{x:r,y:l}=p.current,{x:d,y:v}=g.current;let f=d,m=v;if(e.touch&&((S=(E=t.touches)==null?void 0:E[0])!=null&&S.clientX)){const A=t.touches[0];A&&(f=A.clientX-r,m=A.clientY-l)}else e.mouse&&t instanceof window.MouseEvent&&t.button===0&&(f=t.clientX-r,m=t.clientY-l);e.stepSize&&(f=O(f,typeof e.stepSize=="object"?e.stepSize.x:e.stepSize),m=O(m,typeof e.stepSize=="object"?e.stepSize.y:e.stepSize)),f=e.direction==="vertical"?0:X(f,[((w=(R=e.limit)==null?void 0:R.x)==null?void 0:w.min)??-1/0,((P=(z=e.limit)==null?void 0:z.x)==null?void 0:P.max)??1/0]),m=e.direction==="horizontal"?0:X(m,[((k=(I=e.limit)==null?void 0:I.y)==null?void 0:k.min)??-1/0,((h=(_=e.limit)==null?void 0:_.y)==null?void 0:h.max)??1/0]),(f!==d||m!==v)&&((j=e.onMove)==null||j.call(e,s,{x:f,y:m})),i({x:f,y:m},{skipCalulateStep:!0,shouldUpdatePositionState:e.manualStylingOnMove})},[e,i,s]),L=n.useCallback(t=>{var r;u.current&&(e.touch&&typeof t.touches<"u"||e.mouse&&t instanceof window.MouseEvent&&t.button===0)&&(u.current=!1,(r=e.onEnd)==null||r.call(e,s,g.current,i))},[e,i,s]);return n.useEffect(()=>{const t=s.current;if(!(typeof window>"u"||typeof document>"u"||!t))return e.touch&&(t.addEventListener("touchstart",b,{passive:!0}),t.addEventListener("touchmove",C,{passive:!e.prevent}),document.addEventListener("touchcancel",L),document.addEventListener("touchend",L)),e.mouse&&(t.addEventListener("mousedown",b),document.addEventListener("mousemove",C),document.addEventListener("mouseup",L)),()=>{e.touch&&(t.removeEventListener("touchstart",b),t.removeEventListener("touchmove",C),document.removeEventListener("touchcancel",L),document.removeEventListener("touchend",L)),e.mouse&&(t.removeEventListener("mousedown",b),document.removeEventListener("mousemove",C),document.removeEventListener("mouseup",L))}},[s,e,b,C,L]),{target:s,position:o,setPosition:i}},$=(c,e)=>{const a=n.useRef(!1);n.useEffect(()=>{if(a.current){c();return}a.current=!0},e)},Z=({slideRef:c,onDrag:e,onDragEnd:a,disableDrag:s=!1})=>{const[p,g]=n.useState(0),u=n.useMemo(()=>{if(typeof window>"u"||!c.current)return{draggerWidth:p,maxSlideDistance:0};const i=window.getComputedStyle(c.current),b=parseFloat(i.paddingLeft)+parseFloat(i.paddingRight);return{draggerWidth:p,maxSlideDistance:c.current.offsetWidth-b-p}},[p,c]),{target:o,setPosition:x}=U({direction:"horizontal",limit:{x:{min:0,max:u.maxSlideDistance}},onMove:(...i)=>e==null?void 0:e(u,...i),onEnd:(...i)=>a==null?void 0:a(u,...i),disabled:s});return n.useEffect(()=>{if(typeof window>"u"||!o.current)return;const i=new ResizeObserver(b=>{g(b[0].target.offsetWidth)});return i.observe(o.current),()=>i.disconnect()},[o]),{slideDraggerRef:o,setDraggerPosition:x}},H="_slideAction_terby_6",G="_slideActionBackground_terby_21",J="_slideActionDragger_terby_31",K="_slideActionDefaultIcon_terby_50",Q="_slideActionLabel_terby_55",ee="_compact_terby_90",te="_slide_terby_6",ne="_gradientWaveText_terby_1",D={slideAction:H,slideActionBackground:G,slideActionDragger:J,slideActionDefaultIcon:K,slideActionLabel:Q,compact:ee,static:"_static_terby_109",default:"_default_terby_115",slide:te,gradientWaveText:ne};function Y(){return y.jsx("svg",{className:M(D.slideActionDefaultIcon,"cdg-slide-action__default-icon"),width:"14",height:"15",viewBox:"0 0 14 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:y.jsxs("g",{id:"Frame 105",children:[y.jsxs("g",{id:"Vector",children:[y.jsx("path",{d:"M0.886667 14.998C0.66 14.998 0.433333 14.9106 0.26 14.74C-0.0866667 14.3988 -0.0866667 13.8432 0.26 13.502L5.85111 7.99914L0.26 2.49188C-0.0866667 2.15068 -0.0866667 1.59514 0.26 1.25394C0.606667 0.912748 1.17111 0.912748 1.51778 1.25394L7.74 7.37799C8.08667 7.71918 8.08667 8.27472 7.74 8.61592L1.51778 14.74C1.34 14.9106 1.11333 14.998 0.886667 14.998Z"}),y.jsx("path",{d:"M0.886667 14.998C0.66 14.998 0.433333 14.9106 0.26 14.74C-0.0866667 14.3988 -0.0866667 13.8432 0.26 13.502L5.85111 7.99914L0.26 2.49188C-0.0866667 2.15068 -0.0866667 1.59514 0.26 1.25394C0.606667 0.912748 1.17111 0.912748 1.51778 1.25394L7.74 7.37799C8.08667 7.71918 8.08667 8.27472 7.74 8.61592L1.51778 14.74C1.34 14.9106 1.11333 14.998 0.886667 14.998Z"})]}),y.jsxs("g",{id:"Vector_2",children:[y.jsx("path",{d:"M6.88667 14.998C6.66 14.998 6.43333 14.9106 6.26 14.74C5.91333 14.3988 5.91333 13.8432 6.26 13.502L11.8511 7.99914L6.26 2.49188C5.91333 2.15068 5.91333 1.59514 6.26 1.25394C6.60667 0.912748 7.17111 0.912748 7.51778 1.25394L13.74 7.37799C14.0867 7.71918 14.0867 8.27472 13.74 8.61592L7.51778 14.74C7.34 14.9106 7.11333 14.998 6.88667 14.998Z"}),y.jsx("path",{d:"M6.88667 14.998C6.66 14.998 6.43333 14.9106 6.26 14.74C5.91333 14.3988 5.91333 13.8432 6.26 13.502L11.8511 7.99914L6.26 2.49188C5.91333 2.15068 5.91333 1.59514 6.26 1.25394C6.60667 0.912748 7.17111 0.912748 7.51778 1.25394L13.74 7.37799C14.0867 7.71918 14.0867 8.27472 13.74 8.61592L7.51778 14.74C7.34 14.9106 7.11333 14.998 6.88667 14.998Z"})]})]})})}Y.__docgenInfo={description:"",methods:[],displayName:"SlideActionDefaultIcon"};const V=.4,F=200,re=c=>typeof window>"u"||typeof document>"u"?!1:!!window.getComputedStyle(document.documentElement).getPropertyValue(c).trim(),se=n.forwardRef(({css:c,className:e="",icon:a,color:s,label:p="Slide",labelType:g="default",onChange:u,onSwipeEnd:o,slideType:x="slide",allowSwipeAfterEnd:i=!1,compact:b=!1,children:C,...L},t)=>{const r=B(t),l=n.useRef(null),d=n.useRef(null),[v,f]=n.useState(!1),[m,E]=n.useState(!1),S=n.useCallback((_,h)=>{if(l.current){if(x==="static"){l.current.style.setProperty("opacity",_.toFixed(2));return}l.current.style.setProperty("width",`${h}px`)}},[x]),R=n.useCallback(({draggerWidth:_,maxSlideDistance:h},j,{x:A})=>{if(!r.current||!d.current)return;const N=(h-A)/h;d.current.style.setProperty("opacity",(N-.1).toFixed(2));const T=A/h-V;S(T>V?V:T,_+A)},[S]),w=n.useCallback(()=>{d.current&&d.current.style.setProperty("opacity","1"),f(!1),E(!1),S(0,0)},[S]),z=n.useCallback(({maxSlideDistance:_},h,{x:j},A)=>{if(!r.current)return;const N=()=>{w(),A({x:0,y:0},{transition:`transform ${F}ms ease`})};if(j===_){i||f(!0),E(!0),o==null||o(N);return}N()},[S,i,o]),{slideDraggerRef:P,setDraggerPosition:I}=Z({slideRef:r,onDrag:R,onDragEnd:z,disableDrag:v}),k=n.useCallback(()=>{w(),I({x:0,y:0},{transition:`transform ${F}ms ease`})},[w,I]);return n.useImperativeHandle(t,()=>({...r.current,resetState:k})),$(()=>{u==null||u(m)},[m,u]),n.useEffect(()=>{var _,h;if(!s){(_=r.current)==null||_.style.removeProperty("--slide-action-theme");return}(h=r.current)==null||h.style.setProperty("--slide-action-theme",re(s)?`var(${s})`:s)},[s]),y.jsx(q,{css:c,childrenRef:r,children:y.jsxs("div",{ref:r,className:M(D.slideAction,b?D.compact:"",e,"cdg-slide-action"),...L,children:[y.jsx("div",{ref:l,className:M(D.slideActionBackground,x&&D[x],"cdg-slide-action__bg")}),y.jsx("button",{ref:P,className:M(D.slideActionDragger,"cdg-slide-action__dragger"),type:"button",style:v?{pointerEvents:"none"}:void 0,children:a||y.jsx(Y,{})}),y.jsx("div",{ref:d,className:M(D.slideActionLabel,g&&D[g],"cdg-slide-action__label"),title:typeof C=="string"?C:p,children:C||p})]})})});se.__docgenInfo={description:`A Slide action or Swiper component that requires user to swipe to confirm an action.

Usually use for important actions, such as purchase order, turn off privacy setting, delete something, etc...`,methods:[],displayName:"SlideAction",props:{className:{defaultValue:{value:"''",computed:!1},required:!1},label:{defaultValue:{value:"'Slide'",computed:!1},required:!1},labelType:{defaultValue:{value:"'default'",computed:!1},required:!1},slideType:{defaultValue:{value:"'slide'",computed:!1},required:!1},allowSwipeAfterEnd:{defaultValue:{value:"false",computed:!1},required:!1},compact:{defaultValue:{value:"false",computed:!1},required:!1}}};export{se as S};
