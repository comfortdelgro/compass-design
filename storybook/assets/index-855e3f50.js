import{j as m}from"./jsx-runtime-9ef10904.js";import{r as n,R}from"./index-6c164b11.js";import{c as A,C as F}from"./string-b39bd50e.js";import{u as V}from"./use-dom-ref-7c72e1a5.js";const q="_singleInput_d0ntb_7",z="_inputContainer_d0ntb_22",J="_singleInputNumber_d0ntb_53",Q="_singleInputIsError_d0ntb_62",W="_inputContainerIsMobile_d0ntb_72",X="_singleInputIsMobile_d0ntb_76",I={singleInput:q,inputContainer:z,singleInputNumber:J,singleInputIsError:Q,inputContainerIsMobile:W,singleInputIsMobile:X};function Y(l){const i=n.useRef();return n.useEffect(()=>{i.current=l},[l]),i.current}const w=R.forwardRef((l,i)=>{const{css:c={},className:N,index:b,focus:r,autoFocus:g,isErrored:p,isNumberInput:C,isMobile:v,...o}=l,u=V(i),d=Y(!!r);n.useLayoutEffect(()=>{if(u.current){if(b===0){r&&(g||r!==d)&&(u.current.focus(),u.current.select());return}r&&r!==d&&(u.current.focus(),u.current.select())}},[g,r,b,u,d]);const M=A(I.singleInput,C&&I.singleInputNumber,v&&I.singleInputIsMobile,p&&I.singleInputisErrored,N,"cdg-otp-single-input");return m.jsx(F,{css:c,children:m.jsx("input",{...o,ref:u,className:M})})}),Z=n.memo(w);w.__docgenInfo={description:"",methods:[],displayName:"SingleOTPInputComponent"};const ee=6,S=R.forwardRef((l,i)=>{const{otp:c,css:N={},disabled:b,autoFocus:r,className:g,isNumberInput:p,isMobile:C=!1,isErrored:v=!1,length:o=ee,onChangeOTP:u,...d}=l,M=V(i),[s,T]=n.useState(0),[a,D]=n.useState(c?c.split("").slice(0,o):Array(o).fill(""));R.useEffect(()=>{c&&D(c.split("").slice(0,o))},[o,c]);const h=n.useCallback(e=>{const t=e.join("");u(t)},[u]),_=n.useCallback(e=>{const t=e;return p?!t||/\d/.test(t)?t:"":t},[p]),O=n.useCallback(e=>{const t=[...a];t[s]=e[0]||"",a[s]!==t[s]&&(D(t),h(t))},[s,h,a]),f=n.useCallback(e=>{const t=Math.max(Math.min(o-1,e),0);T(t)},[o]),E=n.useCallback(()=>{f(s-1)},[s,f]),k=n.useCallback(()=>{f(s+1)},[s,f]),L=n.useCallback(e=>()=>{f(e)},[f]),B=n.useCallback(e=>{const t=_(e.currentTarget.value);if(!t){e.preventDefault();return}O(t),k()},[O,k,_]),K=n.useCallback(()=>{T(-1)},[]),G=n.useCallback(e=>{switch(e.key){case"Backspace":case"Delete":{e.preventDefault(),a[s]&&O(""),E();break}case"ArrowLeft":{e.preventDefault(),E();break}case"ArrowRight":{e.preventDefault(),k();break}case" ":{e.preventDefault();break}}},[s,O,k,E,a]),H=n.useCallback(e=>{e.preventDefault();const t=e.clipboardData.getData("text/plain").trim().slice(0,o-s).split("");if(t){let x=0;const P=[...a];P.forEach(($,y)=>{if(y>=s){const j=_(t.shift()||$);j&&(P[y]=j,x=y)}}),D(P),h(P),T(Math.min(x+1,o-1))}},[s,_,h,o,a]),U=A(I.inputContainer,C&&I.inputContainerIsMobile,g,"cdg-otp-input");return m.jsx(F,{css:N,children:m.jsx("div",{...d,ref:M,className:U,children:Array.from(Array(o).keys()).map(e=>m.jsx(Z,{index:e,disabled:b,isMobile:C,autoFocus:r,isErrored:v,autoComplete:"one-time-code",focus:s===e,isNumberInput:p,value:a&&a[e],...p?{type:"number",pattern:"d{1}",inputMode:"numeric"}:void 0,onBlur:K,onInput:B,onPaste:H,onKeyDown:G,onFocus:L(e)},`SingleInput-${e}`))})})}),te=n.memo(S);S.__docgenInfo={description:"",methods:[],displayName:"OTPInputComponent"};te.displayName="OTPInput";export{te as O};
